"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{89102:function(e,n,t){t.d(n,{B:function(){return o},X:function(){return a}});var r=t(73235),i=t(60138),s=t(91195);function _templateObject(){var e=(0,r._)(["\n  fragment AssetDaemonTickFragment on InstigationTick {\n    id\n    timestamp\n    endTimestamp\n    status\n    instigationType\n    error {\n      ...PythonErrorFragment\n    }\n    requestedAssetKeys {\n      path\n    }\n    requestedAssetMaterializationCount\n    autoMaterializeAssetEvaluationId\n    requestedMaterializationsForAssets {\n      assetKey {\n        path\n      }\n      partitionKeys\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  query AssetDaemonTicksQuery(\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    autoMaterializeTicks(\n      dayRange: $dayRange\n      dayOffset: $dayOffset\n      statuses: $statuses\n      limit: $limit\n      cursor: $cursor\n      beforeTimestamp: $beforeTimestamp\n      afterTimestamp: $afterTimestamp\n    ) {\n      id\n      ...AssetDaemonTickFragment\n    }\n  }\n\n  ","\n"]);return _templateObject1=function(){return e},e}var o=(0,i.Ps)(_templateObject(),s.B),a=(0,i.Ps)(_templateObject1(),o)},22370:function(e,n,t){t.d(n,{V:function(){return AutomaterializationEvaluationHistoryTable}});var r,i=t(87612),s=t(85333),o=t(73235),a=t(52322),l=t(22139),c=t(99596),u=t(63832),d=t(12084),p=t(81308),h=t(83302),m=t(82585),f=t(54266),x=t(35505),j=t(58701),g=t(61935),v=t(88846),b=t(581);function _templateObject(){var e=(0,o._)(["\n  th,\n  td {\n    vertical-align: middle !important;\n  }\n"]);return _templateObject=function(){return e},e}var AutomaterializationEvaluationHistoryTable=function(e){var n=e.loading,t=e.ticks,r=e.statuses,i=e.setStatuses,o=e.setSelectedTick,m=e.setTableView,f=e.paginationProps;return(0,a.jsxs)(l.x,{children:[(0,a.jsxs)(l.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:[(0,a.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,a.jsx)(c.h,{activeItems:new Set(["evaluations"]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:function(e){m(e)}}),!n||(null==t?void 0:t.length)?null:(0,a.jsx)(u.$,{purpose:"body-text"})]}),(0,a.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,a.jsx)(StatusCheckbox,{statuses:r,setStatuses:i,status:g.izS.STARTED}),(0,a.jsx)(StatusCheckbox,{statuses:r,setStatuses:i,status:g.izS.SUCCESS}),(0,a.jsx)(StatusCheckbox,{statuses:r,setStatuses:i,status:g.izS.FAILURE}),(0,a.jsx)(StatusCheckbox,{statuses:r,setStatuses:i,status:g.izS.SKIPPED})]})]}),(0,a.jsxs)(y,{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,a.jsx)("th",{style:{width:90},children:"Status"}),(0,a.jsx)("th",{style:{width:90},children:"Duration"}),(0,a.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,a.jsx)("tbody",{children:t.map(function(e,n){var t=0!==n&&e.status===g.izS.STARTED&&!f.hasPrevCursor;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(j.E,{timestamp:{unix:e.timestamp},timeFormat:{showTimezone:!0}})}),(0,a.jsx)("td",{children:(0,a.jsx)(b.a,{tick:e,isStuckStarted:t})}),(0,a.jsx)("td",{children:t?" - ":(0,a.jsx)(v.Q,{startUnix:e.timestamp,endUnix:e.endTimestamp})}),(0,a.jsx)("td",{children:[g.izS.SKIPPED,g.izS.SUCCESS].includes(e.status)?(0,a.jsx)(d.Z,{onClick:function(){o(e)},children:(0,a.jsxs)(p.pN,{children:[e.requestedAssetMaterializationCount," materializations requested"]})}):" - "})]},e.id)})})]}),(0,a.jsx)("div",{style:{paddingBottom:"16px"},children:(0,a.jsx)(h.pI,(0,s._)({},f))})]})},S=(r={},(0,i._)(r,g.izS.SKIPPED,"None requested"),(0,i._)(r,g.izS.STARTED,"Started"),(0,i._)(r,g.izS.FAILURE,"Failed"),(0,i._)(r,g.izS.SUCCESS,"Requested"),r);function StatusCheckbox(e){var n=e.status,t=e.statuses,r=e.setStatuses;return(0,a.jsx)(m.X,{label:S[n],checked:t.has(n),onChange:function(){var e=new Set(t);t.has(n)?e.delete(n):e.add(n),r(e)}})}var y=(0,x.ZP)(f.i).withConfig({componentId:"sc-d9b5bf3f-0"})(_templateObject())},3490:function(e,n,t){t.d(n,{d:function(){return R}});var r=t(58467),i=t(73235),s=t(52322),o=t(40794),a=t(60138),l=t(22139),c=t(81308),u=t(25195),d=t(91532),p=t(63832),h=t(88510),m=t(2784),f=t(47933),x=t(35505),j=t(58701),g=t(35157),v=t(61935),b=t(32911),S=t(55658),y=t(37160),_=t(38153),k=t(28090),w=t(55798),O=t(74711);function _templateObject(){var e=(0,i._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    justify-content: center;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  query AssetGroupAndLocationQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        definition {\n          id\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return _templateObject1=function(){return e},e}var C="30% 17% 53%",R=(0,m.memo)(function(e){var n=e.tick,t=e.isOpen,i=e.close,o=(0,r._)((0,m.useState)(""),2),a=o[0],d=o[1],p=(0,m.useMemo)(function(){return n?n.requestedAssetKeys.filter(function(e){return e.path.join("/").includes(a)}):[]},[n,a]),f=(null==n?void 0:n.requestedAssetKeys.length)||0,x=(0,m.useRef)(null),y=(0,h.MG)({count:p.length,getScrollElement:function(){return x.current},estimateSize:function(){return 34},overscan:10}),_=y.getTotalSize(),k=y.getVirtualItems(),O=(0,m.useMemo)(function(){var e={};return null==n||n.requestedMaterializationsForAssets.forEach(function(n){var t=n.assetKey,r=n.partitionKeys;e[(0,g.Je)(t)]=r}),e},[null==n?void 0:n.requestedMaterializationsForAssets]),R=(0,m.useMemo)(function(){return a&&!p.length?(0,s.jsx)(w.LS,{title:"No matching asset keys",description:(0,s.jsxs)(s.Fragment,{children:["No matching asset keys for ",(0,s.jsx)("strong",{children:a})]})}):(null==n?void 0:n.requestedAssetKeys.length)?(0,s.jsxs)("div",{style:{overflow:"scroll"},ref:x,children:[(0,s.jsxs)(l.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:C,height:"32px",fontSize:"12px",color:u.$(),position:"sticky",top:0,zIndex:1,background:u.v8()},children:[(0,s.jsx)(S.qN,{children:"Asset"}),(0,s.jsx)(S.qN,{children:"Group"}),(0,s.jsx)(S.qN,{children:"Result"})]}),(0,s.jsx)(S.Nh,{$totalHeight:_,children:k.map(function(e){var t=e.index,r=e.key,i=e.size,o=e.start,a=p[t];return(0,s.jsx)(AssetDetailRow,{$height:i,$start:o,assetKey:a,partitionKeys:O[(0,g.Je)(a)],evaluationId:n.autoMaterializeAssetEvaluationId},r)})})]}):(0,s.jsx)(l.x,{padding:{vertical:12,horizontal:24},children:(0,s.jsx)(c.YS,{color:u.$(),children:"None"})})},[O,p,k,a,n,_]);return(0,s.jsx)(w.Vm,{isOpen:t,setIsOpen:i,height:400,header:(0,s.jsx)(w.Lv,{title:n?(0,s.jsx)("div",{children:(0,s.jsx)(j.E,{timestamp:{unix:n.timestamp},timeFormat:{showTimezone:!0}})}):"",showSearch:f>0,placeholder:"Filter by asset key…",queryString:a,setQueryString:d}),content:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto auto minmax(0, 1fr)",height:"100%"},children:[(0,s.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:n?(0,s.jsx)(b.c,{tick:n}):null}),(null==n?void 0:n.status)===v.izS.STARTED?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:p.length>0?void 0:"bottom",children:(0,s.jsx)(c.Tj,{children:"Materializations requested"})}),R]})]})})}),AssetDetailRow=function(e){var n=e.$start,t=e.$height,r=e.assetKey,i=e.partitionKeys,a=e.evaluationId,h=(null==i?void 0:i.length)||1,m=(0,o.a)(E,{fetchPolicy:"cache-and-network",variables:{assetKey:{path:r.path}}}).data,x=(null==m?void 0:m.assetOrError.__typename)==="Asset"?m.assetOrError:null,j=null==x?void 0:x.definition,g=j?(0,y.kQ)(j.repository.name,j.repository.location.name):null;return(0,s.jsx)(S.X2,{$start:n,$height:t,children:(0,s.jsxs)(T,{border:"bottom",children:[(0,s.jsx)(S.E5,{children:(0,s.jsx)(k.R,{path:r.path,icon:"asset",textStyle:"middle-truncate"})}),(0,s.jsx)(S.E5,{children:m?j&&j.groupName&&g?(0,s.jsx)(f.rU,{to:(0,_.$U)(g,"/asset-groups/".concat(j.groupName)),children:(0,s.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.jsx)(d.JO,{color:u.$(),name:"asset_group"}),j.groupName]})}):(0,s.jsx)(c.YS,{color:u.$(),children:"Asset not found"}):(0,s.jsx)(p.$,{purpose:"body-text"})}),(0,s.jsx)(S.E5,{children:(0,s.jsxs)(f.rU,{to:(0,O.p)(r,{view:"automation",evaluation:"".concat(a)}),children:[h," materialization",1===h?"":"s"," requested"]})})]})})},T=(0,x.ZP)(l.x).withConfig({componentId:"sc-e592a5b2-0"})(_templateObject(),C),E=(0,a.Ps)(_templateObject1())},80428:function(e,n,t){t.d(n,{o:function(){return AutomaterializeRunHistoryTable}});var r=t(85333),i=t(73235),s=t(82550),o=t(52322),a=t(22139),l=t(99596),c=t(83302),u=t(35505),d=t(55237),p=t(64107),h=t(5063),m=t(65767);function _templateObject(){var e=(0,i._)(["\n  position: relative;\n  > *:nth-child(2) {\n    position: absolute;\n    right: 0;\n    top: 0;\n  }\n"]);return _templateObject=function(){return e},e}var AutomaterializeRunHistoryTable=function(e){var n,t=e.filterTags,i=e.setTableView,u=(0,m.l)({nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[14])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]},variables:{filter:{tags:(0,s._)(t||[]).concat([{key:"dagster/auto_materialize",value:"true"}])}},query:h.RUNS_ROOT_QUERY,pageSize:15}),x=u.queryResult,j=u.paginationProps;(0,d.C4)(x,15e3);var g=null===(n=x.data||x.previousData)||void 0===n?void 0:n.pipelineRunsOrError;return(0,o.jsxs)(a.x,{children:[(0,o.jsxs)(f,{children:[(0,o.jsx)(a.x,{padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:(0,o.jsx)(l.h,{activeItems:new Set(["runs"]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:function(e){i(e)}})}),(0,o.jsx)(p.AL,{runs:(null==g?void 0:g.__typename)==="Runs"?g.results:[]})]}),(0,o.jsx)("div",{style:{paddingBottom:"16px"},children:(0,o.jsx)(c.pI,(0,r._)({},j))})]})},f=u.ZP.div.withConfig({componentId:"sc-712be5ef-0"})(_templateObject())},1813:function(e,n,t){t.d(n,{V2:function(){return q},WH:function(){return BackfillActionsMenu},qG:function(){return backfillCanCancelRuns}});var r=t(81862),i=t(58467),s=t(73235),o=t(22970),a=t(52322),l=t(33379),c=t(60138),u=t(59692),d=t(37783),p=t(44678),h=t(9001),m=t(91532),f=t(2784),x=t(7267),j=t(10952),g=t(79321),v=t(6871),b=t(84495),S=t(37160),y=t(56121);function _templateObject(){var e=(0,s._)(["\n  fragment BackfillStepStatusDialogBackfillFragment on PartitionBackfill {\n    id\n    partitionNames\n    partitionSet {\n      name\n      pipelineName\n      repositoryOrigin {\n        repositoryName\n        repositoryLocationName\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}function backfillCanShowStepStatus(e){return!!e&&null!==e.partitionSet&&null!==e.partitionNames}var BackfillStepStatusDialog=function(e){var n=e.backfill,t=e.onClose;return(0,a.jsxs)(j.Vq,{isOpen:!!(null==n?void 0:n.partitionSet),title:"Step status for backfill: ".concat(null==n?void 0:n.id),onClose:t,style:{width:"80vw"},children:[function(){if(!backfillCanShowStepStatus(n))return null;var e=(0,S.kQ)(n.partitionSet.repositoryOrigin.repositoryName,n.partitionSet.repositoryOrigin.repositoryLocationName);return(0,a.jsx)(BackfillStepStatusDialogContent,{backfill:n,partitionSet:n.partitionSet,partitionNames:n.partitionNames,repoAddress:e,onClose:t})}(),(0,a.jsx)(j.cN,{topBorder:!0,children:(0,a.jsx)(h.zx,{onClick:t,children:"Done"})})]})},_=(0,c.Ps)(_templateObject()),BackfillStepStatusDialogContent=function(e){var n=e.backfill,t=e.partitionSet,r=e.partitionNames,s=e.repoAddress,o=(0,i._)((0,f.useState)(60),2),l=o[0],c=o[1],u=(0,i._)((0,f.useState)(0),2),d=u[0],p=u[1],h=(0,f.useMemo)(function(){return[{token:"tag",value:"dagster/backfill=".concat(n.id)}]},[n.id]),m=(0,v.T)({partitionSetName:t.name,partitionTagName:b.H.Partition,partitionNames:r,pageSize:l,runsFilter:h,repositorySelector:(0,y.$)(s),jobName:t.pipelineName,offset:d,skipQuery:!n});return(0,a.jsx)(g.ux,{partitionNames:r,partitions:m,pipelineName:null==t?void 0:t.pipelineName,repoAddress:s,setPageSize:c,offset:d,setOffset:p})},k=t(87612),w=t(85333),O=t(6692),C=t(40794),R=t(36691),T=t(91195),E=t(61935),P=t(6315),N=t(16322);function BackfillTerminationDialog_templateObject(){var e=(0,s._)(["\n  fragment BackfillTerminationDialogBackfillFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    numCancelable\n  }\n"]);return BackfillTerminationDialog_templateObject=function(){return e},e}function _templateObject1(){var e=(0,s._)(["\n  mutation CancelBackfill($backfillId: String!) {\n    cancelPartitionBackfill(backfillId: $backfillId) {\n      ... on CancelBackfillSuccess {\n        backfillId\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject1=function(){return e},e}var BackfillTerminationDialog=function(e){var n,t=e.backfill,s=e.onClose,c=e.onComplete,u=(0,i._)((0,l.D)(A),1)[0],d=(0,C.a)(R.cv,{variables:{backfillId:(null==t?void 0:t.id)||""},notifyOnNetworkStatusChange:!0,skip:!t}).data,p=(0,i._)((0,f.useState)(!1),2),m=p[0],x=p[1],g=(0,f.useMemo)(function(){if(!t||!d||"PartitionBackfill"!==d.partitionBackfillOrError.__typename)return{};var e,n=null===(e=d.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results.filter(function(e){return e.runStatus&&e.runId&&P.oV.has(e.runStatus)});return(null==n?void 0:n.reduce(function(e,n){return n&&n.runId?(0,O._)((0,w._)({},e),(0,k._)({},n.runId,!0)):e},{}))||{}},[t,d]);if(!t||!d)return null;var v=t.numCancelable,b=(n=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return x(!0),[4,u({variables:{backfillId:t.id}})];case 1:return e.sent(),c(),x(!1),s(),[2]}})}),function(){return n.apply(this,arguments)});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j.Vq,{isOpen:!!t&&t.status!==E.Jv3.CANCELED&&(t.isAssetBackfill||!!v),title:"Cancel backfill",onClose:s,children:[t.isAssetBackfill?(0,a.jsx)(j.a7,{children:"Confirm cancellation of asset backfill? This will mark unfinished runs as canceled."}):(0,a.jsxs)(j.a7,{children:["There ",1===v?"is 1 partition ":"are ".concat(v," partitions "),"yet to be queued or launched."]}),(0,a.jsxs)(j.cN,{children:[(0,a.jsx)(h.zx,{intent:"none",onClick:s,children:"Close"}),m?(0,a.jsx)(h.zx,{intent:"danger",disabled:!0,children:"Canceling..."}):(0,a.jsx)(h.zx,{intent:"danger",onClick:b,children:"Cancel backfill"})]})]}),g&&(0,a.jsx)(N.A,{isOpen:!!t&&(!v||"REQUESTED"!==t.status)&&!!Object.keys(g).length,onClose:s,onComplete:c,selectedRuns:g})]})},I=(0,c.Ps)(BackfillTerminationDialog_templateObject()),A=(0,c.Ps)(_templateObject1(),T.B),D=t(56101),z=t(66904),F=t(19211),$=t(56266),L=t(49313);function BackfillActionsMenu_templateObject(){var e=(0,s._)(["\n  fragment BackfillActionsBackfillFragment on PartitionBackfill {\n    id\n    hasCancelPermission\n    hasResumePermission\n    isAssetBackfill\n    status\n    numCancelable\n\n    ...BackfillStepStatusDialogBackfillFragment\n    ...BackfillTerminationDialogBackfillFragment\n  }\n\n  ","\n  ","\n"]);return BackfillActionsMenu_templateObject=function(){return e},e}function backfillCanCancelRuns(e,n){if(!e.hasCancelPermission||!n)return!1;var t=n[E.VOA.QUEUED]||0,r=n[E.VOA.STARTED]||0;return t>0||r>0}var BackfillActionsMenu=function(e){var n,t=e.backfill,s=e.canCancelRuns,c=e.refetch,j=(0,x.k6)(),g=(0,L.it)([{token:"tag",value:"dagster/backfill=".concat(t.id)}]),v=(0,i._)((0,f.useState)(!1),2),b=v[0],S=v[1],y=(0,i._)((0,f.useState)(!1),2),_=y[0],k=y[1],w=(0,i._)((0,l.D)(D.g),1)[0],O=(n=(0,r._)(function(){var e,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,w({variables:{backfillId:t.id}})];case 1:if(!((e=r.sent().data)&&"ResumeBackfillSuccess"===e.resumePartitionBackfill.__typename))return[3,2];return c(),[3,6];case 2:if(!(e&&"UnauthorizedError"===e.resumePartitionBackfill.__typename))return[3,4];return[4,(0,F.B7)({message:(0,a.jsx)(u.Z,{direction:"column",spacing:4,children:(0,a.jsx)("div",{children:"Attempted to retry the backfill in read-only mode. This backfill was not retried."})}),icon:"error",intent:"danger"})];case 3:return r.sent(),[3,6];case 4:if(!(e&&"PythonError"===e.resumePartitionBackfill.__typename))return[3,6];return n=e.resumePartitionBackfill,[4,(0,F.B7)({message:(0,a.jsx)("div",{children:"An unexpected error occurred. This backfill was not retried."}),icon:"error",intent:"danger",action:{text:"View error",onClick:function(){return(0,z._)({body:(0,a.jsx)($.T9,{error:n})})}}})];case 5:r.sent(),r.label=6;case 6:return[2]}})}),function(){return n.apply(this,arguments)}),C=t.hasCancelPermission&&(t.isAssetBackfill&&t.status===E.Jv3.REQUESTED||t.numCancelable>0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.J,{position:"bottom-right",content:(0,a.jsxs)(p.v2,{children:[(0,a.jsx)(p.sN,{text:"View backfill runs",icon:"settings_backup_restore",onClick:function(){return j.push(g)}}),(0,a.jsx)(p.sN,{disabled:!backfillCanShowStepStatus(t),text:"View step status",icon:"view_list",onClick:function(){k(!0)}}),(0,a.jsx)(p.sN,{disabled:!(t.hasResumePermission&&t.status===E.Jv3.FAILED&&t.partitionSet),text:"Resume failed backfill",title:"Submits runs for all partitions in the backfill that do not have a corresponding run. Does not retry failed runs.",icon:"refresh",onClick:function(){return O()}}),(0,a.jsx)(p.sN,{text:C?"Cancel backfill submission":"Terminate unfinished runs",icon:"cancel",intent:"danger",disabled:!(C||s),onClick:function(){return S(!0)}})]}),children:(0,a.jsx)(h.zx,{icon:(0,a.jsx)(m.JO,{name:"expand_more"})})}),(0,a.jsx)(BackfillStepStatusDialog,{backfill:_?t:void 0,onClose:function(){return k(!1)}}),(0,a.jsx)(BackfillTerminationDialog,{backfill:b?t:void 0,onClose:function(){return S(!1)},onComplete:function(){return c()}})]})},q=(0,c.Ps)(BackfillActionsMenu_templateObject(),_,I)},36691:function(e,n,t){t.d(n,{FW:function(){return BackfillRow},cv:function(){return V}});var r=t(85333),i=t(6692),s=t(58467),o=t(73235),a=t(52322),l=t(83601),c=t(60138),u=t(25195),d=t(81308),p=t(22139),h=t(91532),m=t(57830),f=t(24471),x=t.n(f),j=t(2784),g=t(47933),v=t(7267),b=t(35505),S=t(1813),y=t(68651),_=t(66904),k=t(56266),w=t(55237),O=t(35157),C=t(61935),R=t(52246),T=t(90818),E=t(51892),P=t(39222),N=t(6315),I=t(65435),A=t(49313),D=t(30301),z=t(86839),F=t(46988),$=t(37160),L=t(44254),q=t(38153);function _templateObject(){var e=(0,o._)(["\n  border: none;\n  background: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n\n  :focus {\n    outline: none;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  query SingleBackfillCountsQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatusCounts {\n          runStatus\n          count\n        }\n      }\n    }\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,o._)(["\n  query SingleBackfillQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatuses {\n          ...PartitionStatusesForBackfill\n        }\n      }\n    }\n  }\n\n  fragment PartitionStatusesForBackfill on PartitionStatuses {\n    results {\n      id\n      partitionName\n      runId\n      runStatus\n    }\n  }\n"]);return _templateObject2=function(){return e},e}var BackfillRow=function(e){return null===e.backfill.numPartitions||null===e.backfill.partitionNames||e.backfill.isAssetBackfill?(0,a.jsx)(BackfillRowContent,(0,i._)((0,r._)({},e),{counts:null,statuses:null,statusQueryResult:null})):(0,a.jsx)(BackfillRowLoader,{backfillId:e.backfill.id,numPartitions:e.backfill.numPartitions,children:function(n){return(0,a.jsx)(BackfillRowContent,(0,r._)({},e,n))}})},BackfillRowLoader=function(e){var n=e.backfillId,t=e.numPartitions,r=(0,l.t)(V,{variables:{backfillId:n},notifyOnNetworkStatusChange:!0}),i=(0,l.t)(M,{variables:{backfillId:n},notifyOnNetworkStatusChange:!0}),o=(0,s._)((t||0)>U?i:r,2),a=o[0],c=o[1];(0,z.v5)(a),(0,w.C4)(c,w.dT);var u=c.data,d=j.useMemo(function(){if((null==u?void 0:u.partitionBackfillOrError.__typename)!=="PartitionBackfill")return{counts:null,statuses:null};if("partitionStatusCounts"in u.partitionBackfillOrError){var e;return{counts:Object.fromEntries(u.partitionBackfillOrError.partitionStatusCounts.map(function(e){return[e.runStatus,e.count]})),statuses:null}}var n=(null===(e=u.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results)||null;return{counts:x()(n,function(e){return e.runStatus}),statuses:n}},[u]),p=d.counts,h=d.statuses;return e.children({counts:p,statuses:h,statusQueryResult:c})},BackfillRowContent=function(e){var n=e.backfill,t=e.allPartitions,r=e.showBackfillTarget,i=e.onShowPartitionsRequested,s=e.refetch,o=e.counts,l=e.statuses,c=e.statusQueryResult,p=n.partitionSet?(0,$.kQ)(n.partitionSet.repositoryOrigin.repositoryName,n.partitionSet.repositoryOrigin.repositoryLocationName):null;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{width:120},children:(0,a.jsx)(d.fv,{style:{fontSize:"16px",lineHeight:"18px"},children:(0,a.jsx)(g.rU,{to:n.isAssetBackfill?"/overview/backfills/".concat(n.id):(0,A.it)([{token:"tag",value:"dagster/backfill=".concat(n.id)}]),children:n.id})})}),(0,a.jsx)("td",{style:{width:220},children:n.timestamp?(0,a.jsx)(D.v,{timestamp:n.timestamp}):"-"}),r?(0,a.jsx)("td",{style:{width:"20%"},children:(0,a.jsx)(BackfillTarget,{backfill:n,repoAddress:p})}):null,(0,a.jsx)("td",{style:{width:t?300:140},children:(0,a.jsx)(BackfillRequestedRange,{backfill:n,allPartitions:t,onExpand:function(){return i(n)}})}),(0,a.jsx)("td",{style:{width:160},children:(0,a.jsx)(P.f,{tags:n.tags,repoAddress:p})}),(0,a.jsx)("td",{style:{width:140},children:(null==c?void 0:c.loading)?(0,a.jsx)("div",{style:{color:u.$()},children:"Loading"}):(0,a.jsx)(BackfillStatusTag,{backfill:n,counts:o})}),(0,a.jsx)("td",{children:n.isValidSerialization?(null==c?void 0:c.loading)?(0,a.jsx)("div",{style:{color:u.$()},children:"Loading"}):o?(0,a.jsx)(BackfillRunStatus,{backfill:n,counts:o,statuses:l}):(0,a.jsx)("div",{style:{color:u.$()},children:"–"}):(0,a.jsx)("p",{children:"A partitions definition has changed since this backfill ran."})}),(0,a.jsx)("td",{children:(0,a.jsx)(S.WH,{backfill:n,canCancelRuns:(0,S.qG)(n,o),refetch:s})})]})},U=1e3,BackfillRunStatus=function(e){var n=e.backfill,t=e.statuses,r=e.counts,i=(0,v.k6)(),o=Object.entries(r).reduce(function(e,n){var t=(0,s._)(n,2),r=t[0],i=t[1];return e[r]=(e[r]||0)+i,e},{}),l=j.useMemo(function(){return{runStatusForPartitionKey:function(e){var n;return(null==t?void 0:null===(n=t.filter(function(n){return n.partitionName===e})[0])||void 0===n?void 0:n.runStatus)||C.VOA.NOT_STARTED}}},[t]);return t&&n.partitionNames?(0,a.jsx)(R.b,{partitionNames:n.partitionNames,health:l,splitPartitions:!0,onClick:function(e){var n=t.find(function(n){return n.partitionName===e});(null==n?void 0:n.runId)&&i.push("/runs/".concat(n.runId))}}):(0,a.jsx)(I.Y,{succeededCount:o[C.VOA.SUCCESS]||0,inProgressCount:o[C.VOA.STARTED]||0,failedCount:o[C.VOA.FAILURE]||0})},BackfillTarget=function(e){var n=e.backfill,t=e.repoAddress,r=(0,F.Ux)(t),i=n.assetSelection,s=n.partitionSet,o=n.partitionSetName,l=(0,O.pv)(o||"");return(0,a.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[l?null:s&&r?(0,a.jsx)(g.rU,{style:{fontWeight:500},to:(0,q.jT)({repoName:s.repositoryOrigin.repositoryName,repoLocation:s.repositoryOrigin.repositoryLocationName,pipelineName:s.pipelineName,isJob:(0,F.E8)(r,s.pipelineName),path:"/partitions?partitionSet=".concat(encodeURIComponent(s.name))}),children:s.name}):o?(0,a.jsx)("span",{style:{fontWeight:500},children:o}):null,(0,a.jsxs)(p.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:[t?(0,a.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{fontSize:"12px"},children:[(0,a.jsx)(h.JO,{name:"repo",color:u.$()}),(0,a.jsx)(g.rU,{to:(0,q.$U)(t),children:(0,L.Uz)(t)})]}):void 0,(null==i?void 0:i.length)?(0,a.jsx)(E.h,{assetKeys:i,dialogTitle:"Assets in backfill"}):s&&r?(0,a.jsx)(T.h,{showIcon:!0,size:"small",pipelineName:s.pipelineName,pipelineHrefContext:{name:s.repositoryOrigin.repositoryName,location:s.repositoryOrigin.repositoryLocationName},isJob:(0,F.E8)(r,s.pipelineName)}):null]})]})},BackfillRequestedRange=function(e){var n=e.allPartitions,t=e.backfill,r=e.onExpand,i=t.partitionNames,s=t.numPartitions;if(null===s)return(0,a.jsx)("span",{});var o="".concat(s.toLocaleString()," ").concat(1===s?"partition":"partitions");return(0,a.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[(0,a.jsx)("div",{children:i?(0,a.jsx)(B,{onClick:r,children:(0,a.jsx)(m.V,{intent:"primary",interactive:!0,children:o})}):(0,a.jsx)(m.V,{intent:"primary",children:o})}),n&&i&&(0,a.jsx)(RequestedPartitionStatusBar,{all:n,requested:i})]})},RequestedPartitionStatusBar=function(e){var n=e.all,t=e.requested,r=j.useMemo(function(){return{runStatusForPartitionKey:function(e){return t&&t.includes(e)?C.VOA.QUEUED:C.VOA.NOT_STARTED}}},[t]);return(0,a.jsx)(R.b,{small:!0,hideStatusTooltip:!0,partitionNames:n,health:r})},BackfillStatusTag=function(e){var n=e.backfill,t=e.counts;if(n.isAssetBackfill)return(0,a.jsx)(y.w,{backfill:n});switch(n.status){case C.Jv3.REQUESTED:return(0,a.jsx)(m.V,{children:"In progress"});case C.Jv3.FAILED:return(0,a.jsx)(p.x,{margin:{bottom:12},children:(0,a.jsx)(B,{onClick:function(){return n.error&&(0,_._)({title:"Error",body:(0,a.jsx)(k.T9,{error:n.error})})},children:(0,a.jsx)(m.V,{intent:"danger",children:"Failed"})})});case C.Jv3.COMPLETED:if(null===n.partitionNames)return(0,a.jsx)(m.V,{intent:"success",children:"Completed"});if(!t)return(0,a.jsx)("div",{style:{color:u.$()},children:"None"});if(t[C.VOA.SUCCESS]===n.partitionNames.length)return(0,a.jsx)(m.V,{intent:"success",children:"Completed"});if(Array.from(N.Ys).some(function(e){return t[e]}))return(0,a.jsx)(m.V,{intent:"primary",children:"In progress"});return(0,a.jsx)(m.V,{intent:"warning",children:"Incomplete"});case C.Jv3.CANCELING:return(0,a.jsx)(m.V,{children:"Canceling"});case C.Jv3.CANCELED:return(0,a.jsx)(m.V,{children:"Canceled"})}return(0,a.jsx)("span",{})},B=b.ZP.button.withConfig({componentId:"sc-dc1922f9-0"})(_templateObject()),M=(0,c.Ps)(_templateObject1()),V=(0,c.Ps)(_templateObject2())},68651:function(e,n,t){t.d(n,{w:function(){return BackfillStatusTagForPage}});var r=t(73235),i=t(52322),s=t(22139),o=t(57830),a=t(35505),l=t(66904),c=t(56266),u=t(61935);function _templateObject(){var e=(0,r._)(["\n  border: none;\n  background: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n\n  :focus {\n    outline: none;\n  }\n"]);return _templateObject=function(){return e},e}var BackfillStatusTagForPage=function(e){var n=e.backfill,errorState=function(e){return(0,i.jsx)(s.x,{margin:{bottom:12},children:(0,i.jsx)(d,{onClick:function(){return r&&(0,l._)({title:"Error",body:(0,i.jsx)(c.T9,{error:r})})},children:(0,i.jsx)(o.V,{intent:"danger",children:e})})})},t=n.status,r=n.error;switch(t){case u.Jv3.REQUESTED:return(0,i.jsx)(o.V,{children:"In progress"});case u.Jv3.CANCELING:return errorState("Canceling");case u.Jv3.CANCELED:return errorState("Canceled");case u.Jv3.FAILED:return errorState("Failed");case u.Jv3.COMPLETED:return(0,i.jsx)(o.V,{intent:"success",children:"Completed"});default:return(0,i.jsx)(o.V,{children:t})}},d=a.ZP.button.withConfig({componentId:"sc-b7ae553d-0"})(_templateObject())},94611:function(e,n,t){t.d(n,{b:function(){return v},G:function(){return BackfillTable}});var r=t(58467),i=t(73235),s=t(52322),o=t(60138),a=t(54266),l=t(2784),c=t(1813),u=t(82550),d=t(10952),p=t(3842),h=t(9001),m=t(10397),f=t(75375),x=new Intl.Collator(navigator.language,{sensitivity:"base",numeric:!0}),BackfillPartitionsRequestedDialog=function(e){var n=e.backfill,t=e.onClose;return(0,s.jsxs)(d.Vq,{isOpen:!!n,title:(0,s.jsxs)("span",{children:["Partitions requested for backfill:"," ",(0,s.jsx)("span",{style:{fontSize:"18px",fontFamily:p.b.monospace},children:null==n?void 0:n.id})]}),onClose:t,children:[(0,s.jsx)(DialogContent,{partitionNames:(null==n?void 0:n.partitionNames)||[]}),(0,s.jsx)(d.cN,{topBorder:!0,children:(0,s.jsx)(h.zx,{onClick:t,children:"Done"})})]})},DialogContent=function(e){var n=e.partitionNames,t=(0,l.useMemo)(function(){return(0,u._)(n||[]).sort(function(e,n){return x.compare(e,n)})},[n]);return(0,s.jsx)("div",{style:{height:"340px",overflow:"hidden"},children:(0,s.jsx)(f.Y,{items:t,renderItem:function(e){return(0,s.jsx)("div",{children:(0,s.jsx)(m.rd,{text:e})},e)}})})},j=t(36691),g=t(91195);function _templateObject(){var e=(0,i._)(["\n  fragment BackfillTableFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    isValidSerialization\n    partitionNames\n    numPartitions\n    timestamp\n    partitionSetName\n    partitionSet {\n      id\n      ...PartitionSetForBackfillTable\n    }\n    assetSelection {\n      path\n    }\n    tags {\n      key\n      value\n    }\n    error {\n      ...PythonErrorFragment\n    }\n    ...BackfillActionsBackfillFragment\n  }\n\n  fragment PartitionSetForBackfillTable on PartitionSet {\n    id\n    name\n    mode\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var BackfillTable=function(e){var n=e.showBackfillTarget,t=void 0===n||n,i=e.allPartitions,o=e.backfills,c=e.refetch,u=(0,r._)((0,l.useState)(),2),d=u[0],p=u[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.i,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Backfill ID"}),(0,s.jsx)("th",{children:"Created"}),t?(0,s.jsx)("th",{children:"Backfill target"}):null,(0,s.jsx)("th",{children:"Requested"}),(0,s.jsx)("th",{children:"Launched by"}),(0,s.jsx)("th",{children:"Backfill status"}),(0,s.jsx)("th",{children:"Run status"}),(0,s.jsx)("th",{style:{width:80}})]})}),(0,s.jsx)("tbody",{children:o.map(function(e){return(0,s.jsx)(j.FW,{showBackfillTarget:t,backfill:e,allPartitions:i,onShowPartitionsRequested:p,refetch:c},e.id)})})]}),(0,s.jsx)(BackfillPartitionsRequestedDialog,{backfill:d,onClose:function(){return p(void 0)}})]})},v=(0,o.Ps)(_templateObject(),g.B,c.V2)},90437:function(e,n,t){t.d(n,{p:function(){return LiveTickTimeline}});var r,i,s=t(87612),o=t(85333),a=t(6692),l=t(58467),c=t(73235),u=t(52322),d=t(25195),p=t(21106),h=t(81308),m=t(43180),f=t(99046),x=t(28879),j=t.n(x),g=t(77491),v=t.n(g),b=t(30733),S=t.n(b),y=t(2784),_=t(35505),k=t(85888),w=t(59686),O=t(94392),C=t(61935);function _templateObject(){var e=(0,c._)(["\n  position: relative;\n  height: 100px;\n  padding: 10px 2px;\n  border-bottom: 1px solid ",";\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,c._)(["\n  height: 24px;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,c._)(["\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  height: 80px;\n  will-change: transform, width;\n  border-radius: 2px;\n  div {\n    place-content: center;\n    display: grid;\n  }\n  color: ",";\n  ","\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,c._)(["\n  position: absolute;\n  top: 0;\n  height: 124px;\n  will-change: transform;\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,c._)(["\n  position: absolute;\n  top: 0;\n  height: 108px;\n  width: 1px;\n  background: ",";\n"]);return _templateObject4=function(){return e},e}function _templateObject5(){var e=(0,c._)(["\n  height: 16px;\n  position: absolute;\n  bottom: 0;\n  width: 100px;\n  margin-left: -24px;\n"]);return _templateObject5=function(){return e},e}function _templateObject6(){var e=(0,c._)(["\n  position: absolute;\n  top: 0;\n  height: 126px;\n  width: 2px;\n  background: ",";\n  &:after {\n    content: 'Now';\n    position: absolute;\n    left: 0;\n    background: ",";\n    color: ",";\n    bottom: 0;\n    font-size: 12px;\n    padding: 3px 4px;\n  }\n"]);return _templateObject6=function(){return e},e}j().extend(v());var R=(r={},(0,s._)(r,C.izS.SUCCESS,d.fA()),(0,s._)(r,C.izS.FAILURE,d.FY()),(0,s._)(r,C.izS.STARTED,d.v4()),(0,s._)(r,C.izS.SKIPPED,d.A8()),r),T=(i={},(0,s._)(i,C.izS.SUCCESS,d.Lv()),(0,s._)(i,C.izS.FAILURE,d.MP()),(0,s._)(i,C.izS.STARTED,d.Jq()),(0,s._)(i,C.izS.SKIPPED,d.$l()),i),E=S()(function(e){return new Intl.DateTimeFormat(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",timeZone:"Automatic"===e?(0,O.cw)():e,timeZoneName:"short"})}),LiveTickTimeline=function(e){var n=e.ticks,t=e.onHoverTick,r=e.onSelectTick,i=e.exactRange,s=e.timeRange,c=e.tickGrid,d=e.timeAfter,f=(0,l._)((0,y.useState)(Date.now()),2),x=f[0],j=f[1],g=(0,l._)((0,y.useState)(!1),2),v=g[0],b=g[1];(0,y.useEffect)(function(){if(!v&&!i){var e=setInterval(function(){j(Date.now())},100);return function(){return clearInterval(e)}}return function(){}},[i,v]);var S=(null==i?void 0:i[1])?1e3*i[1]:x+(void 0===d?6e4:d),_=(null==i?void 0:i[0])?1e3*i[0]:x-(void 0===s?3e5:s),O=S-_,C=(0,p.S)(),R=C.viewport,T=C.containerProps,L=(0,y.useMemo)(function(){return n.filter(function(e){return!e.endTimestamp||1e3*e.endTimestamp>_}).reverse()},[n,_]),q=(0,y.useMemo)(function(){return L.map(function(e,n){var t,r,i=(t=1e3*e.timestamp,R.width*(t-_)/O),s=(r=(0,k.g6)(e,L.length-n-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:x,R.width*(r-_)/O);return(0,a._)((0,o._)({},e),{width:Math.max(s-i,8),startX:i})})},[_,x,L,O,R.width]),U=Math.max((S-_)/25,void 0===c?6e4:c),B=U/5,M=Math.ceil(_/B)*B,V=(0,y.useMemo)(function(){for(var e,n=[],t=M;t<=S;t+=B)n.push({time:t,x:(e=t,R.width*(e-_)/O),showLabel:t%U==0});return n},[S,M,B,R.width,_,O,U]),J=(0,y.useContext)(w.JB),H=(0,l._)(J.timezone,1)[0];return(0,u.jsx)("div",{style:{marginRight:"8px"},children:(0,u.jsxs)("div",(0,a._)((0,o._)({},T),{children:[(0,u.jsxs)(N,{children:[V.map(function(e){return(0,u.jsxs)(D,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,u.jsx)(z,{}),e.showLabel?(0,u.jsx)(F,{children:(0,u.jsx)(h.YS,{children:E(H).format(new Date(e.time))})}):null]},e.time)}),q.map(function(e){var n,i,s=null!==(i="requestedAssetMaterializationCount"in e?e.requestedAssetMaterializationCount:null===(n=e.runIds)||void 0===n?void 0:n.length)&&void 0!==i?i:0;return(0,u.jsx)(A,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:function(){t(e),b(!0)},onMouseLeave:function(){t(),b(!1)},onClick:function(){r(e)},children:(0,u.jsx)(m.u,{content:(0,u.jsx)(P,{tick:e}),children:(0,u.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:s>0?s:null})})},e.id)}),(0,u.jsx)($,{style:{transform:"translateX(".concat(R.width*(x-_)/O,"px)")}})]}),(0,u.jsx)(I,{})]}))})},P=(0,y.memo)(function(e){var n=e.tick,t=(0,y.useMemo)(function(){var e,t;return n.status===C.izS.FAILURE?"Evaluation failed":n.status===C.izS.STARTED?"Evaluating…":"requestedAssetMaterializationCount"in n?"".concat(n.requestedAssetMaterializationCount," materialization").concat((0,f.I)(n.requestedAssetMaterializationCount,"","s")," requested"):"".concat((null===(e=n.runs)||void 0===e?void 0:e.length)||0," run").concat((0,f.I)(null===(t=n.runs)||void 0===t?void 0:t.length,"","s")," requested")},[n]),r=j()(1e3*n.timestamp),i=j()(n.endTimestamp?1e3*n.endTimestamp:Date.now()),s=r.to(i,!0);return(0,u.jsxs)("div",{children:[(0,u.jsxs)(h.YS,{as:"div",children:[t," (",s,")"]}),n.status===C.izS.STARTED?null:(0,u.jsx)(h.YS,{color:d.$(),children:"Click for details"})]})}),N=_.ZP.div.withConfig({componentId:"sc-44a8a894-0"})(_templateObject(),d.wL()),I=_.ZP.div.withConfig({componentId:"sc-44a8a894-1"})(_templateObject1()),A=_.ZP.div.withConfig({componentId:"sc-44a8a894-2"})(_templateObject2(),d.v8(),function(e){var n=e.status;return"\n    background: ".concat(R[n],";\n    &:hover {\n      background: ").concat(T[n],";\n    }\n  ")}),D=_.ZP.div.withConfig({componentId:"sc-44a8a894-3"})(_templateObject3()),z=_.ZP.div.withConfig({componentId:"sc-44a8a894-4"})(_templateObject4(),d.wL()),F=_.ZP.div.withConfig({componentId:"sc-44a8a894-5"})(_templateObject5()),$=_.ZP.div.withConfig({componentId:"sc-44a8a894-6"})(_templateObject6(),d.Bj(),d.Bj(),d.KH())},50623:function(e,n,t){t.d(n,{C:function(){return TickHistoryTimeline},H:function(){return TicksTable}});var r,i,s=t(81862),o=t(87612),a=t(85333),l=t(6692),c=t(58467),u=t(73235),d=t(22970),p=t(52322);t(33521);var h=t(40794),m=t(60138),f=t(22139),x=t(63832),j=t(92364),g=t(82585),v=t(83302),b=t(81308),S=t(3842),y=t(91532),_=t(12084),k=t(99046),w=t(25195),O=t(54266),C=t(65511),R=t(42418),T=t(2784),E=t(35505),P=t(91230),N=t(49280),I=t(90437),A=t(32911),D=t(85888),z=t(19211),F=t(91195),$=t(56266),L=t(55237),q=t(47544),U=t(61935),B=t(71277),M=t(88846),V=t(65767),J=t(30301),H=t(22665),K=t(581),Z=t(56121);function _templateObject(){var e=(0,u._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,u._)(["\n  background: transparent;\n  border: 0;\n  cursor: pointer;\n  padding: 8px;\n  margin: -6px;\n  outline: none;\n\n  "," {\n    background-color: ",";\n    transition: background-color 100ms;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n\n  :focus "," {\n    background-color: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,u._)(["\n  th,\n  td {\n    vertical-align: middle !important;\n  }\n"]);return _templateObject2=function(){return e},e}C.kL.register(R.ZP);var Q=(r={},(0,o._)(r,U.izS.SUCCESS,!0),(0,o._)(r,U.izS.FAILURE,!0),(0,o._)(r,U.izS.STARTED,!0),(0,o._)(r,U.izS.SKIPPED,!0),r),W=(i={},(0,o._)(i,U.izS.SUCCESS,"Requested"),(0,o._)(i,U.izS.FAILURE,"Failed"),(0,o._)(i,U.izS.STARTED,"In progress"),(0,o._)(i,U.izS.SKIPPED,"Skipped"),i),TicksTable=function(e){var n,t=e.name,r=e.repoAddress,i=e.tabs,s=e.setTimerange,u=e.setParentStatuses,d=(0,c._)((0,B.q)({encode:function(e){var n={};return Object.keys(e).map(function(t){n[t.toLowerCase()]=String(e[t])}),n},decode:function(e){var n=(0,a._)({},Q);return Object.keys(Q).forEach(function(t){t.toLowerCase() in e&&(n[t]="false"!==e[t.toLowerCase()])}),n}}),2),h=d[0],m=d[1],b=(0,l._)((0,a._)({},(0,Z.$)(r)),{name:t}),S=T.useMemo(function(){return Object.keys(h).filter(function(e){return h[e]}).map(function(e){return e})},[h]),y=(0,V.l)({nextCursorForResult:function(e){var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[]},variables:{instigationSelector:b,statuses:S},query:Y,pageSize:25}),_=y.queryResult,k=y.paginationProps;(0,L.C4)(_,L.dT);var w=null==_?void 0:null===(n=_.data)||void 0===n?void 0:n.instigationStateOrError,O=T.useMemo(function(){return(null==w?void 0:w.__typename)==="InstigationState"?w.ticks:[]},[w]);T.useEffect(function(){if(k.hasPrevCursor){if(O&&O.length){var e,n,t=null===(e=O[O.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=O[0])||void 0===n?void 0:n.endTimestamp;t&&r&&(null==s||s([t,r]))}}else null==s||s(void 0)},[k.hasPrevCursor,O,s]),T.useEffect(function(){k.hasPrevCursor?null==u||u(Array.from(S)):null==u||u(void 0)},[k.hasPrevCursor,u,S]),T.useEffect(function(){!k.hasPrevCursor||O.length||_.loading||k.reset()},[O,_.loading,k.hasPrevCursor]);var C=(0,c._)(T.useState(),2),R=C[0],E=C[1],P=_.data;if(!P)return(0,p.jsx)(f.x,{padding:{vertical:48},children:(0,p.jsx)(x.$,{purpose:"page"})});if("PythonError"===P.instigationStateOrError.__typename)return(0,p.jsx)($.T9,{error:P.instigationStateOrError});if("InstigationStateNotFoundError"===P.instigationStateOrError.__typename)return(0,p.jsx)(f.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,p.jsx)(j.t,{icon:"no-results",title:"No ticks to display"})});var N=P.instigationStateOrError.instigationType;if(!O.length&&S.length===Object.keys(Q).length)return null;var StatusFilter=function(e){var n=e.status;return(0,p.jsx)(g.X,{label:W[n],checked:h[n],onChange:function(e){m((0,l._)((0,a._)({},h),(0,o._)({},n,e.target.checked)))}})};return(0,p.jsxs)(p.Fragment,{children:[R?(0,p.jsx)(H.l,{tick:R,instigationSelector:b,onClose:function(){return E(void 0)}}):null,(0,p.jsx)(f.x,{padding:{vertical:8,horizontal:24},children:(0,p.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[i,(0,p.jsxs)(f.x,{flex:{direction:"row",gap:16},children:[(0,p.jsx)(StatusFilter,{status:U.izS.STARTED}),(0,p.jsx)(StatusFilter,{status:U.izS.SUCCESS}),(0,p.jsx)(StatusFilter,{status:U.izS.FAILURE}),(0,p.jsx)(StatusFilter,{status:U.izS.SKIPPED})]})]})}),O.length?(0,p.jsxs)(X,{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,p.jsx)("th",{style:{width:90},children:"Status"}),(0,p.jsx)("th",{style:{width:90},children:"Duration"}),N===U._5b.SENSOR?(0,p.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,p.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,p.jsx)("tbody",{children:O.map(function(e,n){return(0,p.jsx)(TickRow,{tick:e,instigationSelector:b,index:n},e.id)})})]}):(0,p.jsx)(f.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,p.jsx)(j.t,{icon:"no-results",title:"No ticks to display"})}),O.length>0?(0,p.jsx)("div",{style:{marginTop:"16px"},children:(0,p.jsx)(v.pI,(0,a._)({},k))}):null]})},TickHistoryTimeline=function(e){var n=e.name,t=e.repoAddress,r=e.onHighlightRunIds,i=e.beforeTimestamp,s=e.afterTimestamp,o=e.statuses,u=(0,c._)((0,B.q)({encode:function(e){return{tickId:e}},decode:function(e){return e.tickId?Number(e.tickId):void 0}}),2),d=u[0],m=u[1],j=(0,c._)(T.useState(!1),2),g=j[0],v=j[1],S=(0,l._)((0,a._)({},(0,Z.$)(t)),{name:n}),y=(0,h.a)(Y,{variables:{instigationSelector:S,beforeTimestamp:i,afterTimestamp:s,statuses:o,limit:i?void 0:15},notifyOnNetworkStatusChange:!0});(0,L.C4)(y,1e3,!(g||i&&s));var _=y.data,k=y.error;if(!_||k)return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(f.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,p.jsx)(b.pm,{children:"Recent ticks"})}),(0,p.jsx)(f.x,{padding:{vertical:64},children:(0,p.jsx)(x.$,{purpose:"section"})})]});if("PythonError"===_.instigationStateOrError.__typename)return(0,p.jsx)($.T9,{error:_.instigationStateOrError});if("InstigationStateNotFoundError"===_.instigationStateOrError.__typename)return null;var w=_.instigationStateOrError.ticks,onTickClick=function(e){m(e?Number(e.tickId):void 0)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A.X,{isOpen:!!d,tickId:d,instigationSelector:S,onClose:function(){return onTickClick(void 0)}}),(0,p.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,p.jsx)(b.pm,{children:"Recent ticks"})}),(0,p.jsx)(f.x,{border:"top",children:(0,p.jsx)(I.p,{ticks:void 0===w?[]:w,onHoverTick:function(e){e||v(!1),(null==e?void 0:e.runIds)&&(r&&r(e.runIds),v(!0))},onSelectTick:onTickClick,exactRange:i&&s?[s,i]:void 0})})]})};function TickRow(e){var n=e.tick,t=e.instigationSelector,r=e.index,i=(0,q.m)(),o=(0,c._)(T.useState(!1),2),a=o[0],l=o[1],u=(0,c._)(T.useMemo(function(){var e=n.dynamicPartitionsRequestResults;return[(0,D.sw)(e,U.Dq2.ADD_PARTITIONS),(0,D.sw)(e,U.Dq2.DELETE_PARTITIONS)]},[null==n?void 0:n.dynamicPartitionsRequestResults]),2),h=u[0],m=u[1],x=(0,D.g6)(n,r);return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsx)(J.v,{timestamp:n.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,p.jsx)("td",{children:(0,p.jsx)(K.a,{tick:n,isStuckStarted:x})}),(0,p.jsx)("td",{children:x?"- ":(0,p.jsx)(M.Q,{startUnix:n.timestamp,endUnix:n.endTimestamp||Date.now()/1e3})}),n.instigationType===U._5b.SENSOR?(0,p.jsx)("td",{style:{width:120},children:n.cursor?(0,p.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,p.jsx)("div",{style:{fontFamily:S.b.monospace,fontSize:"16px"},children:(0,D.$G)(n.cursor||"")}),(0,p.jsx)(G,{onClick:(0,s._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return i(n.cursor||""),[4,(0,z.B7)({message:(0,p.jsx)("div",{children:"Copied value"}),intent:"success"})];case 1:return e.sent(),[2]}})}),children:(0,p.jsx)(y.JO,{name:"assignment"})})]}):(0,p.jsx)(p.Fragment,{children:"—"})}):null,(0,p.jsx)("td",{children:(0,p.jsxs)(f.x,{flex:{direction:"column",gap:6},children:[(0,p.jsxs)(f.x,{flex:{alignItems:"center",gap:8},children:[(0,p.jsx)(_.Z,{onClick:function(){l(!0)},children:1===n.runIds.length?"1 run requested":"".concat(n.runIds.length," runs requested")}),1===n.runs.length?n.runs.map(function(e){return(0,p.jsx)(T.Fragment,{children:(0,p.jsx)(N.RX,{run:e})},e.id)}):null]}),h||m?(0,p.jsxs)(b.YS,{children:["(",h?(0,p.jsxs)("span",{children:[h," partition",(0,k.I)(h,"","s")," created",m?",":""]}):null,m?(0,p.jsxs)("span",{children:[m," partition",(0,k.I)(m,"","s")," deleted,"]}):null,")"]}):null,(0,p.jsx)(A.X,{isOpen:a,tickId:Number(n.tickId),instigationSelector:t,onClose:function(){l(!1)}})]})})]})}var Y=(0,m.Ps)(_templateObject(),N.S9,F.B,P.dY,N.vw),G=E.ZP.button.withConfig({componentId:"sc-fc72dcb9-0"})(_templateObject1(),y.a1,w.md(),y.a1,w.$l(),y.a1,w.Es()),X=(0,E.ZP)(O.i).withConfig({componentId:"sc-fc72dcb9-1"})(_templateObject2())},30894:function(e,n,t){t.d(n,{i:function(){return filterPermissionedInstigationState}});var r=t(61935),filterPermissionedInstigationState=function(e){return e.hasStartPermission&&e.status===r.ynu.STOPPED||e.hasStopPermission&&e.status===r.ynu.RUNNING}},25729:function(e,n,t){t.d(n,{H:function(){return instigationStateSummary}});var r=t(61935),instigationStateSummary=function(e){var n=!1,t=!1,i=!0,s=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value.status;if(c===r.ynu.RUNNING?t=!0:c===r.ynu.STOPPED&&(n=!0),t&&n)break}}catch(e){s=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}return{anyOff:n,anyOn:t}}},56744:function(e,n,t){t.d(n,{s:function(){return useInstigationStateReducer}});var r=t(87612),i=t(85333),s=t(6692),o=t(2784),a={step:"initial",completion:{completed:0,errors:{}}},reducer=function(e,n){switch(n.type){case"reset":return a;case"start":return(0,s._)((0,i._)({},e),{step:"updating"});case"update-success":var t=e.completion;return{step:"updating",completion:(0,s._)((0,i._)({},t),{completed:t.completed+1})};case"update-error":var o=e.completion;return{step:"updating",completion:(0,s._)((0,i._)({},o),{completed:o.completed+1,errors:(0,s._)((0,i._)({},o.errors),(0,r._)({},n.name,n.error))})};case"complete":return(0,s._)((0,i._)({},e),{step:"completed"})}},useInstigationStateReducer=function(){return(0,o.useReducer)(reducer,a)}},85888:function(e,n,t){t.d(n,{$G:function(){return truncate},g6:function(){return isStuckStartedTick},sw:function(){return countPartitionsAddedOrDeleted}});var r=t(61935),truncate=function(e){return e.length>100?"".concat(e.slice(0,95),"…"):e};function isStuckStartedTick(e,n){return!e.endTimestamp&&(0!==n&&e.status===r.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function countPartitionsAddedOrDeleted(e,n){return e.reduce(function(e,t){if(t.type===n){var r;return e+((null===(r=t.partitionKeys)||void 0===r?void 0:r.length)||0)}return e},0)}},72855:function(e,n,t){t.d(n,{i:function(){return i}});var r=t(73235);function _templateObject(){var e=(0,r._)(["\n  fragment BasicInstigationStateFragment on InstigationState {\n    id\n    selectorId\n    status\n    hasStartPermission\n    hasStopPermission\n  }\n"]);return _templateObject=function(){return e},e}var i=(0,t(60138).Ps)(_templateObject())},68884:function(e,n,t){t.d(n,{y:function(){return r}});var r="overview-collapsed-state"},79321:function(e,n,t){t.d(n,{ac:function(){return PartitionPerAssetStatus},ux:function(){return PartitionPerOpStatus},Rc:function(){return getVisibleItemCount}});var r=t(85333),i=t(6692),s=t(2281),o=t(58467),a=t(73235),l=t(82550),c=t(52322),u=t(40794),d=t(60138),p=t(21106),h=t(10952),m=t(22139),f=t(9001),x=t(91532),j=t(25195),g=t(37783),v=t(44678),b=t(2784),S=t(35505),y=t(63832),_=t(92364),k=t(91195),w=t(64107),O=t(84495);function _templateObject(){var e=(0,a._)(["\n  query PartitionRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var PartitionRunList=function(e){var n=(0,u.a)(C,{variables:{filter:{pipelineName:e.pipelineName,tags:[{key:O.H.Partition,value:e.partitionName}]}}}),t=n.data;return n.loading||!t?(0,c.jsx)(y.$,{purpose:"section"}):"Runs"!==t.pipelineRunsOrError.__typename?(0,c.jsx)(_.t,{icon:"error",title:"Query Error",description:t.pipelineRunsOrError.message}):(0,c.jsx)("div",{children:(0,c.jsx)(w.AL,{runs:t.pipelineRunsOrError.results})})},C=(0,d.Ps)(_templateObject(),w.ZZ,k.B),R=t(6749),T=t(93325),E=t(35157),P=t(7872),N=t(54877),I=t(20306),A=t(18190),D=t(61935),z=t(38917),F=t(5035),$=t(56121);function PartitionStepStatus_templateObject(){var e=(0,a._)(["\n  width: 30px;\n  position: absolute;\n  border: 1px solid ",";\n  border-radius: 3px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: calc(50% - 15px);\n  bottom: calc(50% - 15px);\n  ","\n  background: ",";\n  z-index: 10;\n\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  display: flex;\n  &:hover {\n    background: ",";\n  }\n"]);return PartitionStepStatus_templateObject=function(){return e},e}function _templateObject1(){var e=(0,a._)(["\n  display: block;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,a._)(["\n  height: 1px;\n  width: 100%;\n  margin-top: 5px;\n  border-top: 1px solid ",";\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,a._)(["\n  query PartitionStepStatusPipelineQuery($pipelineSelector: PipelineSelector) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          ...PartitionMatrixSolidHandleFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return _templateObject3=function(){return e},e}var getVisibleItemCount=function(e){return Math.ceil(e/R.Bj)-3},timeboundsOfPartitions=function(e){var n=[Date.now()/1e3,1],t=n[0],r=n[1],i=!0,s=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value,u=!0,d=!1,p=void 0;try{for(var h,m=c.steps[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var f,x=h.value;0!==x.unix&&(t=(f=[Math.min(t,x.unix),Math.max(r,x.unix)])[0],r=f[1])}}catch(e){d=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}}}catch(e){s=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}return[t,r]},PartitionPerAssetStatus=function(e){var n=e.assetHealth,t=e.rangeDimension,o=e.rangeDimensionIdx,a=e.assetQueryItems,l=(0,s._)(e,["assetHealth","rangeDimension","rangeDimensionIdx","assetQueryItems"]),u={},d=!0,p=!1,h=void 0;try{for(var m,f=n[Symbol.iterator]();!(d=(m=f.next()).done);d=!0){var x,j=m.value;if((null===(x=j.dimensions[o])||void 0===x?void 0:x.name)===t.name){var g=j.rangesForSingleDimension(o);u[(0,E.Je)(j.assetKey)]=g}}}catch(e){p=!0,h=e}finally{try{d||null==f.return||f.return()}finally{if(p)throw h}}var v=(0,A.tc)({nodes:a,mode:I.hS.FLAT}).boxes.filter(function(e){return!!u[e.node.name]}),b={stepRows:v.map(function(e){return{x:e.x,name:e.node.name,totalFailurePercent:0,finalFailurePercent:0}}),partitions:[],partitionColumns:t.partitionKeys.map(function(e,n){return{idx:n,name:e,runsLoaded:!0,runs:[],steps:v.map(function(e){return{name:e.node.name,unix:0,color:assetPartitionStatusToSquareColor((0,N.h1)(u[e.node.name],n))}})}})};return(0,c.jsx)(PartitionStepStatus,(0,i._)((0,r._)({},l),{partitionNames:t.partitionKeys,data:b,showLatestRun:!1}))},assetPartitionStatusToSquareColor=function(e){return e.includes(P.yo.MATERIALIZED)&&e.includes(P.yo.MISSING)?"SUCCESS-MISSING":e.includes(P.yo.MATERIALIZED)?"SUCCESS":e.includes(P.yo.FAILED)&&e.includes(P.yo.MISSING)?"FAILURE-MISSING":e.includes(P.yo.FAILED)?"FAILURE":"MISSING"},PartitionPerOpStatus=function(e){var n,t=e.repoAddress,o=e.pipelineName,a=e.partitions,l=e.partitionNames,d=(0,s._)(e,["repoAddress","pipelineName","partitions","partitionNames"]),p=(0,$.$)(t),h=(0,i._)((0,r._)({},p),{pipelineName:o}),m=(0,u.a)(B,{variables:{pipelineSelector:h}}),f=(null===(n=m.data)||void 0===n?void 0:n.pipelineSnapshotOrError.__typename)==="PipelineSnapshot"&&m.data.pipelineSnapshotOrError.solidHandles,x=(0,T.J2)({partitionNames:l,partitions:a,stepQuery:"",solidHandles:f});return x?(0,c.jsx)(PartitionStepStatus,(0,i._)((0,r._)({},d),{showLatestRun:!0,pipelineName:o,partitionNames:l,data:x})):(0,c.jsx)("span",{})},PartitionStepStatus=function(e){var n=(0,p.S)(),t=n.viewport,s=n.containerProps,a=(0,o._)((0,b.useState)(null),2),l=a[0],u=a[1],d=(0,o._)((0,b.useState)(null),2),j=d[0],g=d[1],v=e.setPageSize,S=e.data;(0,b.useEffect)(function(){t.width&&v(getVisibleItemCount(t.width))},[t.width,v]);var y=S.stepRows,_=S.partitionColumns,sortPartitionSteps=function(e){var n={};return e.forEach(function(e){return n[e.name]=e}),y.map(function(e){return n[e.name]})},k=getVisibleItemCount(t.width),w=Math.max(0,_.length-e.offset-k),O=Math.max(k,_.length-e.offset),C=_.slice(w,O),T=(0,o._)(timeboundsOfPartitions(_),2),E=T[0],P=T[1],N=(0,R.G3)(_.map(function(e){return e.name}));return(0,c.jsxs)(q,{children:[(0,c.jsxs)(h.Vq,{isOpen:!!j,onClose:function(){return g(null)},style:{width:"90vw"},title:j?"".concat(j.partitionName," runs"):"",children:[(0,c.jsx)(m.x,{padding:{bottom:12},children:j&&(0,c.jsx)(PartitionRunList,{pipelineName:e.pipelineName,partitionName:j.partitionName})}),(0,c.jsx)(h.cN,{children:(0,c.jsx)(f.zx,{intent:"primary",autoFocus:!0,onClick:function(){return g(null)},children:"OK"})})]}),(0,c.jsxs)("div",{style:{position:"relative",display:"flex"},children:[(0,c.jsx)(R.NF,{floating:e.offset+k<e.partitionNames.length,children:(0,c.jsxs)(R.C4,{disabled:!0,style:{flex:1,flexShrink:1,overflow:"hidden"},children:[(0,c.jsx)(R.eh,{style:{height:N}}),e.showLatestRun&&(0,c.jsx)(R.p$,{style:{paddingLeft:24},children:"Last Run"}),(0,c.jsx)(U,{}),y.map(function(e){return(0,c.jsx)(R.p$,{style:{paddingLeft:8+e.x},"data-tooltip":e.name,hovered:e.name===(null==l?void 0:l.stepName),children:e.name},e.name)})]})}),e.offset+k<e.partitionNames.length?(0,c.jsx)(L,{$direction:"left",onClick:function(){return e.setOffset(Math.max(0,Math.min(e.offset+k-1,e.partitionNames.length-k)))},children:(0,c.jsx)(x.JO,{name:"chevron_left"})}):null,(0,c.jsx)("div",(0,i._)((0,r._)({style:{flex:1,overflow:"hidden",position:"relative"}},s),{children:(0,c.jsx)("div",{style:{width:_.length*R.Bj,position:"absolute",height:"100%",right:0,zIndex:1},children:C.map(function(n,t){return(0,c.jsxs)(R.C4,{style:{zIndex:C.length-t,width:R.Bj,position:"absolute",right:(k-t)*R.Bj+20},children:[(0,c.jsx)(R.kD,{$height:N,label:n.name}),e.showLatestRun&&(0,c.jsx)(R.p$,{style:{textAlign:"center"},children:(0,c.jsx)(PartitionSquare,{runs:n.runs,runsLoaded:n.runsLoaded,minUnix:E,maxUnix:P,hovered:l,setHovered:u,setFocused:g,partitionName:n.name},"".concat(n.name,":__full_status"))}),(0,c.jsx)(U,{}),sortPartitionSteps(n.steps).map(function(e){return(0,c.jsx)(PartitionSquare,{step:e,runs:n.runs,runsLoaded:n.runsLoaded,minUnix:E,maxUnix:P,hovered:l,setHovered:u,setFocused:g,partitionName:n.name},e.name)})]},n.name)})})})),e.offset>0?(0,c.jsx)(L,{$direction:"right",onClick:function(){return e.setOffset(Math.max(0,e.offset-k))},children:(0,c.jsx)(x.JO,{name:"chevron_right"})}):null]})]})},L=S.ZP.div.withConfig({componentId:"sc-19224631-0"})(PartitionStepStatus_templateObject(),j.wL(),function(e){return"left"===e.$direction?"left: 315px;":"right: 0;"},j.v8(),j.Z$()),q=S.ZP.div.withConfig({componentId:"sc-19224631-1"})(_templateObject1()),U=S.ZP.div.withConfig({componentId:"sc-19224631-2"})(_templateObject2(),j.wL()),B=(0,d.Ps)(_templateObject3(),T.Tg),M=JSON.stringify({top:20,left:10}),PartitionSquare=function(e){var n=e.step,t=e.runs,r=e.runsLoaded,i=e.hovered,s=e.setHovered,a=e.setFocused,u=e.partitionName,d=(0,o._)((0,b.useState)(!1),2),p=d[0],h=d[1];if(r){if(n)m=n.color.toLowerCase();else if(0===t.length)m="empty";else{var m,f,x=null===(f=(0,l._)(t).reverse().find(function(e){return e.status!==D.VOA.CANCELED}))||void 0===f?void 0:f.status;m=x?x.toLowerCase():"empty"}}else m="loading";var j=(0,c.jsx)("div",{className:"square ".concat(m),onMouseEnter:function(){return s({stepName:null==n?void 0:n.name,partitionName:u})},onMouseLeave:function(){return s(null)},"data-tooltip":r&&!n?1===t.length?"1 run":"".concat(t.length," runs"):void 0,"data-tooltip-style":M});return p||t.length&&(null==i?void 0:i.stepName)===(null==n?void 0:n.name)&&(null==i?void 0:i.partitionName)===u?(0,c.jsx)(g.J,{interactionKind:"click",placement:"bottom-start",onOpening:function(){return h(!0)},onClosed:function(){return h(!1)},content:(0,c.jsxs)(v.v2,{children:[(0,c.jsx)(F.U,{icon:"open_in_new",text:"Show logs from last run",to:(0,z.tA)(t[t.length-1],{stepKey:n?n.name:null})}),(0,c.jsx)(v.sN,{icon:"settings_backup_restore",text:"View runs (".concat(t.length,")"),onClick:function(){return a({stepName:null==n?void 0:n.name,partitionName:u})}})]}),children:j}):j}},6749:function(e,n,t){t.d(n,{AQ:function(){return m},Bj:function(){return l},C4:function(){return u},G3:function(){return topLabelHeightForLabels},NF:function(){return f},eh:function(){return p},kD:function(){return TopLabelTilted},p$:function(){return d}});var r=t(73235),i=t(82550),s=t(52322),o=t(25195),a=t(35505);function _templateObject(){var e=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  line-height: 0;\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  .cell {\n    height: ","px;\n    display: inline-block;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    font-size: 12px;\n    padding: 2px;\n    box-sizing: border-box;\n    line-height: initial;\n  }\n\n  .square {\n    width: 20px;\n    height: 20px;\n    margin: 6px;\n    display: inline-block;\n\n    &:hover:not(.empty):before {\n      box-shadow: "," 0 0 0 3px;\n    }\n    &:before {\n      content: ' ';\n      background: ",";\n      border-radius: 10px;\n      display: inline-block;\n      width: 20px;\n      height: 20px;\n    }\n    &.loading {\n      &:before {\n        background: radial-gradient(\n          "," 0%,\n          "," 45%,\n          "," 60%\n        );\n      }\n    }\n    &.success {\n      &:before {\n        background: ",";\n      }\n    }\n    &.failure {\n      &:before {\n        background: ",";\n      }\n    }\n    &.success-missing {\n      &:before {\n        background: ",";\n      }\n    }\n    &.failure-missing {\n      &:before {\n        background: ",";\n      }\n    }\n    &.failure-blank {\n      &:before {\n        background: ",";\n      }\n    }\n    &.skipped {\n      &:before {\n        background: ",";\n      }\n    }\n    &.started,\n    &.starting,\n    &.canceling {\n      &:before {\n        background: ",";\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  height: ","px;\n  line-height: ","px;\n  font-size: 13px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  position: relative;\n  background: ",";\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,r._)(["\n  position: relative;\n  height: 70px;\n  padding: 4px;\n  padding-bottom: 0;\n  min-width: 15px;\n  align-items: flex-end;\n  display: flex;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,r._)(["\n  position: relative;\n  height: unset; /* provide via style tag */\n  padding: 4px;\n  padding-bottom: 0;\n  min-width: 15px;\n  margin-bottom: ","px;\n  align-items: end;\n  display: flex;\n  line-height: normal;\n\n  & > div.tilted {\n    font-size: 12px;\n    white-space: nowrap;\n    position: absolute;\n    bottom: -20px;\n    left: 0;\n    padding: 2px;\n    padding-right: 4px;\n    padding-left: 0;\n    transform: rotate(-","deg);\n    transform-origin: top left;\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,r._)(["\n  display: flex;\n  border-right: 1px solid ",";\n  padding-bottom: 16px;\n  width: ","px;\n  z-index: 1;\n  ",";\n"]);return _templateObject4=function(){return e},e}var l=32,c={SUCCESS:o.fA(),SUCCESS_SKIPPED:o.Lv(),FAILURE:o.FY(),FAILURE_SKIPPED:o.MP(),SKIPPED:o.qr(),IN_PROGRESS:o.L$()},flatGradient=function(e){return"linear-gradient(to left, ".concat(e," 0%, ").concat(e," 100%)")},u=a.ZP.div.withConfig({componentId:"sc-4314cfb8-0"})(_templateObject(),function(e){var n=e.disabled,t=e.focused,r=e.multiselectFocused,i=e.hovered;return!n&&!t&&!r&&"&".concat(i?"":":hover"," {\n      background: ").concat(o.Z$(),";\n      cursor: default;\n      ").concat(h," {\n        background: ").concat(o.Z$(),";\n        .tilted {\n          background: ").concat(o.gJ(),";\n        }\n      }\n      .square {\n        filter: brightness(95%);\n      }\n    }")},function(e){return e.disabled&&"\n      ".concat(h," {\n        color: ").concat(o.$(),"\n      }\n    ")},function(e){return e.focused&&"background: ".concat(o.L$(),";\n    ").concat(d," {\n      color: ").concat(o.KH(),";\n    }\n    ").concat(h," {\n      background: ").concat(o.Bj(),";\n      color: ").concat(o.KH(),";\n      .tilted {\n        background: ").concat(o.L$(),";\n      }\n    }\n  }")},function(e){return e.multiselectFocused&&"background: ".concat(o.U9(),";\n    ").concat(d," {\n      color: ").concat(o.KH(),";\n    }\n    ").concat(h," {\n      background: ").concat(o.Bj(),";\n      color: ").concat(o.KH(),";\n      .tilted {\n        background: ").concat(o.U9(),";\n      }\n    }\n  }")},l,o.L$(),o.md(),o.wc(),o.wc(),o.Yj(),c.SUCCESS,c.FAILURE,c.SUCCESS_SKIPPED,c.FAILURE_SKIPPED,c.FAILURE_SKIPPED,c.SKIPPED,c.IN_PROGRESS),d=a.ZP.div.withConfig({componentId:"sc-4314cfb8-1"})(_templateObject1(),l,l,function(e){return[e.hovered?o.gJ():"transparent"].map(flatGradient).join(",")}),p=a.ZP.div.withConfig({componentId:"sc-4314cfb8-2"})(_templateObject2());function topLabelHeightForLabels(e){var n,t=(n=Math).max.apply(n,(0,i._)(e.map(function(e){return e.length})));return(t>10?4.9*t:55)+15}var TopLabelTilted=function(e){var n=e.label,t=e.$height;return(0,s.jsx)(h,{style:{height:t-15},children:(0,s.jsx)("div",{className:"tilted",children:n})})},h=a.ZP.div.withConfig({componentId:"sc-4314cfb8-3"})(_templateObject3(),15,41),m=330,f=a.ZP.div.withConfig({componentId:"sc-4314cfb8-4"})(_templateObject4(),o.im(),m,function(e){return e.floating?"box-shadow: 1px 0 4px rgba(0, 0, 0, 0.15)":""})},93325:function(e,n,t){t.d(n,{J2:function(){return useMatrixData},Tg:function(){return j},iv:function(){return x}});var r=t(85333),i=t(6692),s=t(73235),o=t(60138),a=t(37552),l=t(2784),c=t(82329),u=t(84692),d=t(18190),p=t(61935),h=t(42982),m=t(15848);function _templateObject(){var e=(0,s._)(["\n  fragment PartitionMatrixStepRunFragment on Run {\n    id\n    status\n    startTime\n    endTime\n    stepStats {\n      stepKey\n      startTime\n      endTime\n      status\n    }\n    tags {\n      key\n      value\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,s._)(["\n  fragment PartitionMatrixSolidHandleFragment on SolidHandle {\n    handleID\n    solid {\n      name\n      definition {\n        name\n      }\n      inputs {\n        dependsOn {\n          solid {\n            name\n          }\n        }\n      }\n      outputs {\n        dependedBy {\n          solid {\n            name\n          }\n        }\n      }\n    }\n    ...GraphExplorerSolidHandleFragment\n  }\n\n  ","\n"]);return _templateObject1=function(){return e},e}var f=new Set([p.SGm.IN_PROGRESS,p.SGm.SKIPPED]);function getStartTime(e){return e.startTime||0}function byStartTimeAsc(e,n){return getStartTime(e)-getStartTime(n)}function isStepKeyForNode(e,n){var t=RegExp(e+"\\[.*\\]");return n===e||n==="".concat(e,".compute")||n.match(t)}var useMatrixData=function(e){var n=(0,l.useRef)();if(!e.solidHandles)return null;if(n.current&&(0,a.shallowCompareKeys)(e,n.current.inputs))return n.current.result;var t=(0,h.i)(e.solidHandles).map(function(e){return e.solid}),s=(0,c.V)(t,e.stepQuery),o=function(e,n,t,s){var o={};t.forEach(function(e){e.runs.sort(byStartTimeAsc),o[e.name]=e});var a=n.map(function(n,t){var s=o[n]||{name:n,runsLoaded:!1,runs:[]},a=e.boxes.map(function(e){var n=e.node,t={name:n.name,color:"MISSING",unix:0};if(!s.runs.length)return t;var r=s.runs[s.runs.length-1],i=null===(a=r.stepStats.find(function(e){return isStepKeyForNode(n.name,e.stepKey)}))||void 0===a?void 0:a.status;if(s.runs.length>1&&(!i||f.has(i)))for(var o=s.runs.length-2;o>=0&&!l;){var a,l,c,u=null===(c=s.runs[o].stepStats.find(function(e){return isStepKeyForNode(n.name,e.stepKey)}))||void 0===c?void 0:c.status;if(u&&!f.has(u)){l=u;break}o--}if(!i&&!l)return t;var d=!i||f.has(i)?"".concat(l,"-MISSING"):i;return{name:n.name,unix:getStartTime(r),color:d}});return(0,i._)((0,r._)({},s),{steps:a,idx:t})}),l=a.filter(function(e){return e.runs.length>0}).length,c=e.boxes.map(function(e,n){var t=a.filter(function(e){return e.steps[n].color.includes("FAILURE")}),r=a.filter(function(e){return e.steps[n].color.endsWith("FAILURE")});return{x:e.x,name:e.node.name,totalFailurePercent:l?Math.round(t.length/l*100):0,finalFailurePercent:l?Math.round(r.length/l*100):0}});if(null==s?void 0:s.showFailuresAndGapsOnly){for(var _loop=function(e){0===c[e].finalFailurePercent&&(c.splice(e,1),a.forEach(function(n){return n.steps.splice(e,1)}))},u=c.length-1;u>=0;u--)_loop(u);for(var d=a.length-1;d>=0;d--)(0===a[d].runs.length||a[d].steps.every(function(e){return e.color.includes("SUCCESS")}))&&a.splice(d,1)}return{stepRows:c,partitions:t,partitionColumns:a}}((0,d.tc)({nodes:s.all,mode:u.hS.FLAT}),e.partitionNames,e.partitions,e.options);return n.current={result:o,inputs:e},o},x=(0,o.Ps)(_templateObject()),j=(0,o.Ps)(_templateObject1(),m.Q)},6871:function(e,n,t){t.d(n,{T:function(){return usePartitionStepQuery}});var r=t(81862),i=t(85333),s=t(6692),o=t(58467),a=t(73235),l=t(82550),c=t(82361),u=t(22970),d=t(56675),p=t(60138),h=t(2784),m=t(93325),f=t(91195),x=t(61935),j=t(84495);function _templateObject(){var e=(0,a._)(["\n  query PartitionStepLoaderQuery($filter: RunsFilter!, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, cursor: $cursor, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ...PartitionMatrixStepRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var g={runs:[],partitionNames:[],loading:!1,loadingCursorIdx:0};function usePartitionStepQuery(e){var n,t,a=e.partitionSetName,p=e.partitionTagName,m=e.partitionNames,f=e.pageSize,v=e.runsFilter,b=e.jobName,S=e.repositorySelector,y=e.offset,_=e.skipQuery,k=(0,d.x)(),w=(0,h.useRef)(0),O=(0,o._)((0,h.useState)(g),2),C=O[0],R=O[1],T=JSON.stringify((0,l._)(v.map(function(e){var n=(0,o._)(e.value.split("="),2);return{key:n[0],value:n[1]}})).concat([{key:j.H.RepositoryLabelTag,value:"".concat(S.repositoryName,"@").concat(S.repositoryLocationName)}]));return(0,h.useEffect)(function(){var e,n=w.current+1;w.current=n;var t=JSON.parse(T);R(function(e){return(0,s._)((0,i._)({},e),{runs:[],loading:!0})});var o=(e=(0,r._)(function(){var e,o,d,h,g,v;return(0,u.Jh)(this,function(S){switch(S.label){case 0:if(e=function(){var e,r,c;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return r=Math.max(o-h,0),[4,Promise.all(m.slice(r,o).map(function(e){var n={key:j.H.PartitionSet,value:a},r={key:p,value:e};return fetchRunsForFilter(k,{limit:1e3,filter:b?{pipelineName:b,tags:(0,l._)(t).concat([r])}:{tags:(0,l._)(t).concat([r,n])}})}))];case 1:if(c=u.sent(),w.current!==n)return[2,{v:void 0}];return o=r,R(function(n){return(0,s._)((0,i._)({},n),{runs:(e=(0,l._)(n.runs)).concat.apply(e,(0,l._)(c)),loading:o>0,loadingCursorIdx:o})}),[2]}})},w.current!==n)return[2];d=Math.max(0,(o=m.length-(y||0))-f),R(function(e){return(0,s._)((0,i._)({},e),{partitionNames:m,loadingCursorIdx:o})}),h=5,S.label=1;case 1:if(!(o>d))return[3,3];return[5,(0,u.XA)(e())];case 2:if(g=S.sent(),"object"===(0,c._)(g))return[2,g.v];return[3,1];case 3:return v=setInterval((0,r._)(function(){var e,r,o;return(0,u.Jh)(this,function(c){switch(c.label){case 0:if(w.current!==n)return[2,clearInterval(v)];return R(function(e){return(0,s._)((0,i._)({},e),{loading:!0})}),[4,fetchRunsForFilter(k,{limit:10,filter:{tags:(0,l._)(t).concat([{key:j.H.PartitionSet,value:a}])}})];case 1:return e=c.sent(),[4,fetchRunsForFilter(k,{filter:{statuses:[x.VOA.STARTED],tags:(0,l._)(t).concat([{key:j.H.PartitionSet,value:a}])}})];case 2:if(r=c.sent(),w.current!==n)return[2,clearInterval(v)];return o=(0,l._)(r).concat((0,l._)(e)).filter(function(e){return e.tags.find(function(e){return e.key===p&&m.includes(e.value)})}),R(function(e){var n=e.runs.filter(function(e){return!o.some(function(n){return n.id===e.id})}).concat(o);return(0,s._)((0,i._)({},e),{loading:!1,runs:n})}),[2]}})}),1e4),[2]}})}),function(){return e.apply(this,arguments)});return _||o(),function(){w.current+=1}},[f,k,a,p,T,b,y,m,_]),n=[],t={},C.partitionNames.forEach(function(e,r){t[e]={name:e,runsLoaded:r>=C.loadingCursorIdx,runs:[]},n.push(t[e])}),C.runs.forEach(function(e){var n,r;null===(r=t[(null===(n=e.tags.find(function(e){return e.key===p}))||void 0===n?void 0:n.value)||""])||void 0===r||r.runs.push(e)}),n}function fetchRunsForFilter(e,n){return _fetchRunsForFilter.apply(this,arguments)}function _fetchRunsForFilter(){return(_fetchRunsForFilter=(0,r._)(function(e,n){var t;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,e.query({fetchPolicy:"network-only",query:v,variables:n})];case 1:return[2,"Runs"===(t=r.sent()).data.pipelineRunsOrError.__typename&&t.data.pipelineRunsOrError.results||[]]}})})).apply(this,arguments)}var v=(0,p.Ps)(_templateObject(),m.iv,f.B)},56043:function(e,n,t){t.d(n,{r:function(){return ResourceRoot},$:function(){return succinctType}});var r=t(85333),i=t(6692),s=t(73235),o=t(52322),a=t(40794),l=t(60138),c=t(22139),u=t(25195),d=t(28888),p=t(17131),h=t(81308),m=t(57830),f=t(9676),x=t(59692),j=t(12084),g=t(10735),v=t(43180),b=t(54266),S=t(92364),y=t(91532),_=t(16861);t(2784);var k=t(7267),w=t(47933),O=t(56024),C=t(40049),R=t(38153),T={configuration:"Configuration",uses:"Uses"},ResourceTabs=function(e){var n=e.repoAddress,t=e.resourceName,r=e.numUses,i=(0,k.$B)(["/locations/:repoPath/resources/:name/:tab?"]),s=(null==i?void 0:i.params.tab)&&T[null==i?void 0:i.params.tab]||"Configuration";return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(O.mQ,{size:"large",selectedTabId:s,children:[(0,o.jsx)(C.f,{id:"Configuration",title:"Configuration",to:(0,R.$U)(n,"/resources/".concat(t))},"configuration"),(0,o.jsx)(C.f,{id:"Uses",title:(0,o.jsxs)(c.x,{flex:{gap:4,alignItems:"center"},children:["Uses",(0,o.jsx)(m.V,{intent:"none",minimal:!0,children:r})]}),to:(0,R.$U)(n,"/resources/".concat(t,"/uses"))},"uses")]})})},E=t(66904),P=t(91195),N=t(68028),I=t(28090),A=t(28252),D=t(63386),z=t(90894),F=t(44),$=t(56121);function _templateObject(){var e=(0,s._)(["\n  fragment ResourceDetailsFragment on ResourceDetails {\n    name\n    description\n    configFields {\n      name\n      description\n      configTypeKey\n      isRequired\n      defaultValueAsJson\n    }\n    configuredValues {\n      key\n      value\n      type\n    }\n    nestedResources {\n      name\n      type\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    parentResources {\n      name\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    assetKeysUsing {\n      path\n    }\n    schedulesUsing\n    sensorsUsing\n    jobsOpsUsing {\n      job {\n        id\n        name\n      }\n      opsUsing {\n        handleID\n        solid {\n          name\n        }\n      }\n    }\n    resourceType\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,s._)(["\n  query ResourceRootQuery($resourceSelector: ResourceSelector!) {\n    topLevelResourceDetailsOrError(resourceSelector: $resourceSelector) {\n      ...ResourceDetailsFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var succinctType=function(e){return(null==e?void 0:e.split(".").pop())||null},resourceDisplayName=function(e){return e?e.name.startsWith("_nested_")?succinctType(null==e?void 0:e.resourceType):e.name:null},SectionHeader=function(e){return(0,o.jsx)(c.x,{padding:{left:24,vertical:16},background:u.gJ(),border:"all",children:e.children})},ResourceRoot=function(e){(0,N.Px)();var n,t,s,l,b=e.repoAddress,S=(0,k.UO)().resourceName;(0,A.j)("Resource: ".concat(S));var y=(0,i._)((0,r._)({},(0,$.$)(b)),{resourceName:S}),_=(0,a.a)(q,{variables:{resourceSelector:y}}),w=(null===(n=_.data)||void 0===n?void 0:n.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"&&resourceDisplayName(null===(t=_.data)||void 0===t?void 0:t.topLevelResourceDetailsOrError)||S,O=(null===(s=_.data)||void 0===s?void 0:s.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"?_.data.topLevelResourceDetailsOrError.parentResources.length+_.data.topLevelResourceDetailsOrError.assetKeysUsing.length+_.data.topLevelResourceDetailsOrError.jobsOpsUsing.length+_.data.topLevelResourceDetailsOrError.schedulesUsing.length+_.data.topLevelResourceDetailsOrError.sensorsUsing.length:0,C=null===(l=(0,k.$B)(["/locations/:repoPath/resources/:name/:tab?"]))||void 0===l?void 0:l.params.tab;return(0,o.jsxs)(d.T,{style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(p.m,{title:(0,o.jsx)(h.X6,{children:w}),tags:(0,o.jsxs)(m.V,{icon:"resource",children:["Resource in ",(0,o.jsx)(D.b,{repoAddress:b})]}),tabs:(0,o.jsx)(ResourceTabs,{repoAddress:b,resourceName:S,numUses:O})}),(0,o.jsx)(z.g,{queryResult:_,allowStaleData:!0,children:function(e){var n=e.topLevelResourceDetailsOrError;if("ResourceDetails"!==n.__typename){var t=null;return"PythonError"===n.__typename&&(t=n.message),(0,o.jsx)(f.b,{intent:"warning",title:(0,o.jsxs)(x.Z,{direction:"row",spacing:4,children:[(0,o.jsx)("div",{children:"Could not load resource."}),t&&(0,o.jsx)(j.Z,{color:u.Es(),underline:"always",onClick:function(){(0,E._)({title:"Python error",body:t})},children:"View error"})]})})}var r=succinctType(n.resourceType);return(0,o.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,o.jsx)(g.O,{identifier:"resource-explorer",firstInitialPercent:50,firstMinSize:400,first:(0,o.jsx)(c.x,{padding:{bottom:48},style:{overflowY:"auto"},children:"uses"===C?(0,o.jsx)(ResourceUses,{resourceDetails:n,repoAddress:b,numUses:O}):(0,o.jsx)(ResourceConfig,{resourceDetails:n,repoAddress:b})}),second:(0,o.jsxs)(c.x,{padding:{bottom:48},style:{overflowY:"auto"},children:[(0,o.jsxs)(c.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,o.jsx)(h.X6,{children:w}),(0,o.jsx)(v.u,{content:n.resourceType||"",children:(0,o.jsx)(h.fv,{children:r})})]}),(0,o.jsx)(c.x,{border:"top-and-bottom",background:u.gJ(),padding:{vertical:8,horizontal:24},style:{fontSize:"12px",fontWeight:500},children:"Description"}),(0,o.jsx)(c.x,{padding:{horizontal:24,vertical:16},children:n.description?(0,o.jsx)(F.U,{children:n.description.split("\n").map(function(e){return e.replace(/^    /,"")}).join("\n")}):"None"})]})})})}})]})},ResourceConfig=function(e){var n=e.resourceDetails,t=e.repoAddress,r=Object.fromEntries(n.configuredValues.map(function(e){return[e.key,{value:e.value,type:e.type}]})),i=n.nestedResources;return(0,o.jsxs)(o.Fragment,{children:[i.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Resource dependencies"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Key"}),(0,o.jsx)("th",{style:{width:180},children:"Resource"})]})}),(0,o.jsx)("tbody",{children:i.map(function(e){var n="TOP_LEVEL"===e.type&&e.resource?(0,o.jsx)(ResourceEntry,{url:(0,R.$U)(t,"/resources/".concat(e.name)),name:resourceDisplayName(e.resource)||"",description:e.resource.description||void 0},e.name):(0,o.jsx)(ResourceEntry,{name:e.name},e.name);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.name})}),(0,o.jsx)("td",{colSpan:2,children:n})]},e.name)})})]})]}),(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Configuration"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Key"}),(0,o.jsx)("th",{style:{width:90},children:"Type"}),(0,o.jsx)("th",{style:{width:90},children:"Value"})]})}),(0,o.jsx)("tbody",{children:0===n.configFields.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:3,children:(0,o.jsx)(c.x,{padding:{vertical:8},children:(0,o.jsx)(S.t,{icon:"settings",title:"No configuration",description:"This resource has no configuration fields."})})})}):n.configFields.map(function(e){var n,t=e.defaultValueAsJson,i=r.hasOwnProperty(e.name)?r[e.name].type:null,s=r.hasOwnProperty(e.name)?r[e.name].value:t,a="VALUE"===i&&t===s;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"column",gap:4,alignItems:"flex-start"},children:[(0,o.jsx)("strong",{children:e.name}),(0,o.jsx)("div",{style:{fontSize:12,color:u.$()},children:e.description})]})}),(0,o.jsx)("td",{children:"StringSourceType"===(n=e.configTypeKey)?"String":"IntSourceType"===n?"Int":"BoolSourceType"===n?"Bool":n}),(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"row",gap:16},children:[(0,o.jsx)(v.u,{content:(0,o.jsxs)(o.Fragment,{children:["Default: ",t]}),canShow:!a&&!!t,children:"ENV_VAR"===i?(0,o.jsx)(m.V,{children:s}):s}),a&&(0,o.jsx)(m.V,{children:"Default"}),"ENV_VAR"===i&&(0,o.jsx)(m.V,{intent:"success",children:"Env var"})]})})]},e.name)})})]})]})]})},ResourceUses=function(e){var n=e.resourceDetails,t=e.repoAddress;if(0===e.numUses)return(0,o.jsx)(c.x,{padding:{vertical:16},children:(0,o.jsx)(S.t,{icon:"list",title:"No uses",description:"This resource is not used by any assets or resources."})});var r=n.parentResources;return(0,o.jsxs)(o.Fragment,{children:[r.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Parent resources"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Resource"})})}),(0,o.jsx)("tbody",{children:r.map(function(e){return e.resource&&(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsx)(ResourceEntry,{url:(0,R.$U)(t,"/resources/".concat(e.name)),name:resourceDisplayName(e.resource)||"",description:e.resource.description||void 0})})},e.name)})})]})]}),n.assetKeysUsing.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Assets"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Asset key"})})}),(0,o.jsx)("tbody",{children:n.assetKeysUsing.map(function(e){return(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsx)(I.R,{path:e.path,icon:"asset"},e.path.join("/"))})},e.path.join("/"))})})]})]}),n.jobsOpsUsing.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Jobs"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Job name"}),(0,o.jsx)("th",{children:"Ops"})]})}),(0,o.jsx)("tbody",{children:n.jobsOpsUsing.map(function(e){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,o.jsx)(y.JO,{name:"job",color:u.md()}),(0,o.jsx)(w.rU,{to:(0,R.$U)(t,"/jobs/".concat(e.job.name)),children:(0,o.jsx)(_.g,{text:e.job.name})})]})}),(0,o.jsx)("td",{children:(0,o.jsx)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:e.opsUsing.map(function(n){return(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,o.jsx)(y.JO,{name:"op",color:u.md()}),(0,o.jsx)(w.rU,{to:(0,R.$U)(t,"/jobs/".concat(e.job.name,"/").concat(n.handleID.split(".").join("/"))),children:(0,o.jsx)(_.g,{text:n.solid.name})})]},n.handleID)})})})]},e.job.name)})})]})]}),[{name:"Schedules",objects:n.schedulesUsing,icon:(0,o.jsx)(y.JO,{name:"schedule",color:u.md()})},{name:"Sensors",objects:n.sensorsUsing,icon:(0,o.jsx)(y.JO,{name:"sensors",color:u.md()})}].filter(function(e){return e.objects.length>0}).map(function(e){var n=e.name,r=e.objects,i=e.icon;return(0,o.jsxs)("div",{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:n})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Name"})})}),(0,o.jsx)("tbody",{children:r.map(function(e){return(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[i,(0,o.jsx)(w.rU,{to:(0,R.$U)(t,"/".concat(n.toLowerCase(),"/").concat(e)),children:(0,o.jsx)(_.g,{text:e})})]})})},n+":"+e)})})]})]},n)})]})},ResourceEntry=function(e){var n=e.url,t=e.name,r=e.description;return(0,o.jsxs)(c.x,{flex:{direction:"column"},children:[(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:4},style:{maxWidth:"100%"},children:[(0,o.jsx)(y.JO,{name:"resource",color:u.L$()}),(0,o.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:n?(0,o.jsx)(w.rU,{to:n,style:{overflow:"hidden"},children:(0,o.jsx)(_.g,{text:t})}):(0,o.jsx)(_.g,{text:t})})]}),(0,o.jsx)(h.aU,{children:r})]})},L=(0,l.Ps)(_templateObject()),q=(0,l.Ps)(_templateObject1(),L,P.B)},98319:function(e,n,t){t.d(n,{K:function(){return VirtualizedResourceRow},f:function(){return VirtualizedResourceHeader}});var r=t(73235),i=t(52322),s=t(22139),o=t(91532),a=t(25195),l=t(16861),c=t(81308),u=t(43180),d=t(47933),p=t(35505),h=t(56043),m=t(55658),f=t(38153);function _templateObject(){var e=(0,r._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return _templateObject=function(){return e},e}var x="1.5fr 1fr 1fr",VirtualizedResourceRow=function(e){var n=e.name,t=e.description,r=e.repoAddress,p=e.start,x=e.height,g=e.resourceType,v=e.parentResources,b=e.jobsOpsUsing,S=e.assetKeysUsing,y=e.schedulesUsing,_=e.sensorsUsing,k=(0,h.$)(g),w=v.length+b.length+S.length+y.length+_.length;return(0,i.jsx)(m.X2,{$height:x,$start:p,children:(0,i.jsxs)(j,{border:"bottom",children:[(0,i.jsx)(m.E5,{children:(0,i.jsxs)(s.x,{flex:{direction:"column",gap:4},children:[(0,i.jsxs)(s.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,i.jsx)(o.JO,{name:"resource",color:a.md()}),(0,i.jsx)("span",{style:{fontWeight:500},children:(0,i.jsx)(d.rU,{to:(0,f.$U)(r,"/resources/".concat(n)),children:(0,i.jsx)(l.g,{text:n})})})]}),(0,i.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,i.jsx)(c.YS,{style:{color:a.$(),whiteSpace:"nowrap"},children:t})})]})}),(0,i.jsx)(m.E5,{children:(0,i.jsx)(u.u,{content:g,children:(0,i.jsx)(c.fv,{children:k})})}),(0,i.jsx)(m.E5,{children:(0,i.jsx)(d.rU,{to:(0,f.$U)(r,"/resources/".concat(n,"/uses")),children:w})})]})})},VirtualizedResourceHeader=function(){return(0,i.jsxs)(s.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:x,height:"32px",fontSize:"12px",color:a.$()},children:[(0,i.jsx)(m.qN,{children:"Name"}),(0,i.jsx)(m.qN,{children:"Type"}),(0,i.jsx)(m.qN,{children:"Uses"})]})},j=(0,p.ZP)(s.x).withConfig({componentId:"sc-fe08721c-0"})(_templateObject(),x)},76588:function(e,n,t){t.d(n,{L:function(){return w},g:function(){return WorkspaceResourcesRoot}});var r=t(58467),i=t(73235),s=t(52322),o=t(40794),a=t(60138),l=t(22139),c=t(63832),u=t(25195),d=t(92364),p=t(34822),h=t(2784),m=t(85333),f=t(88510),x=t(98319),j=t(55658),VirtualizedResourceTable=function(e){var n=e.repoAddress,t=e.resources,r=(0,h.useRef)(null),i=(0,f.MG)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),o=i.getTotalSize(),a=i.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.f,{}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsx)(j.W2,{ref:r,children:(0,s.jsx)(j.Nh,{$totalHeight:o,children:a.map(function(e){var r=e.index,i=e.key,o=e.size,a=e.start,l=t[r];return(0,s.jsx)(x.K,(0,m._)({repoAddress:n,height:o,start:a},l),i)})})})})]})},g=t(91195),v=t(55237),b=t(68028),S=t(28252),y=t(20763),_=t(44254),k=t(56121);function _templateObject(){var e=(0,i._)(["\n  fragment ResourceEntryFragment on ResourceDetails {\n    name\n    description\n    resourceType\n    parentResources {\n      name\n    }\n    assetKeysUsing {\n      path\n    }\n    jobsOpsUsing {\n      job {\n        id\n      }\n    }\n    schedulesUsing\n    sensorsUsing\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  query WorkspaceResourcesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        allTopLevelResourceDetails {\n          id\n          ...ResourceEntryFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var WorkspaceResourcesRoot=function(e){var n=e.repoAddress;(0,b.Px)();var t=(0,_.Uz)(n);(0,S.j)("Resources: ".concat(t));var i=(0,r._)((0,h.useState)(""),2),a=i[0],m=i[1],f=(0,k.$)(n),x=(0,o.a)(O,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:f}}),j=x.data,g=x.loading,w=(0,v.C4)(x,v.dT),C=a.trim().toLocaleLowerCase(),R=C.length>0,T=(0,h.useMemo)(function(){return(null==j?void 0:j.repositoryOrError.__typename)==="Repository"?j.repositoryOrError.allTopLevelResourceDetails:[]},[j]),E=(0,h.useMemo)(function(){var e=C.toLocaleLowerCase();return T.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[T,C]);return(0,s.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(y.h,{repoAddress:n,tab:"resources",refreshState:w,queryData:x}),(0,s.jsx)(l.x,{padding:{horizontal:24,vertical:16},children:(0,s.jsx)(p.oi,{icon:"search",value:a,onChange:function(e){return m(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})}),g&&!j?(0,s.jsx)(l.x,{padding:64,children:(0,s.jsx)(c.$,{purpose:"page"})}):g&&!j?(0,s.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(c.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:u.$()},children:"Loading resources…"})]})}):E.length?(0,s.jsx)(VirtualizedResourceTable,{repoAddress:n,resources:E}):R?(0,s.jsx)(l.x,{padding:{top:20},children:(0,s.jsx)(d.t,{icon:"search",title:"No matching resources",description:(0,s.jsxs)("div",{children:["No resources matching ",(0,s.jsx)("strong",{children:a})," were found in ",t]})})}):(0,s.jsx)(l.x,{padding:{top:20},children:(0,s.jsx)(d.t,{icon:"search",title:"No resources",description:"No resources were found in ".concat(t)})})]})},w=(0,a.Ps)(_templateObject()),O=(0,a.Ps)(_templateObject1(),g.B,w)},51339:function(e,n,t){t.d(n,{L:function(){return RepoSectionHeader},l:function(){return u}});var r=t(73235),i=t(52322),s=t(22139),o=t(91532),a=t(25195);t(2784);var l=t(35505),c=t(37160);function _templateObject(){var e=(0,r._)(["\n  background-color: ",";\n  border: 0;\n  box-shadow:\n    inset 0px -1px 0 ",",\n    inset 0px 1px 0 ",";\n  color: ",";\n  cursor: pointer;\n  display: block;\n  padding: 0;\n  width: 100%;\n  margin: 0;\n  height: ","px;\n  text-align: left;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  :hover {\n    background-color: ",";\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  font-weight: 600;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,r._)(["\n  font-weight: 400;\n  color: ",";\n"]);return _templateObject2=function(){return e},e}var u=32,RepoSectionHeader=function(e){var n=e.expanded,t=e.onClick,r=e.repoName,l=e.repoLocation,u=e.showLocation,m=e.rightElement,f=r===c.Js;return(0,i.jsx)(d,{$open:n,onClick:t,children:(0,i.jsxs)(s.x,{flex:{alignItems:"center",justifyContent:"space-between"},padding:{horizontal:24},children:[(0,i.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,i.jsx)(o.JO,{name:"folder",color:a.md()}),(0,i.jsxs)("div",{children:[(0,i.jsx)(p,{children:f?l:r}),u&&!f?(0,i.jsx)(h,{children:"@".concat(l)}):null]})]}),(0,i.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[m,(0,i.jsx)(s.x,{margin:{top:2},children:(0,i.jsx)(o.JO,{name:"arrow_drop_down"})})]})]})})},d=l.ZP.button.withConfig({componentId:"sc-6c9e6894-0"})(_templateObject(),a.gJ(),a.wL(),a.wL(),a.$(),u,a._c(),o.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),p=l.ZP.span.withConfig({componentId:"sc-6c9e6894-1"})(_templateObject1()),h=l.ZP.span.withConfig({componentId:"sc-6c9e6894-2"})(_templateObject2(),a.Aw())},65435:function(e,n,t){t.d(n,{Y:function(){return RunStatusTagsWithCounts},q:function(){return RunTimeline}});var r=t(87612),i=t(85333),s=t(6692),o=t(58467),a=t(73235),l=t(82550),c=t(52322),u=t(21106),d=t(22139),p=t(43180),h=t(57830),m=t(25195),f=t(3842),x=t(91532),j=t(16861),g=t(37783),v=t(63832),b=t(81308),S=t(88510),y=t(2784),_=t(47933),k=t(35505),w=t(51339),O=t(21485),C=t(6315),R=t(88846),T=t(16413),statusToColor=function(e){switch(e){case"queued":case"scheduled":return m.A8();case"inProgress":return m.L$();case"failed":return m.FY();case"succeeded":return m.fA()}},mergeStatusToBackground=function(e){var n={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach(function(e){var t=e.status;"SCHEDULED"===t?n.scheduled++:C.sy.has(t)?n.queued++:C.Ys.has(t)?n.inProgress++:C.hd.has(t)?n.failed++:C._m.has(t)&&n.succeeded++});var t=Object.keys(n).filter(function(e){return n[e]>0});if(1===t.length)return statusToColor((0,o._)(t,1)[0]);for(var r=e.length,i=[n.failed>0?{status:"failed",pct:100*n.failed/r}:null,n.succeeded>0?{status:"succeeded",pct:100*n.succeeded/r}:null,n.inProgress>0?{status:"inProgress",pct:100*n.inProgress/r}:null,n.queued>0?{status:"queued",pct:100*n.queued/r}:null,n.scheduled>0?{status:"scheduled",pct:100*n.scheduled/r}:null].filter(Boolean),s="",a=0,l=0,c=0;c<i.length;c++){var u=i[c];if(u){var d=u.status,p=u.pct;l=a,a+=p;var h=statusToColor(d);0===c?s+="".concat(h," ").concat(p.toFixed(1),"%, "):c===i.length-1?s+="".concat(h," ").concat(l.toFixed(1),"%"):s+="".concat(h," ").concat(l.toFixed(1),"% ").concat(a.toFixed(1),"%, ")}}return"linear-gradient(to right, ".concat(s,")")},E=t(68884),P=t(30301),N=t(16148),I=t(55658),A=t(77277),D=t(59686),z=t(94392),useFormatDateTime=function(){var e=(0,y.useContext)(D.JB),n=(0,o._)(e.timezone,1)[0],t=(0,o._)(e.hourCycle,1)[0],r="Automatic"===n?(0,z.cw)():n,s="Automatic"===t?void 0:t;return(0,y.useCallback)(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:navigator.language;return Intl.DateTimeFormat(t,(0,i._)({timeZone:r,hourCycle:s},n)).format(e)},[r,s])},F=t(42885),$=t(86839),L=t(44254),q=t(31197);function _templateObject(){var e=(0,a._)(["\n  white-space: nowrap;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,a._)(["\n  position: absolute;\n  top: 0;\n  left: ","px;\n  right: 0;\n  font-family: ",";\n  color: ",";\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,a._)(["\n  display: flex;\n  align-items: center;\n  box-shadow:\n    inset 1px 0 0 ",",\n    inset 0 1px 0 ",",\n    inset -1px 0 0 ",";\n  height: ","px;\n  position: relative;\n  user-select: none;\n  font-size: 12px;\n  width: 100%;\n  overflow: hidden;\n\n  :first-child {\n    box-shadow:\n      inset 1px 0 0 ",",\n      inset -1px 0 0 ",";\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,a._)(["\n  position: absolute;\n  padding: 8px 0;\n  white-space: nowrap;\n\n  :not(:first-child) {\n    box-shadow: inset 1px 0 0 ",";\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,a._)(["\n  position: absolute;\n  padding: 8px;\n  box-shadow: inset 1px 0 0 ",";\n  white-space: nowrap;\n"]);return _templateObject4=function(){return e},e}function _templateObject5(){var e=(0,a._)(["\n  height: 100%;\n  position: relative;\n  width: 100%;\n  box-shadow:\n    inset 1px 0 0 ",",\n    inset -1px 0 0 ",";\n"]);return _templateObject5=function(){return e},e}function _templateObject6(){var e=(0,a._)(["\n  background-color: ",";\n  height: 100%;\n  position: absolute;\n  top: 0;\n  width: 1px;\n"]);return _templateObject6=function(){return e},e}function _templateObject7(){var e=(0,a._)(["\n  background-color: ",";\n  border-radius: 1px;\n  color: ",";\n  cursor: default;\n  font-size: 12px;\n  line-height: 12px;\n  margin-left: -12px;\n  padding: 1px 4px;\n  position: absolute;\n  top: -14px;\n  user-select: none;\n"]);return _templateObject7=function(){return e},e}function _templateObject8(){var e=(0,a._)(["\n  align-items: center;\n  box-shadow: inset 0 -1px 0 ",";\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  padding: 1px 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  overflow: hidden;\n  transition: background-color 100ms linear;\n\n  :hover {\n    background-color: ",";\n  }\n"]);return _templateObject8=function(){return e},e}function _templateObject9(){var e=(0,a._)(["\n  align-items: center;\n  display: flex;\n  font-size: 13px;\n  justify-content: flex-start;\n  gap: 8px;\n  line-height: 16px;\n  overflow: hidden;\n  padding: 0 12px 0 24px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: ","px;\n"]);return _templateObject9=function(){return e},e}function _templateObject10(){var e=(0,a._)(["\n  flex: 1;\n  position: relative;\n  height: ","px;\n"]);return _templateObject10=function(){return e},e}function _templateObject11(){var e=(0,a._)(["\n  align-items: center;\n  background: ",";\n  border-radius: 1px;\n  height: ","px;\n  position: absolute;\n  top: 4px;\n  ",";\n\n  transition:\n    background 200ms linear,\n    opacity 200ms linear,\n    width 200ms ease-in-out;\n\n  :hover {\n    opacity: 0.7;\n  }\n  .chunk-popover-target {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n"]);return _templateObject11=function(){return e},e}function _templateObject12(){var e=(0,a._)(["\n  color: ",";\n  cursor: default;\n  font-family: ",";\n  font-size: 14px;\n  font-weight: 600;\n  user-select: none;\n"]);return _templateObject12=function(){return e},e}function _templateObject13(){var e=(0,a._)(["\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n"]);return _templateObject13=function(){return e},e}var RunTimeline=function(e){var n=e.loading,t=e.jobs,a=e.range,p=y.useRef(null),h=(0,u.S)(),m=h.viewport.width,f=h.containerProps.ref,x=Date.now(),j=(0,o._)(a,2),g=(j[0],j[1]),v=t.reduce(function(e,n){var t=n.repoAddress,o=(0,L.Qj)(t),a=e[o]||[];return(0,s._)((0,i._)({},e),(0,r._)({},o,(0,l._)(a).concat([n])))},{}),b=Object.keys(v),_=(0,F.N)(E.y,b),k=_.expandedKeys,O=_.onToggle,C=_.onToggleAll,R=y.useMemo(function(){var e=[];return Object.entries(v).forEach(function(n){var t=(0,o._)(n,2),r=t[0],i=t[1],s=(0,q.g)(r);s&&(e.push({type:"header",repoAddress:s,jobCount:i.length}),k.includes(r)&&i.forEach(function(n){e.push({type:"job",repoAddress:s,job:n})}))}),e},[v,k]),T=(0,S.MG)({count:R.length,getScrollElement:function(){return p.current},estimateSize:function(e){return 32},overscan:40}),P=T.getTotalSize(),N=T.getVirtualItems();if(!m)return(0,c.jsx)("div",{style:{height:174},ref:f});var D=Object.keys(v).sort(function(e,n){return e.localeCompare(n)}),z=D.filter(function(e){return k.includes(e)}).reduce(function(e,n){return e+v[n].length},0),$=D.length*w.l+32*z,U=(0,A.w)(D.map(function(e){var n;return(null===(n=(0,q.g)(e))||void 0===n?void 0:n.name)||""})),B=D.length>0;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{ref:f}),(0,c.jsx)(d.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",flex:"0 0 ".concat(64,"px")},border:"top-and-bottom",children:"Jobs"}),(0,c.jsx)("div",{style:{position:"relative"},children:(0,c.jsx)(TimeDividers,{interval:36e5,range:a,height:B?$:0})}),D.length?(0,c.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:(0,c.jsx)(I.W2,{ref:p,children:(0,c.jsx)(I.Nh,{$totalHeight:P,children:N.map(function(e){var n=e.index,t=e.key,r=e.size,i=e.start,s=R[n];if("header"===s.type){var o=(0,L.Qj)(s.repoAddress),l=s.repoAddress.name;return(0,c.jsx)(TimelineHeaderRow,{expanded:k.includes(o),height:r,top:i,repoAddress:s.repoAddress,isDuplicateRepoName:!!(l&&U.has(l)),jobs:v[o],onToggle:O,onToggleAll:C},o)}return(0,c.jsx)(RunTimelineRow,{job:s.job,height:r,top:i,range:a,width:m},t)})})})}):(0,c.jsx)(RunsEmptyOrLoading,{loading:void 0!==n&&n,includesTicks:x<=g})]})},TimelineHeaderRow=function(e){var n=e.expanded,t=e.onToggle,r=e.onToggleAll,i=e.repoAddress,s=e.isDuplicateRepoName,o=e.jobs,a=e.height,l=e.top;return(0,c.jsx)($.vG,{expanded:n,height:a,start:l,repoAddress:i,showLocation:s,onToggle:t,onToggleAll:r,rightElement:(0,c.jsx)(U,{jobs:o})})},U=y.memo(function(e){var n=e.jobs,t=y.useMemo(function(){var e=0,t=0,r=0;return n.forEach(function(n){n.runs.forEach(function(n){var i=n.status;"SCHEDULED"!==i&&(C.Ys.has(i)?e++:C.hd.has(i)?t++:C._m.has(i)&&r++)})}),{inProgressCount:e,failedCount:t,succeededCount:r}},[n]);return(0,c.jsx)(RunStatusTagsWithCounts,(0,i._)({},t))}),RunStatusTagsWithCounts=function(e){var n=e.inProgressCount,t=e.succeededCount,r=e.failedCount;return(0,c.jsxs)(d.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[n>0?(0,c.jsx)(p.u,{content:(0,c.jsx)(B,{children:1===n?"1 run in progress":"".concat(n," runs in progress")}),placement:"top",children:(0,c.jsx)(h.V,{intent:"primary",children:n})}):null,t>0?(0,c.jsx)(p.u,{content:(0,c.jsx)(B,{children:1===t?"1 run succeeded":"".concat(t," runs succeeded")}),placement:"top",children:(0,c.jsx)(h.V,{intent:"success",children:t})}):null,r>0?(0,c.jsx)(p.u,{content:(0,c.jsx)(B,{children:1===r?"1 run failed":"".concat(r," runs failed")}),placement:"top",children:(0,c.jsx)(h.V,{intent:"danger",children:r})}):null]})},B=k.ZP.span.withConfig({componentId:"sc-d8c97ac-0"})(_templateObject()),M={month:"numeric",day:"numeric",year:"numeric"},V={month:"short",day:"numeric",year:"numeric",timeZoneName:"short"},J={hour:"numeric"},TimeDividers=function(e){var n=e.interval,t=e.range,r=e.height,i=(0,o._)(t,2),s=i[0],a=i[1],u=useFormatDateTime(),p=y.useMemo(function(){for(var e=a-s,n=u(new Date(s),V,"en-US"),t=[],r=new Date(n);r.valueOf()<a;){var i=r.getTime(),o=new Date(i).setDate(r.getDate()+1);r=new Date(o),t.push({dayStart:i,dayEnd:o})}return t.map(function(n){var t=n.dayStart,r=n.dayEnd,i=new Date(t),o=t-s,a=r-t,l=Math.max(0,o/e*100);return{label:u(i,M),key:i.toString(),left:l,width:Math.min(100,(o+a)/e*100)-l}})},[a,u,s]),h=y.useMemo(function(){var e=a-s,t=s%n,r=s-t,i=Math.ceil(e/n)+1;return(0,l._)(Array(i)).map(function(t,i){var o=r+i*n,a=new Date(o);return{label:u(a,J).replace(" ",""),key:a.toString(),left:(o-s)/e*100}}).filter(function(e){return e.left>0})},[a,s,n,u]),f=Date.now(),x="".concat(((f-s)/(a-s)*100).toPrecision(3),"%");return(0,c.jsxs)(H,{style:{height:"".concat(r,"px"),top:"-".concat(64,"px")},children:[(0,c.jsx)(K,{children:p.map(function(e){return(0,c.jsx)(Z,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,c.jsx)(d.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key)})}),(0,c.jsx)(K,{children:h.map(function(e){return(0,c.jsx)(Q,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)})}),(0,c.jsxs)(W,{children:[(0,c.jsx)(Y,{style:{left:0,backgroundColor:m.wL()}}),h.map(function(e){return(0,c.jsx)(Y,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)}),f>=s&&f<=a?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(G,{style:{left:x},children:"Now"}),(0,c.jsx)(Y,{style:{left:x,backgroundColor:m.Bj(),zIndex:1}})]}):null]})]})},H=k.ZP.div.withConfig({componentId:"sc-d8c97ac-1"})(_templateObject1(),320,f.b.monospace,m.Aw()),K=k.ZP.div.withConfig({componentId:"sc-d8c97ac-2"})(_templateObject2(),m.wL(),m.wL(),m.wL(),32,m.wL(),m.wL()),Z=k.ZP.div.withConfig({componentId:"sc-d8c97ac-3"})(_templateObject3(),m.wL()),Q=k.ZP.div.withConfig({componentId:"sc-d8c97ac-4"})(_templateObject4(),m.wL()),W=k.ZP.div.withConfig({componentId:"sc-d8c97ac-5"})(_templateObject5(),m.wL(),m.wL()),Y=k.ZP.div.withConfig({componentId:"sc-d8c97ac-6"})(_templateObject6(),m.wL()),G=k.ZP.div.withConfig({componentId:"sc-d8c97ac-7"})(_templateObject7(),m.Bj(),m.KH()),RunTimelineRow=function(e){var n=e.job,t=e.top,r=e.height,i=e.range,s=e.width,a=(0,o._)(i,2),l=a[0],u=a[1],p=s-320,h=n.runs,f=y.useMemo(function(){return(0,T.i)({runs:h,start:l,end:u,width:p,minChunkWidth:4,minMultipleWidth:12})},[h,l,u,p]);return n.runs.length?(0,c.jsxs)(X,{$height:r,$start:t,children:[(0,c.jsxs)(ee,{children:[(0,c.jsx)(x.JO,{name:"asset"===n.jobType?"asset":"job"}),(0,c.jsx)("div",{style:{width:268},children:"asset"===n.jobType?(0,c.jsx)("span",{style:{color:m.Ep()},children:(0,c.jsx)(j.g,{text:n.jobName})}):(0,c.jsx)(_.rU,{to:n.path,children:(0,c.jsx)(j.g,{text:n.jobName})})})]}),(0,c.jsx)(en,{children:f.map(function(e){var t=e.left,r=e.width,i=e.runs.length;return(0,c.jsx)(et,{$background:mergeStatusToBackground(e.runs),$multiple:i>1,style:{left:"".concat(t,"px"),width:"".concat(r,"px")},children:(0,c.jsx)(g.J,{content:(0,c.jsx)(RunHoverContent,{job:n,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,c.jsx)(d.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:i>1?(0,c.jsx)(er,{children:e.runs.length}):null})})},e.runs[0].id)})})]}):null},RunsEmptyOrLoading=function(e){var n=e.loading,t=e.includesTicks;return(0,c.jsx)(d.x,{background:m.v8(),padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:"top-and-bottom",children:n?(0,c.jsxs)(d.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,c.jsx)(v.$,{purpose:"body-text"}),t?"Loading runs and scheduled ticks":"Loading runs"]}):(0,c.jsxs)(d.x,{flex:{direction:"column",gap:12,alignItems:"center"},children:[(0,c.jsx)("div",{children:t?"No runs or scheduled ticks in this time period.":"No runs in this time period."}),(0,c.jsxs)(d.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,c.jsx)(N.A,{icon:(0,c.jsx)(x.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,c.jsx)("span",{children:"or"}),(0,c.jsx)(N.A,{icon:(0,c.jsx)(x.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})},X=k.ZP.div.attrs(function(e){var n=e.$height,t=e.$start;return{style:{height:"".concat(n,"px"),transform:"translateY(".concat(t,"px)")}}}).withConfig({componentId:"sc-d8c97ac-8"})(_templateObject8(),m.wL(),m.Z$()),ee=k.ZP.div.withConfig({componentId:"sc-d8c97ac-9"})(_templateObject9(),320),en=k.ZP.div.withConfig({componentId:"sc-d8c97ac-10"})(_templateObject10(),32),et=k.ZP.div.withConfig({componentId:"sc-d8c97ac-11"})(_templateObject11(),function(e){return e.$background},24,function(e){return e.$multiple?"min-width: ".concat(12,"px"):null}),er=k.ZP.div.withConfig({componentId:"sc-d8c97ac-12"})(_templateObject12(),m.KH(),f.b.monospace),RunHoverContent=function(e){var n=e.job,t=e.batch,r=t.runs.slice(0,50),i=t.runs.length-r.length;return(0,c.jsxs)(d.x,{style:{width:"260px"},children:[(0,c.jsx)(d.x,{padding:12,border:"bottom",children:(0,c.jsx)(ei,{children:n.jobName})}),(0,c.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:r.map(function(e,n){return(0,c.jsxs)(d.x,{border:n>0?"top":null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,c.jsxs)(d.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,c.jsx)(O.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,c.jsx)(_.rU,{to:"/runs/".concat(e.id),children:(0,c.jsx)(b.fv,{children:e.id.slice(0,8)})})]}),(0,c.jsx)(b.fv,{children:"SCHEDULED"===e.status?(0,c.jsx)(P.v,{timestamp:e.startTime/1e3}):(0,c.jsx)(R.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)})}),i>0?(0,c.jsx)(d.x,{padding:12,border:"top",children:(0,c.jsxs)(_.rU,{to:"".concat(n.path,"/runs"),children:["+ ",i," more"]})}):null]})},ei=k.ZP.strong.withConfig({componentId:"sc-d8c97ac-13"})(_templateObject13())},16413:function(e,n,t){t.d(n,{a:function(){return overlap},i:function(){return batchRunsForTimeline}});var r=t(82550),overlap=function(e,n){return!(e.end<n.start||n.end<e.start)},batchRunsForTimeline=function(e){for(var n=e.runs,t=e.start,i=e.end,s=e.width,o=e.minChunkWidth,a=e.minMultipleWidth,l=i-t,c=(Date.now()-t)/(i-t)*s,u=n.map(function(e){var n=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:r,left:Math.max(0,Math.floor((n-t)/l*s)),width:Math.max(o,Math.min(Math.ceil((r-n)/l*s),Math.ceil((r-t)/l*s)))}}).sort(function(e,n){return n.left-e.left}),d=[];u.length;){var p=u.shift(),h=u[0];if(p){if(h&&canBatch(p,h,a,c)){u.shift(),p.runs=(0,r._)(p.runs).concat((0,r._)(h.runs)),p.startTime=Math.min(p.startTime,h.startTime),p.endTime=Math.max(p.endTime,h.endTime);var m=Math.max(p.left+a,p.left+p.width,h.left+h.width),f=Math.min(p.left,h.left);p.width=m-f,p.left=f,u.unshift(p)}else d.push(p)}}return d},canBatch=function(e,n,t,r){var i=e.left,s=e.left+Math.max(e.width,t),o=n.left,a=n.left+Math.max(n.width,t),l=Math.min(e.left,n.left),c=Math.max(e.left+Math.max(e.width,t),n.left+Math.max(n.width,t));return overlap({start:i,end:s},{start:o,end:a})&&(l>r||c<r)}},24808:function(e,n,t){t.d(n,{_:function(){return ScheduleBulkActionMenu}});var r=t(58467),i=t(52322),s=t(37783),o=t(44678),a=t(9001),l=t(91532),c=t(2784),u=t(81862),d=t(22970),p=t(33379),h=t(38058),m=t(59692),f=t(25195),x=t(10952),j=t(55055),g=t(56744),v=t(66213),ScheduleStateChangeDialog=function(e){var n,t,s,o=e.openWithIntent,b=e.onClose,S=e.onComplete,y=e.schedules,_=y.length,k=(0,r._)((0,g.s)(),2),w=k[0],O=k[1];(0,c.useEffect)(function(){"not-open"===o&&O({type:"reset"})},[o,O]);var C=(0,r._)((0,p.D)(j.Wz),1)[0],R=(0,r._)((0,p.D)(j.d0),1)[0],T=(n=(0,u._)(function(e){var n,t,r;return(0,d.Jh)(this,function(i){switch(i.label){case 0:return n=e.repoAddress,t=e.scheduleName,[4,C({variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}})];case 1:switch(null==(r=i.sent().data)?void 0:r.startSchedule.__typename){case"ScheduleStateResult":O({type:"update-success"});break;case"UnauthorizedError":case"PythonError":O({type:"update-error",name:t,error:r.startSchedule.message})}return[2]}})}),function(e){return n.apply(this,arguments)}),E=(t=(0,u._)(function(e){var n,t,r;return(0,d.Jh)(this,function(i){switch(i.label){case 0:return n=e.scheduleName,[4,R({variables:{scheduleOriginId:(t=e.scheduleState).id,scheduleSelectorId:t.selectorId}})];case 1:switch(null==(r=i.sent().data)?void 0:r.stopRunningSchedule.__typename){case"ScheduleStateResult":O({type:"update-success"});break;case"UnauthorizedError":case"PythonError":O({type:"update-error",name:n,error:r.stopRunningSchedule.message})}return[2]}})}),function(e){return t.apply(this,arguments)}),P=(s=(0,u._)(function(){var e,n,t,r,i,s,a;return(0,d.Jh)(this,function(l){switch(l.label){case 0:if("not-open"===o)return[2];O({type:"start"}),e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,8,9,10]),r=y[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,7];if(s=i.value,"start"!==o)return[3,4];return[4,T(s)];case 3:return l.sent(),[3,6];case 4:return[4,E(s)];case 5:l.sent(),l.label=6;case 6:return e=!0,[3,2];case 7:return[3,10];case 8:return a=l.sent(),n=!0,t=a,[3,10];case 9:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 10:return O({type:"complete"}),S(),[2]}})}),function(){return s.apply(this,arguments)}),N="updating"!==w.step;return(0,i.jsxs)(x.Vq,{isOpen:"not-open"!==o,title:"start"===o?"Start schedules":"Stop schedules",canEscapeKeyClose:N,canOutsideClickClose:N,onClose:b,children:[(0,i.jsx)(x.a7,{children:(0,i.jsxs)(m.Z,{direction:"column",spacing:24,children:[function(){if("not-open"===o)return null;switch(w.step){case"initial":if("stop"===o)return(0,i.jsx)("div",{children:"".concat(_," ").concat(1===_?"schedule":"schedules"," will be stopped. Do you want to continue?")});return(0,i.jsx)("div",{children:"".concat(_," ").concat(1===_?"schedule":"schedules"," will be started. Do you want to continue?")});case"updating":case"completed":var e=_>0?w.completion.completed/_:1;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsx)(h.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===w.step?(0,i.jsx)(v.c,{message:"Schedules are being updated, please do not navigate away yet."}):null]});default:return null}}(),function(){if("not-open"===o||"initial"===w.step)return null;if("updating"===w.step)return(0,i.jsx)("div",{children:"Please do not close the window or navigate away while schedules are being updated."});var e=w.completion.errors,n=Object.keys(e).length,t=w.completion.completed-n;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[t?(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"check_circle",color:f.fA()}),(0,i.jsx)("div",{children:"start"===o?"Successfully started ".concat(1===t?"1 schedule":"".concat(t," schedules"),"."):"Successfully stopped ".concat(1===t?"1 schedule":"".concat(t," schedules"),".")})]}):null,n?(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"warning",color:f.qr()}),(0,i.jsx)("div",{children:"start"===o?"Could not start ".concat(1===n?"1 schedule":"".concat(n," schedules"),"."):"Could not stop ".concat(1===n?"1 schedule":"".concat(n," schedules"),".")})]}),(0,i.jsx)("ul",{children:Object.keys(e).map(function(n){return(0,i.jsx)("li",{children:(0,i.jsxs)(m.Z,{direction:"row",spacing:8,children:[(0,i.jsxs)("strong",{children:[n,":"]}),e[n]?(0,i.jsx)("div",{children:e[n]}):null]})},n)})})]}):null]})}()]})}),(0,i.jsx)(x.cN,{children:function(){if("not-open"===o)return null;switch(w.step){case"initial":var e="start"===o?"Start ".concat(1===_?"1 schedule":"".concat(_," schedules")):"Stop ".concat(1===_?"1 schedule":"".concat(_," schedules"));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.zx,{intent:"none",onClick:b,children:"Cancel"}),(0,i.jsx)(a.zx,{intent:"primary",onClick:P,children:e})]});case"updating":var n="start"===o?"Starting ".concat(1===_?"1 schedule":"".concat(_," schedules")):"Stopping ".concat(1===_?"1 schedule":"".concat(_," schedules"));return(0,i.jsx)(a.zx,{intent:"primary",disabled:!0,children:n});case"completed":return(0,i.jsx)(a.zx,{intent:"primary",onClick:b,children:"Done"})}}()})]})},b=t(25729),ScheduleBulkActionMenu=function(e){var n=e.schedules,t=e.onDone,u=n.length,d=(0,r._)((0,c.useState)("not-open"),2),p=d[0],h=d[1],m=(0,c.useMemo)(function(){return(0,b.H)(n.map(function(e){return e.scheduleState}))},[n]),f=m.anyOff,x=m.anyOn;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.J,{content:(0,i.jsxs)(o.v2,{children:[(0,i.jsx)(o.sN,{text:"Start ".concat(1===u?"1 schedule":"".concat(u," schedules")),disabled:!f,"aria-disabled":!f,icon:"toggle_on",onClick:function(){h("start")}}),(0,i.jsx)(o.sN,{text:"Stop ".concat(1===u?"1 schedule":"".concat(u," schedules")),disabled:!x,"aria-disabled":!x,icon:"toggle_off",onClick:function(){h("stop")}})]}),placement:"bottom-end",children:(0,i.jsx)(a.zx,{disabled:!u,intent:"primary",rightIcon:(0,i.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,i.jsx)(ScheduleStateChangeDialog,{openWithIntent:p,schedules:n,onClose:function(){return h("not-open")},onComplete:function(){t()}})]})}},84826:function(e,n,t){t.d(n,{K:function(){return SchedulerInfo}});var r=t(85333),i=t(6692),s=t(2281),o=t(52322),a=t(22139),l=t(9676);t(2784);var SchedulerInfo=function(e){var n=e.daemonHealth,t=(0,s._)(e,["daemonHealth"]),c=void 0;if(n){var u=n.allDaemonStatuses.filter(function(e){return"SCHEDULER"===e.daemonType});if(u.length>0){var d=u[0];c=d.required&&d.healthy}}return!1===c?(0,o.jsx)(a.x,(0,i._)((0,r._)({},t),{children:(0,o.jsx)(l.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,o.jsxs)("div",{children:["See the"," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})})):null}},157:function(e,n,t){t.d(n,{g:function(){return makeScheduleKey}});var r=t(44254),makeScheduleKey=function(e,n){return"".concat((0,r.Uz)(e),"-").concat(n)}},67802:function(e,n,t){t.d(n,{b:function(){return SensorBulkActionMenu}});var r=t(58467),i=t(52322),s=t(37783),o=t(44678),a=t(9001),l=t(91532),c=t(2784),u=t(81862),d=t(22970),p=t(33379),h=t(38058),m=t(59692),f=t(25195),x=t(10952),j=t(57981),g=t(56744),v=t(66213),SensorStateChangeDialog=function(e){var n,t,s,o=e.openWithIntent,b=e.onClose,S=e.onComplete,y=e.sensors,_=y.length,k=(0,r._)((0,g.s)(),2),w=k[0],O=k[1];(0,c.useEffect)(function(){"not-open"===o&&O({type:"reset"})},[o,O]);var C=(0,r._)((0,p.D)(j.VE),1)[0],R=(0,r._)((0,p.D)(j.Xu),1)[0],T=(n=(0,u._)(function(e){var n,t,r;return(0,d.Jh)(this,function(i){switch(i.label){case 0:return n=e.repoAddress,t=e.sensorName,[4,C({variables:{sensorSelector:{repositoryLocationName:n.location,repositoryName:n.name,sensorName:t}}})];case 1:switch(null==(r=i.sent().data)?void 0:r.startSensor.__typename){case"Sensor":O({type:"update-success"});break;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":O({type:"update-error",name:t,error:r.startSensor.message})}return[2]}})}),function(e){return n.apply(this,arguments)}),E=(t=(0,u._)(function(e){var n,t,r;return(0,d.Jh)(this,function(i){switch(i.label){case 0:return n=e.sensorName,[4,R({variables:{jobOriginId:(t=e.sensorState).id,jobSelectorId:t.selectorId}})];case 1:switch(null==(r=i.sent().data)?void 0:r.stopSensor.__typename){case"StopSensorMutationResult":O({type:"update-success"});break;case"UnauthorizedError":case"PythonError":O({type:"update-error",name:n,error:r.stopSensor.message})}return[2]}})}),function(e){return t.apply(this,arguments)}),P=(s=(0,u._)(function(){var e,n,t,r,i,s,a;return(0,d.Jh)(this,function(l){switch(l.label){case 0:if("not-open"===o)return[2];O({type:"start"}),e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,8,9,10]),r=y[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,7];if(s=i.value,"start"!==o)return[3,4];return[4,T(s)];case 3:return l.sent(),[3,6];case 4:return[4,E(s)];case 5:l.sent(),l.label=6;case 6:return e=!0,[3,2];case 7:return[3,10];case 8:return a=l.sent(),n=!0,t=a,[3,10];case 9:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 10:return O({type:"complete"}),S(),[2]}})}),function(){return s.apply(this,arguments)}),N="updating"!==w.step;return(0,i.jsxs)(x.Vq,{isOpen:"not-open"!==o,title:"start"===o?"Start sensors":"Stop sensors",canEscapeKeyClose:N,canOutsideClickClose:N,onClose:b,children:[(0,i.jsx)(x.a7,{children:(0,i.jsxs)(m.Z,{direction:"column",spacing:24,children:[function(){if("not-open"===o)return null;switch(w.step){case"initial":if("stop"===o)return(0,i.jsx)("div",{children:"".concat(_," ").concat(1===_?"sensor":"sensors"," will be stopped. Do you want to continue?")});return(0,i.jsx)("div",{children:"".concat(_," ").concat(1===_?"sensor":"sensors"," will be started. Do you want to continue?")});case"updating":case"completed":var e=_>0?w.completion.completed/_:1;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsx)(h.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===w.step?(0,i.jsx)(v.c,{message:"Sensors are being updated, please do not navigate away yet."}):null]});default:return null}}(),function(){if("not-open"===o||"initial"===w.step)return null;if("updating"===w.step)return(0,i.jsx)("div",{children:"Please do not close the window or navigate away while sensors are being updated."});var e=w.completion.errors,n=Object.keys(e).length,t=w.completion.completed-n;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[t?(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"check_circle",color:f.fA()}),(0,i.jsx)("div",{children:"start"===o?"Successfully started ".concat(1===t?"1 sensor":"".concat(t," sensors"),"."):"Successfully stopped ".concat(1===t?"1 sensor":"".concat(t," sensors"),".")})]}):null,n?(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"warning",color:f.qr()}),(0,i.jsx)("div",{children:"start"===o?"Could not start ".concat(1===n?"1 sensor":"".concat(n," sensors"),":"):"Could not stop ".concat(1===n?"1 sensor":"".concat(n," sensors"),":")})]}),(0,i.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(function(n){return(0,i.jsx)("li",{children:(0,i.jsxs)(m.Z,{direction:"row",spacing:8,children:[(0,i.jsxs)("strong",{children:[n,":"]}),e[n]?(0,i.jsx)("div",{children:e[n]}):null]})},n)})})]}):null]})}()]})}),(0,i.jsx)(x.cN,{children:function(){if("not-open"===o)return null;switch(w.step){case"initial":var e="start"===o?"Start ".concat(1===_?"1 sensor":"".concat(_," sensors")):"Stop ".concat(1===_?"1 sensor":"".concat(_," sensors"));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.zx,{intent:"none",onClick:b,children:"Cancel"}),(0,i.jsx)(a.zx,{intent:"primary",onClick:P,children:e})]});case"updating":var n="start"===o?"Starting ".concat(1===_?"1 sensor":"".concat(_," sensors")):"Stopping ".concat(1===_?"1 sensor":"".concat(_," sensors"));return(0,i.jsx)(a.zx,{intent:"primary",disabled:!0,children:n});case"completed":return(0,i.jsx)(a.zx,{intent:"primary",onClick:b,children:"Done"})}}()})]})},b=t(25729),SensorBulkActionMenu=function(e){var n=e.sensors,t=e.onDone,u=n.length,d=(0,r._)((0,c.useState)("not-open"),2),p=d[0],h=d[1],m=(0,c.useMemo)(function(){return(0,b.H)(n.map(function(e){return e.sensorState}))},[n]),f=m.anyOff,x=m.anyOn;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.J,{content:(0,i.jsxs)(o.v2,{children:[(0,i.jsx)(o.sN,{text:"Start ".concat(1===u?"1 sensor":"".concat(u," sensors")),disabled:!f,"aria-disabled":!f,icon:"toggle_on",onClick:function(){h("start")}}),(0,i.jsx)(o.sN,{text:"Stop ".concat(1===u?"1 sensor":"".concat(u," sensors")),disabled:!x,"aria-disabled":!x,icon:"toggle_off",onClick:function(){h("stop")}})]}),placement:"bottom-end",children:(0,i.jsx)(a.zx,{disabled:!u,intent:"primary",rightIcon:(0,i.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,i.jsx)(SensorStateChangeDialog,{openWithIntent:p,sensors:n,onClose:function(){return h("not-open")},onComplete:function(){t()}})]})}},21789:function(e,n,t){t.d(n,{e:function(){return SensorDetails},F:function(){return humanizeSensorInterval}});var r=t(58467),i=t(52322),s=t(17131),o=t(81308),a=t(57830),l=t(22139),c=t(9001),u=t(95223),d=t(3842),p=t(91532),h=t(2784),m=t(81862),f=t(73235),x=t(22970),j=t(33379),g=t(60138),v=t(59692),b=t(12084),S=t(25195),y=t(10952),_=t(34822);t(33521);var k=t(66904),w=t(19211),O=t(91195),C=t(56266);function _templateObject(){var e=(0,f._)(["\n  mutation SetSensorCursorMutation($sensorSelector: SensorSelector!, $cursor: String) {\n    setSensorCursor(sensorSelector: $sensorSelector, cursor: $cursor) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          status\n          typeSpecificData {\n            ... on SensorData {\n              lastCursor\n            }\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var EditCursorDialog=function(e){var n,t=e.isOpen,s=e.sensorSelector,o=e.cursor,a=e.onClose,l=(0,r._)((0,h.useState)(o),2),u=l[0],d=l[1],p=(0,r._)((0,h.useState)(!1),2),f=p[0],g=p[1],O=(0,r._)((0,j.D)(R),1)[0],T=(n=(0,m._)(function(){var e,n;return(0,x.Jh)(this,function(t){switch(t.label){case 0:return g(!0),[4,O({variables:{sensorSelector:s,cursor:u}})];case 1:if((null==(e=t.sent().data)?void 0:e.setSensorCursor.__typename)!=="Sensor")return[3,3];return[4,(0,w.B7)({message:"Cursor value updated",intent:"success"})];case 2:return t.sent(),[3,5];case 3:if(!(null==e?void 0:e.setSensorCursor))return[3,5];return n=e.setSensorCursor,[4,(0,w.B7)({intent:"danger",message:(0,i.jsxs)(v.Z,{direction:"row",spacing:8,children:[(0,i.jsx)("div",{children:"Could not set cursor value."}),(0,i.jsx)(b.Z,{color:S.KH(),underline:"always",onClick:function(){(0,k._)({title:"Python Error",body:"PythonError"===n.__typename?(0,i.jsx)(C.T9,{error:n}):"Sensor not found"})},children:"View error"})]})})];case 4:t.sent(),t.label=5;case 5:return a(),[2]}})}),function(){return n.apply(this,arguments)});return(0,i.jsxs)(y.Vq,{isOpen:t,onClose:function(){a(),d(o)},style:{width:"500px"},title:"Edit ".concat(s.sensorName," cursor"),children:[(0,i.jsx)(y.a7,{children:(0,i.jsx)(_.Kx,{value:u,$resize:"vertical",onChange:function(e){return d(e.target.value)},style:{width:"100%"}})}),(0,i.jsxs)(y.cN,{children:[(0,i.jsx)(c.zx,{onClick:a,children:"Cancel"}),(0,i.jsx)(c.zx,{intent:"primary",onClick:T,disabled:f,children:"Set cursor value"})]})]})},R=(0,g.Ps)(_templateObject(),O.B),T=t(28090),SensorMonitoredAssets=function(e){var n,t=e.metadata;return(null==t?void 0:null===(n=t.assetKeys)||void 0===n?void 0:n.length)?(0,i.jsx)(l.x,{flex:{direction:"column",gap:2},children:t.assetKeys.map(function(e){return(0,i.jsx)(T.R,{path:e.path,icon:"asset"},e.path.join("/"))})}):(0,i.jsx)("span",{})},E=t(85333),P=t(6692),N=t(43180),I=t(57981),A=t(54949),D=t(56121),SensorResetButton=function(e){var n=e.repoAddress,t=e.sensor,s=(0,A.xz)(n.location).permissions,o=s.canStartSensor,a=s.canStopSensor,l=t.name,u=(0,P._)((0,E._)({},(0,D.$)(n)),{sensorName:l}),d=(0,r._)((0,j.D)(I.Lq,{onCompleted:I.oI}),2),p=d[0],h=d[1].loading,m=o&&a,f=m?'In code, a default status for "'.concat(l,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the sensor status to track the status set in code.'):A.Qr;return(0,i.jsx)(N.u,{content:f,display:"flex",children:(0,i.jsx)(c.zx,{disabled:h||!m,onClick:function(){p({variables:{sensorSelector:u}})},children:"Reset sensor status"})})},z=t(23054),F=t(82109),$=t(55237),L=t(61935),q=t(63386),U=t(30301),B=t(63832),M=t(92364),V=t(35505),J=t(4472),H=t(54266);function DynamicPartitionRequests(e){var n=e.includeTitle,t=e.requests,r=(0,h.useMemo)(function(){if(!t.length)return[];var e=[];return t.forEach(function(n){var t=n.partitionKeys,r=n.partitionsDefName,i=n.type;null==t||t.forEach(function(n){e.push({key:n,def:r,type:i})})}),e},[t]);return r.length?(0,i.jsxs)(l.x,{flex:{direction:"column",gap:12,grow:1},children:[void 0===n||n?(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(p.JO,{name:"partition"}),(0,i.jsx)(o.pm,{children:"Dynamic Partition Requests"})]}):null,(0,i.jsxs)(H.i,{style:{borderRight:"1px solid ".concat(S.wL())},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Partition"}),(0,i.jsx)("th",{children:"Partition definition"}),(0,i.jsx)("th",{children:"Requested change"})]})}),(0,i.jsx)("tbody",{children:r.map(function(e,n){var t=e.key,r=e.def,s=e.type;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:t}),(0,i.jsx)("td",{children:r}),(0,i.jsx)("td",{children:s===L.Dq2.ADD_PARTITIONS?(0,i.jsx)(a.V,{intent:"success",children:(0,i.jsx)("span",{children:"Add Partition"})}):(0,i.jsx)(a.V,{intent:"danger",children:(0,i.jsx)("span",{children:"Delete Partition"})})})]},n)})})]})]}):null}var K=t(39818),Z=t(46032),Q=t(68052);function SensorDryRunDialog_templateObject(){var e=(0,f._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return SensorDryRunDialog_templateObject=function(){return e},e}function _templateObject1(){var e=(0,f._)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  padding-bottom: 12px;\n  border-bottom: 1px solid ",";\n  margin-bottom: 12px;\n  "," {\n    padding-bottom: 4px;\n    display: block;\n  }\n  pre {\n    margin: 0;\n  }\n  button {\n    margin-top: 4px;\n  }\n"]);return _templateObject1=function(){return e},e}var SensorDryRunDialog=function(e){var n=e.isOpen,t=e.onClose,r=e.name;return(0,i.jsx)(y.Vq,{isOpen:n,onClose:t,style:{width:"70vw",display:"flex"},icon:"sensors",title:r,children:(0,i.jsx)(SensorDryRun,(0,E._)({},e))})},SensorDryRun=function(e){var n,t=e.repoAddress,s=e.name,u=e.currentCursor,d=e.onClose,f=e.jobName,g=(0,r._)((0,j.D)(W),1)[0],O=(0,r._)((0,h.useState)(u),2),T=O[0],E=O[1],P=(0,r._)((0,h.useState)(!1),2),N=P[0],I=P[1],A=(0,r._)((0,h.useState)(null),2),D=A[0],z=A[1],F=(0,r._)((0,h.useState)(null),2),$=F[0],L=F[1],q=(0,h.useMemo)(function(){return{sensorName:s,repositoryLocationName:t.location,repositoryName:t.name}},[t,s]),U=(0,h.useCallback)((0,m._)(function(){var e,n,t;return(0,x.Jh)(this,function(r){switch(r.label){case 0:return I(!0),[4,g({variables:{selectorData:q,cursor:T}})];case 1:return(n=null===(e=r.sent().data)||void 0===e?void 0:e.sensorDryRun)?(null==n?void 0:n.__typename)==="DryRunInstigationTick"?(null===(t=n.evaluationResult)||void 0===t?void 0:t.error)?z(n.evaluationResult.error):L(n):(null==n?void 0:n.__typename)==="SensorNotFoundError"?(0,k._)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(s)}):z(n):(0,Z.UT)("sensorDryRun Mutation returned no data??"),I(!1),[2]}})}),[g,q,T,s]),V=(0,h.useMemo)(function(){return $||D?(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(c.zx,{"data-testid":(0,Q.N)("test-again"),onClick:function(){L(null),z(null)},children:"Test again"}),(0,i.jsx)(c.zx,{intent:"primary",onClick:d,children:"Close"})]}):N?(0,i.jsx)(l.x,{flex:{direction:"row",gap:8},children:(0,i.jsx)(c.zx,{onClick:d,children:"Cancel"})}):(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(c.zx,{onClick:d,children:"Cancel"}),(0,i.jsx)(c.zx,{onClick:U,intent:"primary","data-testid":(0,Q.N)("evaluate"),children:"Evaluate"})]})},[$,D,N,d,U]),H=(0,r._)((0,h.useState)("Unpersisted"),2),K=H[0],G=H[1],X=(0,r._)((0,j.D)(R),1)[0],ee=(0,h.useCallback)((0,m._)(function(){var e,n,t,r;return(0,x.Jh)(this,function(s){switch(s.label){case 0:return(n=null==$?void 0:null===(e=$.evaluationResult)||void 0===e?void 0:e.cursor)||(0,Z.UT)("Did not expect to get here"),G("Persisting"),[4,X({variables:{sensorSelector:q,cursor:n}})];case 1:if((null==(t=s.sent().data)?void 0:t.setSensorCursor.__typename)!=="Sensor")return[3,3];return[4,(0,w.B7)({message:"Cursor value updated",intent:"success"})];case 2:return s.sent(),G("Persisted"),[3,5];case 3:if(!(null==t?void 0:t.setSensorCursor))return[3,5];return r=t.setSensorCursor,[4,(0,w.B7)({intent:"danger",message:(0,i.jsxs)(v.Z,{direction:"row",spacing:8,children:[(0,i.jsx)("div",{children:"Could not set cursor value."}),(0,i.jsx)(b.Z,{color:S.KH(),underline:"always",onClick:function(){(0,k._)({title:"Python Error",body:"PythonError"===r.__typename?(0,i.jsx)(C.T9,{error:r}):"Sensor not found"})},children:"View error"})]})})];case 4:s.sent(),s.label=5;case 5:return[2]}})}),[null==$?void 0:null===(n=$.evaluationResult)||void 0===n?void 0:n.cursor,q,X]),en=(0,h.useMemo)(function(){if($||D){var e,n,r,d,h,m,x,j=null==$?void 0:null===(e=$.evaluationResult)||void 0===e?void 0:e.runRequests,g=(null==j?void 0:j.length)||0,v=!D&&0===g,b=null==$?void 0:null===(n=$.evaluationResult)||void 0===n?void 0:n.dynamicPartitionsRequests;return(0,i.jsx)(l.x,{flex:{direction:"column",gap:8},children:(0,i.jsxs)(l.x,{children:[(0,i.jsxs)(Y,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(o.pm,{children:"Result"}),(0,i.jsx)(l.x,{flex:{grow:1,alignItems:"center"},children:(0,i.jsx)("div",{children:D?(0,i.jsx)(a.V,{intent:"danger",children:"Failed"}):g?(0,i.jsxs)(a.V,{intent:"success",children:[g," run requests"]}):(0,i.jsx)(a.V,{intent:"warning",children:"Skipped"})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(o.pm,{children:"Used cursor value"}),(0,i.jsx)("pre",{children:(null==T?void 0:T.length)?T:"None"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(o.pm,{children:"Computed cursor value"}),(0,i.jsx)("pre",{children:(null==$?void 0:null===(d=$.evaluationResult)||void 0===d?void 0:null===(r=d.cursor)||void 0===r?void 0:r.length)?null==$?void 0:$.evaluationResult.cursor:D?"Error":"None"}),D||(null!=u?u:"")===(null!==(x=null==$?void 0:null===(h=$.evaluationResult)||void 0===h?void 0:h.cursor)&&void 0!==x?x:"")?null:(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)(c.zx,{disabled:["Persisting","Persisted"].includes(K),loading:"Persisting"===K,onClick:ee,children:(0,i.jsx)("span",{"data-testid":(0,Q.N)("persist-cursor"),children:"Persisting"===K?"Persisting":"Persisted"===K?"Persisted":"Persist computed cursor value"})}),"Persisted"===K?(0,i.jsx)(p.JO,{name:"check_circle",color:S.fA()}):null]})]})]}),D?(0,i.jsx)("div",{children:(0,i.jsx)(C.T9,{error:D})}):null,v?(0,i.jsxs)("div",{children:[(0,i.jsx)(o.pm,{children:"Skip reason"}),(0,i.jsx)("div",{children:(null==$?void 0:null===(m=$.evaluationResult)||void 0===m?void 0:m.skipReason)||"No skip reason was output"})]}):null,g&&j?(0,i.jsx)(J.k,{runRequests:j,name:s,jobName:f,isJob:!0,repoAddress:t}):null,(null==b?void 0:b.length)?(0,i.jsx)("div",{style:{marginTop:"24px"},children:(0,i.jsx)(DynamicPartitionRequests,{requests:b})}):null]})})}return N?(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(B.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Evaluating sensor"})]}):(0,i.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,i.jsx)("div",{children:"Cursor"}),(0,i.jsx)(_.oi,{value:T,onChange:function(e){return E(e.target.value)},"data-testid":(0,Q.N)("cursor-input")}),""!==u&&u?null:(0,i.jsx)(l.x,{padding:{top:16,bottom:32},flex:{justifyContent:"center"},children:(0,i.jsx)(M.t,{icon:"no-results",title:"You're not using a cursor",description:(0,i.jsxs)("span",{children:["Check our"," ",(0,i.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"sensor documentation"})," ","to learn how to use cursors"]})})})]})},[$,D,N,u,K,ee,s,f,t,T]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.a7,{children:(0,i.jsx)("div",{style:{minHeight:"300px"},children:en})}),(0,i.jsx)(y.cN,{topBorder:!0,children:V})]})},W=(0,g.Ps)(SensorDryRunDialog_templateObject(),K.s,O.B),Y=V.ZP.div.withConfig({componentId:"sc-ba27fb61-0"})(_templateObject1(),S.wL(),o.pm),G=t(581),X={showSeconds:!0,showTimezone:!1},humanizeSensorInterval=function(e){return(e||(e=30),e<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days")},SensorDetails=function(e){var n,t,m,f=e.sensor,x=e.repoAddress,j=e.daemonHealth,g=e.refreshState,v=e.selectionQueryResult,b=f.name,S=f.sensorState,y=S.status,_=S.ticks,k=f.metadata,w=(0,r._)((0,h.useState)(!1),2),O=w[0],C=w[1],R={sensorName:f.name,repositoryName:x.name,repositoryLocationName:x.location},T=_.length?_[0]:null,E=f.sensorState.typeSpecificData&&"SensorData"===f.sensorState.typeSpecificData.__typename&&f.sensorState.typeSpecificData.lastCursor,P=(0,r._)((0,h.useState)(!1),2),N=P[0],I=P[1],A=y===L.ynu.RUNNING,D=null===(n=v.data)||void 0===n?void 0:n.sensorOrError,B=(null==D?void 0:D.__typename)==="Sensor"?D:null,M=null==B?void 0:B.assetSelection;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.m,{title:(0,i.jsx)(o.X6,{children:b}),icon:"sensors",tags:(0,i.jsxs)(a.V,{icon:"sensors",children:["Sensor in ",(0,i.jsx)(q.b,{repoAddress:x})]}),right:(0,i.jsxs)(l.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)($.xi,{refreshState:g}),f.sensorType===L.dEY.STANDARD?(0,i.jsx)(c.zx,{onClick:function(){I(!0)},children:"Test Sensor"}):null]})}),(0,i.jsx)(SensorDryRunDialog,{isOpen:N,onClose:function(){I(!1)},currentCursor:E||"",name:f.name,repoAddress:x,jobName:(null===(m=f.targets)||void 0===m?void 0:null===(t=m[0])||void 0===t?void 0:t.pipelineName)||""}),(0,i.jsx)(u.fJ,{children:(0,i.jsxs)("tbody",{children:[f.description?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Description"}),(0,i.jsx)("td",{children:f.description})]}):null,(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Latest tick"}),(0,i.jsx)("td",{children:T?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,i.jsx)(U.v,{timestamp:T.timestamp,timeFormat:X}),(0,i.jsx)(G.a,{tick:T})]})}):"Sensor has never run"})]}),f.nextTick&&j&&A&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Next tick"}),(0,i.jsx)("td",{children:(0,i.jsx)(U.v,{timestamp:f.nextTick.timestamp,timeFormat:X})})]}),f.targets&&f.targets.length||M?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Target"}),(0,i.jsx)("td",{children:(0,i.jsx)(F.D,{targets:f.targets,repoAddress:x,selectionQueryResult:v,sensorType:f.sensorType})})]}):null,(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,i.jsx)(z.c,{repoAddress:x,sensor:f}),f.canReset&&(0,i.jsx)(SensorResetButton,{repoAddress:x,sensor:f})]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Frequency"}),(0,i.jsx)("td",{children:humanizeSensorInterval(f.minIntervalSeconds)})]}),k.assetKeys&&k.assetKeys.length?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Monitored assets"}),(0,i.jsx)("td",{children:(0,i.jsx)(SensorMonitoredAssets,{metadata:k})})]}):null,f.sensorType!==L.dEY.AUTO_MATERIALIZE?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontFamily:d.b.monospace,fontSize:"16px"},children:E||"None"}),(0,i.jsx)(c.zx,{icon:(0,i.jsx)(p.JO,{name:"edit"}),onClick:function(){return C(!0)},children:"Edit"})]}),(0,i.jsx)(EditCursorDialog,{isOpen:O,sensorSelector:R,cursor:E||"",onClose:function(){return C(!1)}})]})]}):null]})})]})}},56692:function(e,n,t){t.d(n,{F:function(){return SensorInfo}});var r=t(85333),i=t(6692),s=t(2281),o=t(52322),a=t(22139),l=t(9676);t(2784);var SensorInfo=function(e){var n=e.sensorDaemonStatus,t=e.assetDaemonStatus,c=(0,s._)(e,["sensorDaemonStatus","assetDaemonStatus"]),u=n&&!1===n.healthy&&n.required,d=t&&!1==!t.healthy&&t.required;return d||u?(0,o.jsx)(a.x,(0,i._)((0,r._)({},c),{children:(0,o.jsx)(l.b,{intent:"warning",title:u?d?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,o.jsxs)("div",{children:["See the"," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})})):null}},20762:function(e,n,t){t.d(n,{Z:function(){return W},A:function(){return SensorRoot}});var r=t(85333),i=t(6692),s=t(58467),o=t(73235),a=t(52322),l=t(40794),c=t(60138),u=t(99596),d=t(22139),p=t(63832),h=t(25195),m=t(92364),f=t(28888),x=t(2784),j=t(7267),g=t(21789),v=t(49280);function _templateObject(){var e=(0,o._)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var b=(0,c.Ps)(_templateObject(),v.ai),S=t(56692),y=t(82550),_=t(83601),k=t(9676),w=t(81308),O=t(91195),C=t(89102);function AssetSensorTicksQuery_templateObject(){var e=(0,o._)(["\n  query AssetSensorTicksQuery(\n    $sensorSelector: SensorSelector!\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          ticks(\n            dayRange: $dayRange\n            dayOffset: $dayOffset\n            statuses: $statuses\n            limit: $limit\n            cursor: $cursor\n            beforeTimestamp: $beforeTimestamp\n            afterTimestamp: $afterTimestamp\n          ) {\n            id\n            ...AssetDaemonTickFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return AssetSensorTicksQuery_templateObject=function(){return e},e}var R=(0,c.Ps)(AssetSensorTicksQuery_templateObject(),C.B,O.B),T=t(55237),E=t(3490),P=t(80428),N=t(22370),I=t(61935),A=t(71277),D=t(65767),SensorAutomaterializationEvaluationHistoryTable=function(e){var n,t,r=e.repoAddress,i=e.sensor,o=e.setSelectedTick,l=e.setTableView,c=e.setTimerange,u=e.setParentStatuses,d=(0,s._)((0,A.q)({queryKey:"statuses",decode:(0,x.useCallback)(function(e){var n=e.statuses;return new Set(n?JSON.parse(n):[I.izS.STARTED,I.izS.SUCCESS,I.izS.FAILURE,I.izS.SKIPPED])},[]),encode:(0,x.useCallback)(function(e){return{statuses:JSON.stringify(Array.from(e))}},[])}),2),p=d[0],h=d[1],m=(0,D.l)({query:R,variables:{sensorSelector:{sensorName:i.name,repositoryName:r.name,repositoryLocationName:r.location},statuses:(0,x.useMemo)(function(){return Array.from(p)},[p])},nextCursorForResult:function(e){if((null==e?void 0:e.sensorOrError.__typename)==="Sensor"){var n,t=e.sensorOrError.sensorState.ticks;if(t.length)return null===(n=t[14])||void 0===n?void 0:n.id}},getResultArray:function(e){return(null==e?void 0:e.sensorOrError.__typename)==="Sensor"?e.sensorOrError.sensorState.ticks:[]},pageSize:15}),f=m.queryResult,j=m.paginationProps;(0,T.C4)(f,1e4,!j.hasPrevCursor);var g=(null===(t=f.data)||void 0===t?void 0:null===(n=t.sensorOrError)||void 0===n?void 0:n.__typename)==="Sensor"?f.data.sensorOrError.sensorState.ticks:null;return(0,x.useEffect)(function(){if(j.hasPrevCursor){if(g&&g.length){var e,n,t=null===(e=g[g.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=g[0])||void 0===n?void 0:n.endTimestamp;t&&r&&c([t,r])}}else c(void 0)},[g,j.hasPrevCursor,c]),(0,x.useEffect)(function(){j.hasPrevCursor?u(Array.from(p)):u(void 0)},[j.hasPrevCursor,u,p]),(0,a.jsx)(N.V,{loading:f.loading,ticks:g||[],paginationProps:j,setSelectedTick:o,setStatuses:h,setTableView:l,statuses:p})},z=t(90437),F=t(85888),$=t(84495),L=t(44254),SensorPageAutomaterialize=function(e){var n,fetchData=function(){N({variables:q})},t=e.repoAddress,i=e.sensor,o=e.loading,l=e.daemonStatus,c=(0,s._)((0,x.useState)(!1),2),u=c[0],m=c[1],f=(0,s._)((0,x.useState)(void 0),2),j=f[0],g=f[1],v=(0,s._)((0,x.useState)(void 0),2),b=v[0],O=v[1],C=(0,s._)((0,_.t)(R),2),N=C[0],D=C[1],q=(0,x.useMemo)(function(){return b||j?{sensorSelector:{sensorName:i.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:null==b?void 0:b[0],beforeTimestamp:null==b?void 0:b[1],statuses:j}:{sensorSelector:{sensorName:i.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:(Date.now()-12e5)/1e3}},[i,t,j,b]);(0,x.useLayoutEffect)(fetchData,[q]),(0,T.C4)(D,2e3,!u&&!b&&!j,fetchData);for(var U=(0,s._)((0,x.useState)(null),2),B=U[0],M=U[1],V=(0,s._)((0,A.q)((0,x.useMemo)(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),J=V[0],H=V[1],K=null!==(n=D.data)&&void 0!==n?n:D.previousData,Z=(0,x.useMemo)(function(){return(null==K?void 0:K.sensorOrError.__typename)==="Sensor"?K.sensorOrError.sensorState.ticks:[]},[K]),Q=(0,x.useMemo)(function(){return Z.map(function(e){return"".concat(e.id,":").concat(e.status)})},[Z]);Q.length<100;)Q.push("");var W=(0,x.useMemo)(function(){var e;return null!==(e=Z.map(function(e,n){var t=Z[n-1];if(t&&(0,F.g6)(e,n)){var i=(0,r._)({},e);return i.endTimestamp=t.timestamp,i.status=I.izS.FAILURE,i}return e}))&&void 0!==e?e:[]},(0,y._)(Q.slice(0,100))),Y=(0,x.useCallback)(function(e){m(!!e)},[m]),G=(0,x.useMemo)(function(){return[{key:$.H.RepositoryLabelTag,value:(0,L.Wg)(t)},{key:$.H.SensorName,value:i.name}]},[t,i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,a.jsx)(k.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,a.jsxs)(a.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling – instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,a.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,a.jsx)(S.F,{assetDaemonHealth:l,padding:{vertical:16,horizontal:24}}),(0,a.jsx)(d.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,a.jsx)(w.Tj,{children:"Evaluation timeline"})}),!i&&o?(0,a.jsxs)(d.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,a.jsx)(p.$,{purpose:"body-text"}),(0,a.jsx)("div",{style:{color:h.$()},children:"Loading evaluations…"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.p,{ticks:W,onHoverTick:Y,onSelectTick:M,exactRange:b,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,a.jsx)(E.d,{tick:B,isOpen:!!B,close:function(){M(null)}}),"evaluations"===J?(0,a.jsx)(SensorAutomaterializationEvaluationHistoryTable,{repoAddress:t,sensor:i,setSelectedTick:M,setTableView:H,setParentStatuses:g,setTimerange:O}):(0,a.jsx)(P.o,{filterTags:G,setTableView:H})]})]})},q=t(83302),U=t(64107);function SensorPreviousRuns_templateObject(){var e=(0,o._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return SensorPreviousRuns_templateObject=function(){return e},e}var SensorPreviousRuns=function(e){var n=e.sensor,t=e.repoAddress,i=e.highlightedIds,s=e.tabs,o=(0,D.l)({query:B,variables:{filter:{tags:[{key:$.H.SensorName,value:n.name},{key:$.H.RepositoryLabelTag,value:(0,L.Wg)(t)}]}},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[19])||void 0===n?void 0:n.id},getResultArray:function(e){return(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results},pageSize:20}),l=o.queryResult,c=o.paginationProps;(0,T.C4)(l,c.hasPrevCursor?36e5:1e4);var u=l.data;if(u&&(null==u?void 0:u.pipelineRunsOrError.__typename)==="Runs"||(u=l.previousData),!u||(null==u?void 0:u.pipelineRunsOrError.__typename)!=="Runs")return null;var d=u.pipelineRunsOrError.results;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.AL,{actionBarComponents:s,runs:d,highlightedIds:i,hideCreatedBy:!0}),(0,a.jsx)("div",{style:{paddingBottom:"16px"},children:(0,a.jsx)(q.pI,(0,r._)({},c))})]})},B=(0,c.Ps)(SensorPreviousRuns_templateObject(),U.ZZ),M=t(56266),V=t(68028),J=t(28252),H=t(31761),K=t(50623),Z=t(56121);function SensorRoot_templateObject(){var e=(0,o._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return SensorRoot_templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        assetSelection {\n          ...SensorAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment SensorAssetSelectionFragment on AssetSelection {\n    assetSelectionString\n    assets {\n      id\n      key {\n        path\n      }\n      definition {\n        id\n        autoMaterializePolicy {\n          policyType\n        }\n      }\n    }\n  }\n  ","\n"]);return _templateObject1=function(){return e},e}var SensorRoot=function(e){var n=e.repoAddress;(0,V.Px)();var t=(0,j.UO)().sensorName;(0,J.j)("Sensor: ".concat(t));var o=(0,i._)((0,r._)({},(0,Z.$)(n)),{sensorName:t}),c=(0,s._)((0,x.useState)(void 0),2),v=c[0],b=c[1],y=(0,s._)((0,x.useState)(void 0),2),_=y[0],k=y[1],w=(0,x.useMemo)(function(){return _||v?{afterTimestamp:null==_?void 0:_[0],beforeTimestamp:null==_?void 0:_[1],statuses:v}:{}},[v,_]),O=(0,s._)((0,A.q)((0,x.useMemo)(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),C=O[0],R=O[1],E=(0,l.a)(Q,{variables:{sensorSelector:o},notifyOnNetworkStatusChange:!0}),P=(0,l.a)(W,{variables:{sensorSelector:o},notifyOnNetworkStatusChange:!0}),N=(0,T.C4)(E,T.dT),D=(0,T.C4)(P,T.dT),z=(0,T.V5)(N,D),F=E.data,$=E.loading,L=(0,a.jsx)(u.h,{activeItems:new Set([C]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:function(e){R(e)}});if(!F&&$)return(0,a.jsxs)(d.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,a.jsx)(p.$,{purpose:"body-text"}),(0,a.jsx)("div",{style:{color:h.$()},children:"Loading sensor…"})]});if(!F||"SensorNotFoundError"===F.sensorOrError.__typename)return(0,a.jsx)(d.x,{padding:{vertical:32},children:(0,a.jsx)(m.t,{icon:"error",title:"Could not find sensor `".concat(t,"` in definitions for `").concat(n.name,"`")})});var q=F.sensorOrError;if("PythonError"===q.__typename)return(0,a.jsx)(M.T9,{error:q});if("UnauthorizedError"===q.__typename)return(0,a.jsx)(j.l_,{to:"/overview/sensors"});var U=F.instance;if(q.sensorType===I.dEY.AUTO_MATERIALIZE){var B=U.daemonHealth.ampDaemonStatus;return(0,a.jsxs)(f.T,{children:[(0,a.jsx)(g.e,{repoAddress:n,sensor:q,daemonHealth:B.healthy,refreshState:z,selectionQueryResult:P}),(0,a.jsx)(SensorPageAutomaterialize,{repoAddress:n,sensor:q,daemonStatus:B,loading:$})]})}var H=U.daemonHealth.sensorDaemonStatus;return(0,a.jsxs)(f.T,{children:[(0,a.jsx)(g.e,{repoAddress:n,sensor:q,daemonHealth:H.healthy,refreshState:z,selectionQueryResult:P}),(0,a.jsx)(S.F,{sensorDaemonStatus:H,padding:{vertical:16,horizontal:24}}),(0,a.jsx)(K.C,(0,r._)({repoAddress:n,name:q.name},w)),(0,a.jsx)(d.x,{margin:{top:32},border:"top",children:"evaluations"===C?(0,a.jsx)(K.H,{tabs:L,repoAddress:n,name:q.name,setParentStatuses:b,setTimerange:k}):(0,a.jsx)(SensorPreviousRuns,{repoAddress:n,sensor:q,tabs:L})})]})},Q=(0,c.Ps)(SensorRoot_templateObject(),b,O.B,H.O),W=(0,c.Ps)(_templateObject1(),O.B)},82109:function(e,n,t){t.d(n,{D:function(){return SensorTargetList}});var r=t(58467),i=t(52322),s=t(22139),o=t(10952),a=t(9001),l=t(12084),c=t(91532),u=t(86760),DisclosureTriangleButton=function(e){var n=e.isOpen,t=e.onToggle;return(0,i.jsx)(u.k,{onClick:function(e){t(e)},style:{cursor:"pointer",width:18},children:(0,i.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:n?"rotate(0deg)":"rotate(-90deg)"}})})},d=t(81308),p=t(25195),h=t(16861),m=t(2784),f=t(47933),x=t(46032),j=t(35157),g=t(74711),v=t(61935),b=t(90818),S=t(75375),y=t(63626),_=t(46988),SensorTargetList=function(e){var n,t=e.sensorType,r=e.targets,o=e.selectionQueryResult,a=e.repoAddress,l=(0,_.Ux)(a),c=null===(n=o.data)||void 0===n?void 0:n.sensorOrError,u=(null==c?void 0:c.__typename)==="Sensor"?c:null;if(!r&&!u)return(0,i.jsx)("span",{});var d=null==u?void 0:u.assetSelection,p=null==r?void 0:r.filter(function(e){return!(0,j.pv)(e.pipelineName)});return(0,i.jsxs)(s.x,{flex:{direction:"column",gap:2},children:[d&&(0,i.jsx)(AssetSelectionLink,{assetSelection:d,sensorType:t}),null==p?void 0:p.map(function(e){return e.pipelineName?(0,i.jsx)(b.h,{pipelineName:e.pipelineName,pipelineHrefContext:a,isJob:!!(l&&(0,_.E8)(l,e.pipelineName))},e.pipelineName):null})]})},AssetSelectionLink=function(e){var n=e.assetSelection,t=e.sensorType,c=(0,r._)(m.useState(!1),2),u=c[0],d=c[1],p=m.useMemo(function(){return n.assets.slice().sort(function(e,n){return x.Bl.compare((0,j.ll)(e.key),(0,j.ll)(n.key))})},[n.assets]),h=m.useMemo(function(){return p.filter(function(e){var n;return!!(null===(n=e.definition)||void 0===n?void 0:n.autoMaterializePolicy)})},[p]),f=m.useMemo(function(){return p.filter(function(e){var n;return!(null===(n=e.definition)||void 0===n?void 0:n.autoMaterializePolicy)})},[p]),g=n.assetSelectionString||"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Vq,{isOpen:u,title:"Targeted assets",onClose:function(){return d(!1)},style:{width:"750px",maxWidth:"80vw",minWidth:"500px",transform:"scale(1)"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,i.jsx)(s.x,{flex:{direction:"column"},children:t===v.dEY.AUTO_MATERIALIZE?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Section,{title:"Assets with a materialization policy",titleBorder:"bottom",assets:h}),(0,i.jsx)(Section,{title:"Assets without a materialization policy",titleBorder:"top-and-bottom",assets:f})]}):(0,i.jsx)(Section,{assets:p})}),(0,i.jsx)(o.cN,{topBorder:!0,children:(0,i.jsx)(a.zx,{intent:"primary",onClick:function(){d(!1)},children:"Close"})})]}),(0,i.jsxs)(l.Z,{onClick:function(){d(!0)},children:[g.slice(0,1).toUpperCase(),g.slice(1)]})]})},Section=function(e){var n=e.assets,t=e.title,o=e.titleBorder,a=(0,r._)(m.useState(!0),2),l=a[0],c=a[1];return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsx)(s.x,{border:void 0===o?"top-and-bottom":o,padding:{right:24,vertical:12},children:(0,i.jsxs)(s.x,{flex:{direction:"row",gap:4},style:{cursor:"pointer"},onClick:function(){c(!l)},children:[(0,i.jsx)(DisclosureTriangleButton,{onToggle:function(){},isOpen:l}),(0,i.jsxs)(d.Tj,{children:[t," (",y.V.format(n.length),")"]})]})}):null,l?n.length?(0,i.jsx)("div",{style:{maxHeight:"300px",overflowY:"scroll"},children:(0,i.jsx)(S.Y,{padding:0,items:n,renderItem:function(e){return(0,i.jsx)(VirtualizedSelectedAssetRow,{asset:e},e.id)},itemBorders:!0})}):(0,i.jsx)(s.x,{padding:{horizontal:24,vertical:12},children:(0,i.jsx)(d.YS,{color:p.$(),children:"0 assets"})}):null]})},VirtualizedSelectedAssetRow=function(e){var n=e.asset;return(0,i.jsx)(s.x,{flex:{alignItems:"center",gap:4},style:{cursor:"pointer"},padding:{horizontal:24},children:(0,i.jsx)(f.rU,{to:(0,g.p)(n.key),target:"_blank",children:(0,i.jsx)(s.x,{style:{overflow:"hidden"},children:(0,i.jsx)(h.g,{text:(0,j.ll)(n.key)})})})})}},22478:function(e,n,t){t.d(n,{x:function(){return makeSensorKey}});var r=t(44254),makeSensorKey=function(e,n){return"".concat((0,r.Uz)(e),"-").concat(n)}},4472:function(e,n,t){t.d(n,{k:function(){return RunRequestTable}});var r=t(52322),i=t(22139),s=t(57830),o=t(91532),a=t(54266),l=t(25195),c=t(19126),u=t.n(c),d=t(90818),p=t(68052),h=t(16148),m=t(46988),f=t(38153),RunRequestTable=function(e){var n=e.runRequests,t=e.isJob,c=e.repoAddress,x=e.mode,j=e.jobName,g=(0,m.Ux)(c),v=(0,r.jsx)("tbody",{"data-testid":(0,p.N)("table-body"),children:n.map(function(e,n){var a,l,m;return(0,r.jsxs)("tr",{"data-testid":(0,p.N)(e.runKey||""),children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:8},children:(0,r.jsx)(d.h,{pipelineName:null!==(l=e.jobName)&&void 0!==l?l:j,pipelineHrefContext:c,isJob:!!g&&t,showIcon:!0,size:"small"})})}),(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:e.tags.filter(function(e){return!["dagster/schedule_name"].includes(e.key)}).map(function(e){var n=e.key,t=e.value;return(0,r.jsx)(s.V,{children:"".concat(n,": ").concat(t)},n)})})}),(0,r.jsx)("td",{children:(0,r.jsx)(h.A,{icon:(0,r.jsx)(o.JO,{name:"edit"}),target:"_blank",to:(0,f.$U)(c,"/pipeline_or_job/".concat(null!==(m=e.jobName)&&void 0!==m?m:j,"/playground/setup?").concat(u().stringify({mode:x,config:e.runConfigYaml,tags:e.tags,assetSelection:null===(a=e.assetSelection)||void 0===a?void 0:a.map(function(e){return{assetKey:{path:e.path}}})}))),children:"Open in Launchpad"})})]},n)})});return(0,r.jsx)("div",{children:(0,r.jsxs)(a.i,{style:{borderRight:"1px solid ".concat(l.wL()),tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{children:[t?"Job":"Pipeline"," name"]}),(0,r.jsx)("th",{children:"Tags"}),(0,r.jsx)("th",{children:"Configuration"})]})}),v]})})}},39818:function(e,n,t){t.d(n,{s:function(){return i}});var r=t(73235);function _templateObject(){var e=(0,r._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    jobName\n    assetSelection {\n      path\n    }\n  }\n"]);return _templateObject=function(){return e},e}var i=(0,t(60138).Ps)(_templateObject())},581:function(e,n,t){t.d(n,{a:function(){return TickStatusTag}});var r=t(58467),i=t(52322),s=t(57830),o=t(86832),a=t(25195),l=t(43180),c=t(22139),u=t(12084),d=t(99046),p=t(10952),h=t(9001),m=t(2784),f=t(56266),x=t(61935),TickStatusTag=function(e){var n=e.tick,t=e.isStuckStarted,j=(0,r._)((0,m.useState)(!1),2),g=j[0],v=j[1],b=(0,m.useMemo)(function(){var e="requestedAssetMaterializationCount"in n;switch(n.status){case x.izS.STARTED:return(0,i.jsx)(s.V,{intent:"primary",icon:t?void 0:"spinner",children:t?"In progress":"Evaluating"});case x.izS.SKIPPED:var r=(0,i.jsx)(o.m,{fillColor:a.fk(),label:e?"0 materializations requested":"0 runs requested"});if("runKeys"in n&&n.runKeys.length){var p="".concat(n.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,i.jsx)(l.u,{position:"right",content:p,children:r})}if("skipReason"in n&&n.skipReason)return(0,i.jsx)(l.u,{position:"right",content:n.skipReason,targetTagName:"div",children:r});return r;case x.izS.FAILURE:return(0,i.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,i.jsx)(s.V,{intent:"danger",children:"Failure"}),n.error?(0,i.jsx)(u.Z,{onClick:function(){v(!0)},children:"View"}):null]});case x.izS.SUCCESS:var h=e?n.requestedAssetMaterializationCount:n.runIds.length,m=(0,i.jsxs)(s.V,{intent:"success",children:[h," ",e?"materialization":"run",(0,d.I)(h,"","s")," requested"]});if("runKeys"in n&&n.runKeys.length>n.runIds.length){var f="".concat(n.runKeys.length," runs requested, but ").concat(n.runKeys.length-n.runIds.length," skipped because the runs already exist for those requested keys.");return(0,i.jsx)(l.u,{position:"right",content:f,children:m})}return m}},[t,n]);return(0,i.jsxs)(i.Fragment,{children:[b,n.error?(0,i.jsxs)(p.Vq,{isOpen:g,title:"Error",style:{width:"80vw"},children:[(0,i.jsx)(p.a7,{children:(0,i.jsx)(f.T9,{error:n.error})}),(0,i.jsx)(p.cN,{topBorder:!0,children:(0,i.jsx)(h.zx,{intent:"primary",onClick:function(){v(!1)},children:"Close"})})]}):null]})}},30682:function(e,n,t){t.d(n,{W:function(){return CheckAllBox}});var r=t(52322),i=t(43180),s=t(82585),CheckAllBox=function(e){var n=e.checkedCount,t=e.totalCount,o=e.onToggleAll;return(0,r.jsx)(i.u,{content:"".concat(n," of ").concat(t," selected"),placement:"top",children:(0,r.jsx)(s.X,{indeterminate:n>0&&n!==t,checked:n>0&&n===t,onChange:function(e){e.target instanceof HTMLInputElement&&o(n!==t)}})})}},8223:function(e,n,t){t.d(n,{g:function(){return useInstigationStatusFilter}});var r=t(52322),i=t(16292),s=t(61935),useInstigationStatusFilter=function(){return(0,i.im)({name:"Running state",icon:"toggle_off",allValues:[{value:s.ynu.RUNNING,match:["on","running"]},{value:s.ynu.STOPPED,match:["off","stopped"]}],getKey:function(e){return e},renderLabel:function(e){var n=e.value;return(0,r.jsx)("span",{children:n===s.ynu.RUNNING?"Running":"Stopped"})},getStringValue:function(e){return e}})}},77277:function(e,n,t){t.d(n,{w:function(){return findDuplicateRepoNames}});var findDuplicateRepoNames=function(e){var n=new Set,t=new Set;return e.forEach(function(e){n.has(e)?t.add(e):n.add(e)}),t}},42885:function(e,n,t){t.d(n,{N:function(){return useRepoExpansionState}});var r=t(58467),i=t(2784),s=t(34263),o=t(15282),a=t(44254),validateExpandedKeys=function(e){return Array.isArray(e)?e:[]},useRepoExpansionState=function(e,n){var t,l=(t=(0,i.useContext)(s.I).basePath,"".concat(t,":dagster.").concat(e)),c=(0,r._)((0,o.U)(l,validateExpandedKeys),2),u=c[0],d=c[1],p=(0,i.useCallback)(function(e){var n=(0,a.Uz)(e);d(function(e){var t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)})},[d]),h=(0,i.useCallback)(function(e){d(function(t){var r=new Set(t||[]);return n.forEach(function(n){e?r.delete(n):r.add(n)}),Array.from(r)})},[n,d]),m=(0,i.useMemo)(function(){var e=new Set(u);return n.filter(function(n){return!e.has(n)})},[n,u]);return(0,i.useMemo)(function(){return{expandedKeys:m,onToggle:p,onToggleAll:h}},[m,p,h])}},9901:function(e,n,t){t.d(n,{I:function(){return VirtualizedJobHeader},b:function(){return VirtualizedJobRow}});var r=t(58467),i=t(73235),s=t(82550),o=t(52322),a=t(83601),l=t(60138),c=t(16861),u=t(22139),d=t(25195),p=t(2784),h=t(47933),m=t(35505),f=t(86839),x=t(46988),j=t(38153),g=t(55237),v=t(44678),b=t(63832),S=t(37783),y=t(43180),_=t(9001),k=t(91532),w=t(54949),O=t(185),C=t(18960),R=t(61935),T=t(95388),E=t(94370),P=t(5035);function _templateObject(){var e=(0,i._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        pipelineName\n        executionPlan {\n          artifactsPersisted\n          ...ExecutionPlanToGraphFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return _templateObject=function(){return e},e}var JobMenu=function(e){var n=e.job,t=e.isAssetJob,i=e.repoAddress,s=n.runs.length?n.runs[0]:null,l={pipelineName:n.name,repositoryName:i.name,repositoryLocationName:i.location},c=(0,O.DO)(n.name),u=(0,E.D)(),d=(0,w.xz)(i.location),h=d.permissions,m=h.canLaunchPipelineReexecution,f=h.canLaunchPipelineExecution,x=d.disabledReasons,g=(0,r._)((0,a.t)(N),2),C=g[0],I=g[1].data,A=(0,p.useCallback)(function(){(null==s?void 0:s.id)&&C({variables:{runId:s.id}})},[s,C]),D=(null==I?void 0:I.pipelineRunOrError.__typename)==="Run"?null==I?void 0:I.pipelineRunOrError:null,z="loading"===t?(0,o.jsx)(v.sN,{icon:"execute",text:"Loading...",disabled:!0}):!0===t?(0,o.jsx)(v.sN,{icon:c.loading?(0,o.jsx)(b.$,{purpose:"caption-text"}):"execute",text:"Launch new run",disabled:!f,onClick:function(e){return c.onClick(l,e)}}):(0,o.jsx)(P.U,{icon:"execute",text:"Launch new run",disabled:!f,to:(0,j.jT)({repoName:i.name,repoLocation:i.location,pipelineName:n.name,isJob:n.isJob,path:"/playground"})}),F=(0,o.jsx)(v.sN,{icon:"replay",text:"Re-execute latest run",onClick:function(){return D?u(D,R.hmq.ALL_STEPS):void 0},disabled:!m||!D||!(0,T.EP)(D)}),$=(0,o.jsx)(v.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:function(){return D?u(D,R.hmq.FROM_FAILURE):void 0},disabled:!m||!D||!(0,T.VM)(D)});return(0,o.jsxs)(o.Fragment,{children:[c.launchpadElement,(0,o.jsx)(S.J,{onOpened:function(){return A()},content:(0,o.jsxs)(v.v2,{children:[(0,o.jsx)(P.U,{to:(0,j.jT)({repoName:i.name,repoLocation:i.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,o.jsx)(P.U,{to:(0,j.jT)({repoName:i.name,repoLocation:i.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),f?z:(0,o.jsx)(y.u,{content:x.canLaunchPipelineExecution,display:"block",children:z}),m?F:(0,o.jsx)(y.u,{content:x.canLaunchPipelineReexecution,display:"block",children:F}),m?$:(0,o.jsx)(y.u,{content:x.canLaunchPipelineReexecution,display:"block",children:$})]}),position:"bottom-left",children:(0,o.jsx)(_.zx,{icon:(0,o.jsx)(k.JO,{name:"expand_more"})})})]})},N=(0,l.Ps)(_templateObject(),C.$),I=t(17212),A=t(12518),D=t(98349),z=t(38917),F=t(66207),$=t(23054),L=t(55658);function VirtualizedJobRow_templateObject(){var e=(0,i._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return VirtualizedJobRow_templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  width: 100%;\n\n  > .bp4-popover2-target {\n    width: 100%;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,i._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject2=function(){return e},e}var q="1.5fr 1fr 180px 96px 80px",VirtualizedJobRow=function(e){var n=e.name,t=e.isJob,i=e.repoAddress,l=e.start,d=e.height,m=(0,r._)((0,a.t)(M,{variables:{selector:(0,x._T)(i,n)}}),2),v=m[0],b=m[1];(0,f.v5)(v),(0,g.C4)(b,g.dT);var S=b.data,y=(null==S?void 0:S.pipelineOrError.__typename)==="Pipeline"?null==S?void 0:S.pipelineOrError:void 0,_=(0,p.useMemo)(function(){return y?{schedules:y.schedules,sensors:y.sensors}:{schedules:[],sensors:[]}},[y]),k=_.schedules,w=_.sensors,O=(0,p.useMemo)(function(){if(y){var e=y.runs;if(e.length)return(0,s._)(e)}return[]},[y]);return(0,o.jsx)(L.X2,{$height:d,$start:l,children:(0,o.jsxs)(U,{border:"bottom",children:[(0,o.jsxs)(L.E5,{children:[(0,o.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,o.jsx)(h.rU,{to:(0,j.$U)(i,"/jobs/".concat(n)),children:(0,o.jsx)(c.g,{text:n})})}),(0,o.jsx)(f.HB,{children:(null==y?void 0:y.description)||""})]}),(0,o.jsx)(L.E5,{children:k.length||w.length?(0,o.jsx)(u.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,o.jsx)(B,{children:(0,o.jsx)(A.I,{schedules:k,sensors:w,repoAddress:i})})}):(0,o.jsx)(f.mq,{queryResult:b})}),(0,o.jsx)(L.E5,{children:O[0]?(0,o.jsx)(I.Z,{run:O[0],showButton:!1,showHover:!0,showSummary:!1,name:n}):(0,o.jsx)(f.mq,{queryResult:b})}),(0,o.jsx)(L.E5,{children:O.length?(0,o.jsx)(u.x,{padding:{top:4},children:(0,o.jsx)(D.JH,{jobName:n,runs:(0,s._)(O).reverse(),fade:!0})}):(0,o.jsx)(f.mq,{queryResult:b})}),(0,o.jsx)(L.E5,{children:(0,o.jsx)(u.x,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,o.jsx)(JobMenu,{job:{name:n,isJob:t,runs:O},isAssetJob:y?y.isAssetJob:"loading",repoAddress:i})})})]})})},VirtualizedJobHeader=function(){return(0,o.jsxs)(u.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:q,height:"32px",fontSize:"12px",color:d.$()},children:[(0,o.jsx)(L.qN,{children:"Name"}),(0,o.jsx)(L.qN,{children:"Schedules/sensors"}),(0,o.jsx)(L.qN,{children:"Latest run"}),(0,o.jsx)(L.qN,{children:"Run history"}),(0,o.jsx)(L.qN,{})]})},U=(0,m.ZP)(u.x).withConfig({componentId:"sc-2ba4ca3c-0"})(VirtualizedJobRow_templateObject(),q),B=m.ZP.div.withConfig({componentId:"sc-2ba4ca3c-1"})(_templateObject1()),M=(0,l.Ps)(_templateObject2(),z.$X,F.J,$.U)},72349:function(e,n,t){t.d(n,{o:function(){return VirtualizedScheduleHeader},i:function(){return VirtualizedScheduleRow}});var r=t(58467),i=t(73235),s=t(52322),o=t(83601),a=t(60138),l=t(43180),c=t(82585),u=t(22139),d=t(16861),p=t(81308),h=t(25195),m=t(37783),f=t(44678),x=t(9001),j=t(91532),g=t(2784),v=t(47933),b=t(35505),S=t(86839),y=t(46988),_=t(38153),k=t(55237),w=t(61935),O=t(17212),C=t(91230),R=t(90818),T=t(38917),E=t(66207),P=t(57830),errorDisplay=function(e,n){if(e===w.ynu.STOPPED&&0===n||e===w.ynu.RUNNING&&1===n)return null;var t=[];return e===w.ynu.RUNNING&&0===n?t.push("Schedule is set to be running, but either the scheduler is not configured or the scheduler is not running the schedule"):e===w.ynu.STOPPED&&n>0&&t.push("Schedule is set to be stopped, but the scheduler is still running the schedule"),n>0&&t.push("Duplicate cron job for schedule found."),(0,s.jsx)(m.J,{interactionKind:"hover",popoverClassName:"bp4-popover-content-sizing",position:"right",content:(0,s.jsxs)(u.x,{flex:{direction:"column",gap:8},padding:12,children:[(0,s.jsx)("strong",{children:"There are errors with this schedule."}),(0,s.jsx)("div",{children:"Errors:"}),(0,s.jsx)("ul",{children:t.map(function(e,n){return(0,s.jsx)("li",{children:e},n)})})]}),children:(0,s.jsx)(P.V,{fill:!0,interactive:!0,intent:"danger",children:"Error"})})},N=t(30301),I=t(54483),A=t(581),D=t(5035),z=t(55658);function _templateObject(){var e=(0,i._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  max-width: 100%;\n\n  .bp4-popover2-target {\n    max-width: 100%;\n\n    :focus {\n      outline: none;\n    }\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,i._)(["\n  query SingleScheduleQuery($selector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $selector) {\n      ... on Schedule {\n        id\n        name\n        pipelineName\n        description\n        scheduleState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        partitionSet {\n          id\n          name\n        }\n        ...ScheduleSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject2=function(){return e},e}var F="60px 1fr 1fr 76px 148px 210px 92px",$="1fr 1fr 76px 148px 210px 92px",VirtualizedScheduleRow=function(e){var n=e.name,t=e.repoAddress,i=e.checked,a=e.onToggleChecked,b=e.showCheckboxColumn,C=e.scheduleState,T=e.start,P=e.height,F=(0,y.Ux)(t),$=(0,r._)((0,o.t)(U,{variables:{selector:{repositoryName:t.name,repositoryLocationName:t.location,scheduleName:n}},notifyOnNetworkStatusChange:!0}),2),B=$[0],M=$[1];(0,S.v5)(B),(0,k.C4)(M,k.dT);var V=M.data,J=g.useMemo(function(){return(null==V?void 0:V.scheduleOrError.__typename)!=="Schedule"?null:V.scheduleOrError},[V]),H=!!(J&&(0,y.E8)(F,J.pipelineName)),K=J?(0,I.A)(J.cronSchedule,J.executionTimezone||"UTC"):"",Z=g.useMemo(function(){var e=C.hasStartPermission,n=C.hasStopPermission,t=C.status;return t!==w.ynu.RUNNING||n?t!==w.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this schedule"}:{disabled:!0,message:"You do not have permission to stop this schedule"}},[C]),Q=null==J?void 0:J.scheduleState.ticks[0];return(0,s.jsx)(z.X2,{$height:P,$start:T,children:(0,s.jsxs)(L,{border:"bottom",$showCheckboxColumn:b,children:[b?(0,s.jsx)(z.E5,{children:(0,s.jsx)(l.u,{canShow:Z.disabled,content:Z.message||"",placement:"top",children:(0,s.jsx)(c.X,{disabled:Z.disabled,checked:i,onChange:function(e){a&&e.target instanceof HTMLInputElement&&a({checked:e.target.checked,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}})})}):null,(0,s.jsx)(z.E5,{children:(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)("span",{style:{fontWeight:500},children:(0,s.jsx)(v.rU,{to:(0,_.$U)(t,"/schedules/".concat(n)),children:(0,s.jsx)(d.g,{text:n})})}),J?(0,s.jsx)(p.YS,{children:(0,s.jsx)(R.h,{showIcon:!0,size:"small",pipelineName:J.pipelineName,pipelineHrefContext:t,isJob:H})}):null]})}),(0,s.jsx)(z.E5,{children:J?(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(q,{style:{maxWidth:"100%"},children:(0,s.jsx)(l.u,{position:"top-left",content:J.cronSchedule,display:"block",children:(0,s.jsx)("div",{style:{color:h.Ep(),overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},title:K,children:K})})}),J.scheduleState.nextTick&&J.scheduleState.status===w.ynu.RUNNING?(0,s.jsx)(p.YS,{children:(0,s.jsxs)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},children:["Next tick:\xa0",(0,s.jsx)(N.v,{timestamp:J.scheduleState.nextTick.timestamp,timezone:J.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})]})}):null]}):(0,s.jsx)(S.mq,{queryResult:M})}),(0,s.jsx)(z.E5,{children:J?(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(E.M,{repoAddress:t,schedule:J},n),errorDisplay(J.scheduleState.status,J.scheduleState.runningCount)]}):null}),(0,s.jsx)(z.E5,{children:Q?(0,s.jsx)("div",{children:(0,s.jsx)(A.a,{tick:Q})}):(0,s.jsx)(S.mq,{queryResult:M})}),(0,s.jsx)(z.E5,{children:(null==J?void 0:J.scheduleState)&&(null==J?void 0:J.scheduleState.runs[0])?(0,s.jsx)(O.Z,{run:J.scheduleState.runs[0],name:n,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)(S.mq,{queryResult:M})}),(0,s.jsx)(z.E5,{children:(null==J?void 0:J.partitionSet)?(0,s.jsx)(m.J,{content:(0,s.jsxs)(f.v2,{children:[(0,s.jsx)(D.U,{text:"View partition history",icon:"dynamic_feed",target:"_blank",to:(0,_.$U)(t,"/".concat(H?"jobs":"pipelines","/").concat(J.pipelineName,"/partitions"))}),(0,s.jsx)(D.U,{text:"Launch partition backfill",icon:"add_circle",target:"_blank",to:(0,_.$U)(t,"/".concat(H?"jobs":"pipelines","/").concat(J.pipelineName,"/partitions"))})]}),position:"bottom-left",children:(0,s.jsx)(x.zx,{icon:(0,s.jsx)(j.JO,{name:"expand_more"})})}):(0,s.jsx)("span",{style:{color:h.$()},children:"–"})})]})})},VirtualizedScheduleHeader=function(e){var n=e.checkbox;return(0,s.jsxs)(u.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:n?F:$,height:"32px",fontSize:"12px",color:h.$()},children:[n?(0,s.jsx)(z.qN,{children:(0,s.jsx)("div",{style:{position:"relative",top:"-1px"},children:n})}):null,(0,s.jsx)(z.qN,{children:"Schedule name"}),(0,s.jsx)(z.qN,{children:"Schedule"}),(0,s.jsx)(z.qN,{children:"Running"}),(0,s.jsx)(z.qN,{children:"Last tick"}),(0,s.jsx)(z.qN,{children:"Last run"}),(0,s.jsx)(z.qN,{children:"Actions"})]})},L=(0,b.ZP)(u.x).withConfig({componentId:"sc-444911-0"})(_templateObject(),function(e){return e.$showCheckboxColumn?F:$}),q=b.ZP.div.withConfig({componentId:"sc-444911-1"})(_templateObject1()),U=(0,a.Ps)(_templateObject2(),C.dY,T.$X,E.J)},16592:function(e,n,t){t.d(n,{KF:function(){return VirtualizedSensorHeader},Rx:function(){return VirtualizedSensorRow},W_:function(){return z}});var r,i=t(87612),s=t(58467),o=t(73235),a=t(52322),l=t(83601),c=t(60138),u=t(43180),d=t(82585),p=t(22139),h=t(16861),m=t(81308),f=t(25195),x=t(57830),j=t(2784),g=t(47933),v=t(35505),b=t(86839),S=t(38153),y=t(55237),_=t(61935),k=t(17212),w=t(91230),O=t(38917),C=t(21789),R=t(20762),T=t(23054),E=t(82109),P=t(581),N=t(55658);function _templateObject(){var e=(0,o._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  query SingleSensorQuery($selector: SensorSelector!) {\n    sensorOrError(sensorSelector: $selector) {\n      ... on Sensor {\n        id\n        description\n        name\n        targets {\n          pipelineName\n        }\n        metadata {\n          assetKeys {\n            path\n          }\n        }\n        minIntervalSeconds\n        description\n        sensorState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        ...SensorSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var I="1.5fr 150px 1fr 76px 120px 148px 180px",A="60px ".concat(I),VirtualizedSensorRow=function(e){var n=e.name,t=e.repoAddress,r=e.checked,i=e.onToggleChecked,o=e.showCheckboxColumn,c=e.sensorState,v=e.start,w=e.height,O=(0,s._)((0,l.t)(F,{variables:{selector:{repositoryName:t.name,repositoryLocationName:t.location,sensorName:n}}}),2),I=O[0],A=O[1],$=(0,s._)((0,l.t)(R.Z,{variables:{sensorSelector:{repositoryName:t.name,repositoryLocationName:t.location,sensorName:n}}}),2),L=$[0],q=$[1];(0,b.v5)(j.useCallback(function(){I(),L()},[I,L])),(0,y.C4)(A,y.dT),(0,y.C4)(q,y.dT);var U=A.data,B=j.useMemo(function(){return(null==U?void 0:U.sensorOrError.__typename)!=="Sensor"?null:U.sensorOrError},[U]),M=j.useMemo(function(){var e=c.hasStartPermission,n=c.hasStopPermission,t=c.status;return t!==_.ynu.RUNNING||n?t!==_.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this sensor"}:{disabled:!0,message:"You do not have permission to stop this sensor"}},[c]),V=null==B?void 0:B.sensorState.ticks[0],J=null==B?void 0:B.sensorType,H=J?z[J]:null;return(0,a.jsx)(N.X2,{$height:w,$start:v,children:(0,a.jsxs)(D,{border:"bottom",$showCheckboxColumn:o,children:[o?(0,a.jsx)(N.E5,{children:(0,a.jsx)(u.u,{canShow:M.disabled,content:M.message||"",placement:"top",children:(0,a.jsx)(d.X,{disabled:M.disabled,checked:r,onChange:function(e){i&&e.target instanceof HTMLInputElement&&i({checked:e.target.checked,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}})})}):null,(0,a.jsx)(N.E5,{children:(0,a.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,a.jsx)("span",{style:{fontWeight:500},children:(0,a.jsx)(g.rU,{to:(0,S.$U)(t,"/sensors/".concat(n)),children:(0,a.jsx)(h.g,{text:n})})}),(0,a.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,a.jsx)(m.YS,{style:{color:f.$(),whiteSpace:"nowrap"},children:null==B?void 0:B.description})})]})}),(0,a.jsx)(N.E5,{children:(0,a.jsx)("div",{children:H?H.description?(0,a.jsx)(u.u,{content:H.description,children:(0,a.jsx)(x.V,{icon:H.icon,children:H.name})}):(0,a.jsx)(x.V,{icon:H.icon,children:H.name}):null})}),(0,a.jsx)(N.E5,{children:(0,a.jsx)(p.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:B?(0,a.jsx)(E.D,{targets:B.targets,repoAddress:t,selectionQueryResult:q,sensorType:B.sensorType}):null})}),(0,a.jsx)(N.E5,{children:B?(0,a.jsx)(p.x,{flex:{direction:"column",gap:4},children:(0,a.jsx)(T.c,{repoAddress:t,sensor:B},n)}):null}),(0,a.jsx)(N.E5,{children:B?(0,a.jsx)("div",{style:{color:f.Ep()},children:(0,C.F)(B.minIntervalSeconds)}):(0,a.jsx)(b.mq,{queryResult:A})}),(0,a.jsx)(N.E5,{children:V?(0,a.jsx)("div",{children:(0,a.jsx)(P.a,{tick:V})}):(0,a.jsx)(b.mq,{queryResult:A})}),(0,a.jsx)(N.E5,{children:(null==B?void 0:B.sensorState)&&(null==B?void 0:B.sensorState.runs[0])?(0,a.jsx)(k.Z,{run:B.sensorState.runs[0],name:n,showButton:!1,showHover:!0,showSummary:!1}):(0,a.jsx)(b.mq,{queryResult:A})})]})})},VirtualizedSensorHeader=function(e){var n=e.checkbox;return(0,a.jsxs)(p.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:n?A:I,height:"32px",fontSize:"12px",color:f.$()},children:[n?(0,a.jsx)(N.qN,{children:(0,a.jsx)("div",{style:{position:"relative",top:"-1px"},children:n})}):null,(0,a.jsx)(N.qN,{children:"Name"}),(0,a.jsx)(N.qN,{children:"Type"}),(0,a.jsx)(N.qN,{children:"Target"}),(0,a.jsx)(N.qN,{children:"Running"}),(0,a.jsx)(N.qN,{children:"Frequency"}),(0,a.jsx)(N.qN,{children:"Last tick"}),(0,a.jsx)(N.qN,{children:"Last run"})]})},D=(0,v.ZP)(p.x).withConfig({componentId:"sc-52dacd90-0"})(_templateObject(),function(e){return e.$showCheckboxColumn?A:I}),z=(r={},(0,i._)(r,_.dEY.ASSET,{name:"Asset",icon:"asset",description:"Asset sensors instigate runs when a materialization occurs"}),(0,i._)(r,_.dEY.AUTO_MATERIALIZE,{name:"Auto-materialize",icon:"materialization",description:"Auto-materialize sensors trigger runs based on auto-materialize policies defined on assets."}),(0,i._)(r,_.dEY.FRESHNESS_POLICY,{name:"Freshness policy",icon:"hourglass",description:"Freshness sensors check the freshness of assets on each tick, then perform an action in response to that status"}),(0,i._)(r,_.dEY.MULTI_ASSET,{name:"Multi-asset",icon:"multi_asset",description:"Multi asset sensors trigger job executions based on multiple asset materialization event streams"}),(0,i._)(r,_.dEY.RUN_STATUS,{name:"Run status",icon:"alternate_email",description:"Run status sensors react to run status"}),(0,i._)(r,_.dEY.STANDARD,{name:"Standard",icon:"sensors",description:null}),(0,i._)(r,_.dEY.UNKNOWN,{name:"Standard",icon:"sensors",description:null}),r),F=(0,c.Ps)(_templateObject1(),w.dY,O.$X,T.U)},86839:function(e,n,t){t.d(n,{HB:function(){return CaptionText},mq:function(){return LoadingOrNone},v5:function(){return useDelayedRowQuery},vG:function(){return RepoRow}});var r=t(73235),i=t(52322),s=t(25195),o=t(81308),a=t(2784),l=t(35505),c=t(51339),u=t(55658);function _templateObject(){var e=(0,r._)(["\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  "," {\n    color: ",";\n    white-space: nowrap;\n  }\n"]);return _templateObject=function(){return e},e}var RepoRow=function(e){var n=e.repoAddress,t=e.height,r=e.start,s=e.expanded,o=e.onToggle,a=e.onToggleAll,l=e.showLocation,d=e.rightElement;return(0,i.jsx)(u.X2,{$height:t,$start:r,children:(0,i.jsx)(c.L,{repoName:n.name,repoLocation:n.location,expanded:s,onClick:function(e){return e.getModifierState("Shift")?a(!s):o(n)},showLocation:l,rightElement:d})})},LoadingOrNone=function(e){var n=e.queryResult,t=e.noneString,r=n.called,o=n.loading,a=n.data;return(0,i.jsx)("div",{style:{color:s.$()},children:r&&(!o||a)?void 0===t?"None":t:"Loading"})},CaptionText=function(e){var n=e.children;return(0,i.jsx)(d,{children:(0,i.jsx)(o.YS,{children:n})})},d=l.ZP.div.withConfig({componentId:"sc-7ef33ee4-0"})(_templateObject(),o.YS,s.$()),useDelayedRowQuery=function(e){a.useEffect(function(){var n=setTimeout(function(){e()},100);return function(){clearTimeout(n)}},[e])}},20763:function(e,n,t){t.d(n,{h:function(){return WorkspaceHeader}});var r=t(52322),i=t(17131),s=t(22139),o=t(81308),a=t(25195),l=t(43180),c=t(9001),u=t(91532),d=t(47933),p=t(56024),h=t(38153),m=t(55237),f=t(40049),WorkspaceTabs=function(e){var n=e.repoAddress,t=e.refreshState,i=e.tab;return(0,r.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(p.mQ,{selectedTabId:i,children:[(0,r.jsx)(f.f,{id:"assets",title:"Assets",to:(0,h.$U)(n,"/assets")}),(0,r.jsx)(f.f,{id:"jobs",title:"Jobs",to:(0,h.$U)(n,"/jobs")}),(0,r.jsx)(f.f,{id:"schedules",title:"Schedules",to:(0,h.$U)(n,"/schedules")}),(0,r.jsx)(f.f,{id:"sensors",title:"Sensors",to:(0,h.$U)(n,"/sensors")}),(0,r.jsx)(f.f,{id:"graphs",title:"Graphs",to:(0,h.$U)(n,"/graphs")}),(0,r.jsx)(f.f,{id:"ops",title:"Ops",to:(0,h.$U)(n,"/ops")}),(0,r.jsx)(f.f,{id:"resources",title:"Resources",to:(0,h.$U)(n,"/resources")})]}),t?(0,r.jsx)(s.x,{padding:{bottom:8},children:(0,r.jsx)(m.xi,{refreshState:t})}):null]})},x=t(44254),j=t(33308),WorkspaceHeader=function(e){var n=e.repoAddress,t=e.tab,p=e.refreshState,h=e.queryData;return(0,r.jsx)(i.m,{title:(0,r.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(o.X6,{children:(0,r.jsx)(d.rU,{to:"/locations",style:{color:a.Ep()},children:"Deployment"})}),(0,r.jsx)(o.X6,{children:"/"}),(0,r.jsx)(o.X6,{style:{color:a.$()},children:(0,x.Uz)(n)})]}),tabs:(0,r.jsx)(WorkspaceTabs,{repoAddress:n,tab:t,refreshState:p,queryData:h}),right:(0,r.jsx)(j.s,{location:n.location,ChildComponent:function(e){var n=e.tryReload,t=e.reloading,i=e.hasReloadPermission;return(0,r.jsx)(l.u,{canShow:!i,content:i?"":j.H,useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(c.zx,{onClick:function(){return n()},loading:t,disabled:!i,icon:(0,r.jsx)(u.JO,{name:"refresh"}),outlined:!0,children:"Reload definitions"})})}})})}}}]);
//# sourceMappingURL=161.f01f7fff952583b3.js.map