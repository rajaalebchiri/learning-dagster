"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{97411:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return nA}});var r,i=t(52322),o=t(7267),s=t(58467),a=t(17131),l=t(81308),c=t(9001),u=t(22139),d=t(2784),h=t(85333),f=t(6692),p=t(73235),v=t(40794),m=t(63832),x=t(34822),g=t(25195),j=t(21106),y=t(91532),b=t(57830),w=t(17276),k=t(44678),S=t(88510),O=t(47933),_=t(35505),T=t(56266),C=t(55237),A=t(68028),E=t(46228),R=t(99322),I=t(35157),N=t(16339),P=t(58885),F=t(65885),L=t(74711),B=t(28252),z=t(71277),M=t(63386),U=t(55658),$=t(37160),D=t(38153);function _templateObject(){var e=(0,p._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,p._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,p._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,p._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n,t,r,o=e.Header,a=e.TabButton;(0,A.Px)(),(0,B.j)("Overview | Assets");var l=(0,v.a)(F.C1,{notifyOnNetworkStatusChange:!0}),c=(0,C.C4)(l,C.dT),h=d.useMemo(function(){var e,n,t;return(null===(e=l.data)||void 0===e?void 0:e.assetsOrError.__typename)==="AssetConnection"?(n=l.data.assetsOrError.nodes,t={},n.forEach(function(e){if(e.definition){var n=e.definition.groupName,r=e.definition.repository.name,i="".concat(n,"||").concat(r),o=t[i]||{groupName:n,repositoryName:r,assets:[]};o.assets.push(e),t[i]=o}}),Object.values(t)):[]},[null===(r=l.data)||void 0===r?void 0:r.assetsOrError]),f=(0,s._)((0,z.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),p=f[0],g=f[1],j=d.useMemo(function(){return""===p?h:h.filter(function(e){return(e.groupName||V).toLowerCase().includes(p.toLowerCase())||e.repositoryName.toLowerCase().includes(p.toLowerCase())})},[h,p]),y=d.useRef(null),b=(0,S.MG)({count:j.length,getScrollElement:function(){return y.current},estimateSize:function(){return 82},overscan:5}),w=b.getTotalSize(),k=b.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,i.jsx)(o,{refreshState:c}),(0,i.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,i.jsx)(a,{selected:"assets"}),(0,i.jsx)(x.oi,{value:p,onChange:function(e){g(e.target.value)},placeholder:"Filter asset groups…"})]})]}),(t=null===(n=l.data)||void 0===n?void 0:n.assetsOrError,!l.data&&l.loading?(0,i.jsx)(u.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,i.jsx)(m.$,{purpose:"page"})}):(null==t?void 0:t.__typename)==="PythonError"?(0,i.jsx)(u.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,i.jsx)(T.T9,{error:t})}):(0,i.jsx)(u.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,i.jsxs)(U.W2,{ref:y,children:[(0,i.jsx)(VirtualHeaderRow,{}),(0,i.jsx)(U.Nh,{$totalHeight:w,children:k.map(function(e){var n=e.index,t=e.key,r=e.size,o=e.start,s=j[n];return(0,i.jsx)(VirtualRow,{start:o,height:r,group:s},t)})})]})}))]})},K="5fr 1fr 1fr 1fr 1fr";function VirtualHeaderRow(){return(0,i.jsxs)(u.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:K,height:"32px",fontSize:"12px",color:g.$(),position:"sticky",top:0,zIndex:1,background:g.v8()},children:[(0,i.jsx)(U.qN,{children:"Group name"}),(0,i.jsx)(U.qN,{children:"Missing"}),(0,i.jsx)(U.qN,{children:"Failed/Overdue"}),(0,i.jsx)(U.qN,{children:"In progress"}),(0,i.jsx)(U.qN,{children:"Materialized"})]})}var V="Ungrouped Assets";function VirtualRow(e){var n,t,r=e.height,o=e.start,s=e.group,a=d.useMemo(function(){return s.assets.map(function(e){return{path:e.key.path}})},[s.assets]),l=(0,E.YP)(a).liveDataByNode,c=d.useMemo(function(){return(0,N.s)(s.assets,l)},[l,s.assets]),p=null===(t=s.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,v=(0,$.kQ)((null==p?void 0:p.name)||"",(null==p?void 0:p.location.name)||""),x=(0,j.S)(),w=x.containerProps,k=x.viewport,S=a.length!==Object.keys(l).length,_=S?"":"0";return(0,i.jsx)(U.X2,{$height:r,$start:o,children:(0,i.jsxs)(J,{border:"bottom",children:[(0,i.jsx)(Cell,{children:(0,i.jsxs)(u.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,i.jsxs)(u.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,i.jsxs)(u.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(y.JO,{name:"asset_group"}),s.groupName?(0,i.jsx)(O.rU,{style:{fontWeight:700},to:(0,D.$U)(v,"/asset-groups/".concat(s.groupName)),children:s.groupName}):V]}),(0,i.jsx)("div",(0,f._)((0,h._)({},w),{children:(0,i.jsx)(q,{maxWidth:k.width,children:(0,i.jsx)(M.b,{repoAddress:v,showRefresh:!1})})}))]}),(0,i.jsx)(u.x,{flex:{direction:"column",justifyContent:"center"},children:S?(0,i.jsx)(m.$,{purpose:"body-text"}):null})]})}),(0,i.jsx)(Cell,{children:c.missing.length?(0,i.jsx)(SelectOnHover,{assets:c.missing,getCount:function(e){var n=e.status;return n.case===R.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,i.jsx)(b.V,{intent:"none",children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,i.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(g.im()),borderRadius:"50%"}}),c.missing.length]})})}):_}),(0,i.jsx)(Cell,{children:c.failed.length?(0,i.jsx)(SelectOnHover,{assets:c.failed,getCount:function(e){var n=e.status;return n.case===R.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,i.jsx)(b.V,{intent:"danger",children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,i.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),c.failed.length]})})}):_}),(0,i.jsx)(Cell,{children:c.inprogress.length?(0,i.jsx)(SelectOnHover,{assets:c.inprogress,getCount:function(e){var n=e.status;return n.case===R.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,i.jsx)(b.V,{intent:"primary",icon:"spinner",children:c.inprogress.length})}):_}),(0,i.jsx)(Cell,{children:c.successful.length?(0,i.jsx)(SelectOnHover,{assets:c.successful,getCount:function(e){var n=e.status;return n.case===R.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,i.jsx)(b.V,{intent:"success",children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,i.jsx)("div",{style:{backgroundColor:g.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),c.successful.length]})})}):_})]})})}var J=(0,_.ZP)(u.x).withConfig({componentId:"sc-299f6f76-0"})(_templateObject(),K),Cell=function(e){var n=e.children;return(0,i.jsx)(U.E5,{style:{color:g.Ep()},children:(0,i.jsx)(u.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},q=_.ZP.div.withConfig({componentId:"sc-299f6f76-1"})(_templateObject1(),g.$(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,t=e.children,r=e.getCount,o=e.adjective;return(0,i.jsx)(W,{children:(0,i.jsx)(w.P,{items:n,itemPredicate:function(e,n){return(0,I.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=r(e);return(0,i.jsx)(H,{to:(0,L.p)(e.asset.key),target:"_blank",children:(0,i.jsx)(k.sN,{text:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,i.jsx)("div",{style:{paddingLeft:"4px"},children:(0,i.jsx)(y.JO,{name:"asset"})}),(0,i.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,I.ll)(e.asset.key)}),n&&n>0?(0,i.jsxs)(l.YS,{style:{color:g.$()},children:[(0,P._e)(n)," ",o]}):null]})},(0,I.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var W=_.ZP.div.withConfig({componentId:"sc-299f6f76-2"})(_templateObject2()),H=(0,_.ZP)(O.rU).withConfig({componentId:"sc-299f6f76-3"})(_templateObject3()),Q=t(56024),G=t(58341),Y=t(81966),X=t(40049),OverviewTabs=function(e){var n=e.refreshState,t=e.tab,r=(0,Y.dx)(),o=(0,G.I)();return(0,i.jsxs)(u.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,i.jsxs)(Q.mQ,{selectedTabId:t,children:[(0,i.jsx)(X.f,{id:"activity",title:"Activity",to:"/overview/activity"}),(0,i.jsx)(X.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,i.jsx)(X.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,i.jsx)(X.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===o?(0,i.jsx)(X.f,{id:"amp",title:(0,i.jsxs)(u.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)("div",{children:"Auto-materialize"}),r.loading?(0,i.jsx)(m.$,{purpose:"body-text"}):(0,i.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===r.paused?g.L$():g.md()}})]}),to:"/overview/automation"}):null,(0,i.jsx)(X.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,i.jsx)(X.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,i.jsx)(u.x,{padding:{bottom:8},children:(0,i.jsx)(C.xi,{refreshState:n})}):null]})},Z=t(99596),ee=t(64595),en=t(10952),et=t(75690),er=t(46988),RepoFilterButton=function(){var e=(0,d.useContext)(er.C5),n=e.allRepos,t=e.visibleRepos,r=e.toggleVisible,o=(0,s._)((0,d.useState)(!1),2),a=o[0],l=o[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(en.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:a,style:{width:"auto"},onClose:function(){return l(!1)},children:[(0,i.jsx)(en.fK,{icon:"repo",label:"Filter code locations"}),(0,i.jsx)(et.e,{options:n,onBrowse:function(){return l(!1)},onToggle:r,selected:t}),(0,i.jsx)(en.cN,{children:(0,i.jsx)(u.x,{padding:{top:8},children:(0,i.jsx)(c.zx,{intent:"none",onClick:function(){return l(!1)},children:"Done"})})})]}),(0,i.jsx)(c.zx,{outlined:!0,icon:(0,i.jsx)(y.JO,{name:"folder"}),rightIcon:(0,i.jsx)(y.JO,{name:"expand_more"}),onClick:function(){return l(!0)},children:"".concat(t.length," of ").concat(n.length)})]})},ei=t(83568),eo=t(65435),es=t(15282),useHourWindow=function(e){var n=(0,d.useCallback)(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,s._)((0,es.U)("dagster.run-timeline-hour-window",n),2),r=t[0],i=t[1],o=(0,d.useCallback)(function(n){i(n||e)},[e,i]);return(0,d.useMemo)(function(){return[r,o]},[r,o])},ea=t(87612),el=t(82550),ec=t(60138),eu=t(6315),ed=t(38917),eh=t(16413),ef=t(61935);function NextTick_templateObject(){var e=(0,p._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var ep=(0,ec.Ps)(NextTick_templateObject()),ev=t(44254);function useRunsForTimeline_templateObject(){var e=(0,p._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,s._)(e,2),r=t[0],i=t[1],o=r/1e3,a=i/1e3,l=(0,v.a)(em,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,f._)((0,h._)({},n),{statuses:[ef.VOA.CANCELING,ef.VOA.STARTED],createdBefore:a}),terminatedFilter:(0,f._)((0,h._)({},n),{statuses:Array.from(eu.cv),createdBefore:a,updatedAfter:o}),tickCursor:o,ticksUntil:a}}),c=l.data,u=l.previousData,p=l.loading&&!c,m=c||u||{},x=m.unterminated,g=m.terminated,j=m.workspaceOrError,y=(0,d.useMemo)(function(){var e={},n=Date.now();return(0,el._)((null==x?void 0:x.__typename)==="Runs"?x.results:[]).concat((0,el._)((null==g?void 0:g.__typename)==="Runs"?g.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,eh.a)({start:r,end:i},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var o=makeJobKey({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[o]=(0,el._)(e[o]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[i,x,g,r]),b=(0,d.useMemo)(function(){if(!j||"Workspace"!==j.__typename)return[];var e=[],n=!0,t=!1,o=void 0;try{for(var s,a=j.locationEntries[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)!function(){var n=s.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var t=Date.now(),o=!0,a=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)!function(){var o=u.value,s=(0,$.kQ)(o.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,h=o.pipelines[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var n=d.value,a=(o.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,h=void 0;try{for(var f,p=a[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)!function(){var e=f.value;e.scheduleState.status===ef.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var o=n.timestamp,s=1e3*o;s>t&&(0,eh.a)({start:r,end:i},{start:s,end:s})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(o),status:"SCHEDULED",startTime:s,endTime:s+5e3})})}()}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}var v=(0,I.pv)(n.name),m=makeJobKey(s,n.name),x=v?"Ad hoc materializations":n.name,g=y[m]||[];if(l.length||g.length){var j=(0,el._)(g).concat((0,el._)(l));if(v){var b,w=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===s});if(w)return(b=w.runs).push.apply(b,(0,el._)(j))}e.push({key:m,jobName:x,jobType:v?"asset":"job",repoAddress:s,path:(0,D.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,el._)(g).concat((0,el._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}()}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}}}()}catch(e){t=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw o}}var l=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,f._)((0,h._)({},e),(0,ea._)({},n.key,(t=Math).min.apply(t,(0,el._)(r))))},{});return e.sort(function(e,n){return l[e.key]-l[n.key]})},[j,y,r,i]);return(0,d.useMemo)(function(){return{jobs:b,initialLoading:p,queryData:l}},[p,b,l])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,ev.Uz)(e))},em=(0,ec.Ps)(useRunsForTimeline_templateObject(),ed.$X,ep),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,t=e.TabButton;(0,A.Px)(),(0,B.j)("Overview | Timeline");var r=(0,ei.s)("OverviewTimelineRoot"),o=d.useContext(er.C5),a=o.allRepos,l=o.visibleRepos,h=(0,s._)(useHourWindow("12"),2),f=h[0],p=h[1],v=(0,s._)(d.useState(function(){return Date.now()}),2),m=v[0],g=v[1],j=(0,s._)(d.useState(function(){return 0}),2),y=j[0],b=j[1],w=(0,s._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),k=w[0],S=w[1];d.useEffect(function(){g(Date.now());var e=setInterval(function(){g(Date.now())},6e4);return function(){clearInterval(e)}},[f]);var O=d.useCallback(function(){b(function(e){return e-hourWindowToOffset(f)})},[f]),_=d.useCallback(function(){b(function(e){return e+hourWindowToOffset(f)})},[f]),T=d.useCallback(function(){b(0)},[]),E=d.useMemo(function(){return[m-36e5*Number(f)+y,m+36e5+y]},[f,m,y]),R=useRunsForTimeline(E),I=R.jobs,N=R.initialLoading,P=R.queryData,F=(0,C.C4)(P,C.dT);d.useEffect(function(){N||r.endTrace()},[N,r]);var L=d.useMemo(function(){var e=k.toLocaleLowerCase().trim(),n=l.flatMap(function(n){var t=(0,$.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(t,e.name)})});return new Set(n)},[l,k]),M=d.useMemo(function(){return I.filter(function(e){var n=e.key;return L.has(n)})},[I,L]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n,{refreshState:F}),(0,i.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[(0,i.jsx)(t,{selected:"timeline"}),a.length>1&&(0,i.jsx)(RepoFilterButton,{}),(0,i.jsx)(x.oi,{icon:"search",value:k,onChange:function(e){return S(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,i.jsxs)(u.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,i.jsx)(Z.h,{activeItems:new Set([f]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return p(e)}}),(0,i.jsxs)(u.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,i.jsx)(c.zx,{onClick:O,children:"←"}),(0,i.jsx)(c.zx,{onClick:T,children:"Now"}),(0,i.jsx)(c.zx,{onClick:_,children:"→"})]})]})]}),(0,i.jsx)(ee.S,{region:"timeline",children:(0,i.jsx)(eo.q,{loading:N,range:E,jobs:M})})]})},ex=t(46928),OverviewActivityRoot=function(){(0,A.Px)(),(0,B.j)("Overview | Activity");var e=d.useCallback(function(e){var n=e.refreshState;return(0,i.jsx)(a.m,{title:(0,i.jsx)(l.X6,{children:"Overview"}),tabs:(0,i.jsx)(OverviewTabs,{tab:"activity",refreshState:n})})},[]),n=(0,s._)((0,es.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],r=n[1],h=d.useCallback(function(e){var n=e.selected;return t!==n&&r(n),(0,i.jsxs)(c.zH,{children:[(0,i.jsx)(ex.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,i.jsx)(ex.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]})},[t,r]);return(0,i.jsx)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,i.jsxs)(o.rs,{children:[(0,i.jsx)(o.AW,{path:"/overview/activity/assets",children:(0,i.jsx)(OverviewAssetsRoot,{Header:e,TabButton:h})}),(0,i.jsx)(o.AW,{path:"/overview/activity/timeline",children:(0,i.jsx)(OverviewTimelineRoot,{Header:e,TabButton:h})}),(0,i.jsx)(o.AW,{path:"*",render:d.useCallback(function(){return"timeline"===t?(0,i.jsx)(o.l_,{to:"/overview/activity/timeline"}):(0,i.jsx)(o.l_,{to:"/overview/activity/assets"})},[t])})]})})},eg=t(92364),ej=t(43180),ey=t(68884),eb=t(77277),ew=t(42885),ek=t(9901),eS=t(86839),OverviewJobsTable=function(e){var n=e.repos,t=(0,d.useRef)(null),r=(0,d.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ev.Uz)(n)})},[n]),o=(0,ew.N)(ey.y,r),s=o.expandedKeys,a=o.onToggle,l=o.onToggleAll,c=(0,d.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var i=(0,ev.Uz)(t);s.includes(i)&&r.forEach(function(n){var r=n.isJob,i=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:i})})}),e},[n,s]),u=(0,eb.w)(n.map(function(e){return e.repoAddress.name})),h=(0,S.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=h.getTotalSize(),p=h.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ek.I,{}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(U.W2,{ref:t,children:(0,i.jsx)(U.Nh,{$totalHeight:f,children:p.map(function(e){var n=e.index,t=e.key,r=e.size,o=e.start,d=c[n];return"header"===d.type?(0,i.jsx)(eS.vG,{repoAddress:d.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,ev.Uz)(d.repoAddress)),showLocation:u.has(d.repoAddress.name),rightElement:(0,i.jsx)(ej.u,{content:1===d.jobCount?"1 job":"".concat(d.jobCount," jobs"),placement:"top",children:(0,i.jsx)(b.V,{children:d.jobCount})})},t):(0,i.jsx)(ek.b,{name:d.name,isJob:d.isJob,repoAddress:d.repoAddress,height:r,start:o},t)})})})})]})},sortRepoBuckets=function(e){return(0,el._)(e).sort(function(e,n){var t=(0,ev.Uz)(e.repoAddress),r=(0,ev.Uz)(n.repoAddress);return t.localeCompare(r)})},visibleRepoKeys=function(e){return new Set(e.map(function(e){return(0,ev.Uz)((0,$.kQ)(e.repository.name,e.repositoryLocation.name))}))},eO=t(91195),useDelayedState=function(e){var n=(0,s._)((0,d.useState)(!1),2),t=n[0],r=n[1];return(0,d.useEffect)(function(){var n=setTimeout(function(){return r(!0)},e);return function(){return clearTimeout(n)}},[e]),t},SearchInputSpinner=function(e){var n=e.tooltipContent;return useDelayedState(2e3)?(0,i.jsx)(u.x,{margin:{top:1},children:(0,i.jsx)(ej.u,{placement:"top",canShow:!!n,content:n||"",children:(0,i.jsx)(m.$,{purpose:"body-text"})})}):null};function OverviewJobsRoot_templateObject(){var e=(0,p._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return OverviewJobsRoot_templateObject=function(){return e},e}var OverviewJobsRoot=function(){(0,A.Px)(),(0,B.j)("Overview | Jobs");var e=(0,d.useContext)(er.C5),n=e.allRepos,t=e.visibleRepos,r=e.loading,o=(0,s._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),c=o[0],h=o[1],f=n.length,p=(0,v.a)(e_,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),j=p.data,y=p.loading,b=(0,C.C4)(p,C.dT),w=(0,d.useMemo)(function(){var e=visibleRepoKeys(t);return buildBuckets(j).filter(function(n){var t=n.repoAddress;return e.has((0,ev.Uz)(t))})},[j,t]),k=c.trim().toLocaleLowerCase(),S=k.length>0,O=(0,d.useMemo)(function(){var e=k.toLocaleLowerCase();return w.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[w,k]),_=r&&!f||y&&!j;return(0,i.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(l.X6,{children:"Overview"}),tabs:(0,i.jsx)(OverviewTabs,{tab:"jobs",refreshState:b})}),(0,i.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[f>1?(0,i.jsx)(RepoFilterButton,{}):null,(0,i.jsx)(x.oi,{icon:"search",value:c,rightElement:_?(0,i.jsx)(SearchInputSpinner,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return h(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),y&&!f?(0,i.jsx)(u.x,{padding:64,children:(0,i.jsx)(m.$,{purpose:"page"})}):function(){if(y&&!j)return(0,i.jsx)(u.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(m.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:g.$()},children:"Loading jobs…"})]})});var e=n.length>t.length;return O.length?(0,i.jsx)(OverviewJobsTable,{repos:O}):S?(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No matching jobs",description:e?(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:c})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:c})," were found in your definitions"]})})}):(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.pipelines,x=(0,$.kQ)(v,l.name),g=m.filter(function(e){var n=e.name;return!(0,I.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});g.length>0&&t.push({repoAddress:x,jobs:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},e_=(0,ec.Ps)(OverviewJobsRoot_templateObject(),eO.B),eT=t(98319),OverviewResourcesTable=function(e){var n=e.repos,t=(0,d.useRef)(null),r=(0,d.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ev.Uz)(n)})},[n]),o=(0,ew.N)(ey.y,r),s=o.expandedKeys,a=o.onToggle,l=o.onToggleAll,c=(0,d.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var i=(0,ev.Uz)(t);s.includes(i)&&r.forEach(function(n){e.push((0,h._)({type:"resource",repoAddress:t},n))})}),e},[n,s]),u=(0,eb.w)(n.map(function(e){return e.repoAddress.name})),f=(0,S.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),p=f.getTotalSize(),v=f.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eT.f,{}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(U.W2,{ref:t,children:(0,i.jsx)(U.Nh,{$totalHeight:p,children:v.map(function(e){var n=e.index,t=e.key,r=e.size,o=e.start,d=c[n];return"header"===d.type?(0,i.jsx)(eS.vG,{repoAddress:d.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,ev.Uz)(d.repoAddress)),showLocation:u.has(d.repoAddress.name),rightElement:(0,i.jsx)(ej.u,{content:1===d.resourceCount?"1 resource":"".concat(d.resourceCount," resources"),placement:"top",children:(0,i.jsx)(b.V,{children:d.resourceCount})})},t):(0,i.jsx)(eT.K,(0,h._)({height:r,start:o},d),t)})})})})]})},eC=t(76588);function OverviewResourcesRoot_templateObject(){var e=(0,p._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,A.Px)(),(0,B.j)("Overview | Resources");var e=(0,d.useContext)(er.C5),n=e.allRepos,t=e.visibleRepos,r=e.loading,o=(0,s._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),c=o[0],h=o[1],f=n.length,p=(0,v.a)(eA,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),j=p.data,y=p.loading,b=(0,C.C4)(p,C.dT),w=(0,d.useMemo)(function(){var e=visibleRepoKeys(t);return OverviewResourcesRoot_buildBuckets(j).filter(function(n){var t=n.repoAddress;return e.has((0,ev.Uz)(t))})},[j,t]),k=c.trim().toLocaleLowerCase(),S=k.length>0,O=(0,d.useMemo)(function(){var e=k.toLocaleLowerCase();return w.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[w,k]),_=r&&!f||y&&!j;return(0,i.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(l.X6,{children:"Overview"}),tabs:(0,i.jsx)(OverviewTabs,{tab:"resources",refreshState:b})}),(0,i.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[f>1?(0,i.jsx)(RepoFilterButton,{}):null,(0,i.jsx)(x.oi,{icon:"search",value:c,rightElement:_?(0,i.jsx)(SearchInputSpinner,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return h(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),y&&!f?(0,i.jsx)(u.x,{padding:64,children:(0,i.jsx)(m.$,{purpose:"page"})}):function(){if(y&&!j)return(0,i.jsx)(u.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(m.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:g.$()},children:"Loading resources…"})]})});var e=n.length>t.length;return O.length?(0,i.jsx)(OverviewResourcesTable,{repos:O}):S?(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No matching resources",description:e?(0,i.jsxs)("div",{children:["No resources matching ",(0,i.jsx)("strong",{children:c})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No resources matching ",(0,i.jsx)("strong",{children:c})," were found in your definitions"]})})}):(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},OverviewResourcesRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.allTopLevelResourceDetails,x=(0,$.kQ)(v,l.name);m.length>0&&t.push({repoAddress:x,resources:m})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},eA=(0,ec.Ps)(OverviewResourcesRoot_templateObject(),eO.B,eC.L),eE=t(2281),eR=t(72855),eI=t(157),eN=t(72349),OverviewScheduleTable=function(e){var n=e.repos,t=e.headerCheckbox,r=e.checkedKeys,o=e.onToggleCheckFactory,s=d.useRef(null),a=d.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,ev.Uz)(n)})},[n]),l=(0,ew.N)(ey.y,a),c=l.expandedKeys,u=l.onToggle,h=l.onToggleAll,f=d.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.schedules;e.push({type:"header",repoAddress:t,scheduleCount:r.length});var i=(0,ev.Uz)(t);c.includes(i)&&r.forEach(function(n){e.push({type:"schedule",repoAddress:t,schedule:n})})}),e},[n,c]),p=(0,eb.w)(n.map(function(e){return e.repoAddress.name})),v=(0,S.MG)({count:f.length,getScrollElement:function(){return s.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),m=v.getTotalSize(),x=v.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN.o,{checkbox:t}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(U.W2,{ref:s,children:(0,i.jsx)(U.Nh,{$totalHeight:m,children:x.map(function(e){var n=e.index,s=e.key,a=e.size,l=e.start,d=f[n];if("header"===d.type)return(0,i.jsx)(eS.vG,{repoAddress:d.repoAddress,height:a,start:l,onToggle:u,onToggleAll:h,expanded:c.includes((0,ev.Uz)(d.repoAddress)),showLocation:p.has(d.repoAddress.name),rightElement:(0,i.jsx)(ej.u,{content:1===d.scheduleCount?"1 schedule":"".concat(d.scheduleCount," schedules"),placement:"top",children:(0,i.jsx)(b.V,{children:d.scheduleCount})})},s);var v=(0,eI.g)(d.repoAddress,d.schedule.name);return(0,i.jsx)(eN.i,{name:d.schedule.name,scheduleState:d.schedule.scheduleState,showCheckboxColumn:!!t,checked:r.has(v),onToggleChecked:o(v),repoAddress:d.repoAddress,height:a,start:l},s)})})})})]})},eP=t(73689),eF=t(31761),eL=t(30894),eB=t(24808),ez=t(84826),eM=t(30682),eU=t(77376),e$=t(54242),eD=t(8223);function OverviewSchedulesRoot_templateObject(){var e=(0,p._)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                  scheduleState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return OverviewSchedulesRoot_templateObject=function(){return e},e}var OverviewSchedulesRoot=function(){(0,A.Px)(),(0,B.j)("Overview | Schedules");var e=(0,d.useContext)(er.C5),n=e.allRepos,t=e.visibleRepos,r=e.loading,o=n.length,c=(0,s._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),p=c[0],j=c[1],y=(0,e$.A)(),b=(0,eD.g)(),w=(0,d.useMemo)(function(){return[y,b]},[y,b]),k=(0,eU.m)({filters:w}),S=k.button,O=k.activeFiltersJsx,_=(0,v.a)(eK,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),T=_.data,E=_.loading,R=(0,C.C4)(_,C.dT),I=(0,d.useMemo)(function(){var e=visibleRepoKeys(t);return OverviewSchedulesRoot_buildBuckets(T).filter(function(n){var t=n.repoAddress;return e.has((0,ev.Uz)(t))})},[T,t]),N=b.state,P=(0,d.useMemo)(function(){return I.map(function(e){var n=e.schedules,t=(0,eE._)(e,["schedules"]);return(0,f._)((0,h._)({},t),{schedules:N.size?n.filter(function(e){var n=e.scheduleState;return N.has(n.status)}):n})})},[I,N]),F=p.trim().toLocaleLowerCase(),L=F.length>0,M=(0,d.useMemo)(function(){var e=F.toLocaleLowerCase();return P.map(function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.schedules.length>0})},[P,F]),U=(0,d.useMemo)(function(){return M.some(function(e){return e.schedules.length>0})},[M]),$=(0,d.useMemo)(function(){return I.map(function(e){var n=e.repoAddress;return e.schedules.filter(function(e){var n=e.scheduleState;return(0,eL.i)(n)}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})}).flat()},[I]),D=(0,d.useMemo)(function(){return $.map(function(e){var n=e.repoAddress,t=e.scheduleName;return(0,eI.g)(n,t)})},[$]),K=(0,s._)((0,eP.a)(D),2),V=K[0].checkedIds,J=K[1],q=J.onToggleFactory,W=J.onToggleAll,H=(0,d.useMemo)(function(){var e=new Set(M.map(function(e){var n=e.repoAddress;return e.schedules.map(function(e){var t=e.name;return(0,eI.g)(n,t)})}).flat());return D.filter(function(n){return e.has(n)})},[D,M]),Q=(0,d.useMemo)(function(){var e=new Set(H.filter(function(e){return V.has(e)}));return $.filter(function(n){var t=n.repoAddress,r=n.scheduleName;return e.has((0,eI.g)(t,r))})},[H,$,V]),G=D.length>0,Y=Q.length,X=r&&!o||E&&!T;return(0,i.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(l.X6,{children:"Overview"}),tabs:(0,i.jsx)(OverviewTabs,{tab:"schedules",refreshState:R})}),(0,i.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(u.x,{flex:{direction:"row",gap:12},children:[S,(0,i.jsx)(x.oi,{icon:"search",value:p,rightElement:X?(0,i.jsx)(SearchInputSpinner,{tooltipContent:"Loading schedules…"}):void 0,onChange:function(e){j(e.target.value),W(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,i.jsx)(ej.u,{content:"You do not have permission to start or stop these schedules",canShow:U&&!G,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,i.jsx)(eB._,{schedules:Q,onDone:function(){return R.refetch()}})})]}),O.length?(0,i.jsx)(u.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:O}):null,E&&!o?(0,i.jsx)(u.x,{padding:64,children:(0,i.jsx)(m.$,{purpose:"page"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ez.K,{daemonHealth:null==T?void 0:T.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(E&&!T)return(0,i.jsx)(u.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(m.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:g.$()},children:"Loading schedules…"})]})});var e=n.length>t.length;return M.length?(0,i.jsx)(OverviewScheduleTable,{headerCheckbox:G?(0,i.jsx)(eM.W,{checkedCount:Y,totalCount:H.length,onToggleAll:W}):void 0,repos:M,checkedKeys:V,onToggleCheckFactory:q}):L?(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No matching schedules",description:e?(0,i.jsxs)("div",{children:["No schedules matching ",(0,i.jsx)("strong",{children:p})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No schedules matching ",(0,i.jsx)("strong",{children:p})," were found in your definitions"]})})}):(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No schedules",description:e?"No matching schedules were found in the selected code locations":"No matching schedules were found in your definitions"})})}()]})]})},OverviewSchedulesRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.schedules,x=(0,$.kQ)(v,l.name),g=m.map(function(e){var n=e.name,t=e.scheduleState;return{name:n,scheduleState:t}});g.length>0&&t.push({repoAddress:x,schedules:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},eK=(0,ec.Ps)(OverviewSchedulesRoot_templateObject(),eR.i,eO.B,eF.O),eV=t(22478),eJ=t(16592),OverviewSensorTable=function(e){var n=e.repos,t=e.headerCheckbox,r=e.checkedKeys,o=e.onToggleCheckFactory,s=d.useRef(null),a=d.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,ev.Uz)(n)})},[n]),l=(0,ew.N)(ey.y,a),c=l.expandedKeys,u=l.onToggle,h=l.onToggleAll,f=d.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.sensors;e.push({type:"header",repoAddress:t,sensorCount:r.length});var i=(0,ev.Uz)(t);c.includes(i)&&r.forEach(function(n){e.push({type:"sensor",repoAddress:t,sensor:n})})}),e},[n,c]),p=(0,eb.w)(n.map(function(e){return e.repoAddress.name})),v=(0,S.MG)({count:f.length,getScrollElement:function(){return s.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),m=v.getTotalSize(),x=v.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eJ.KF,{checkbox:t}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(U.W2,{ref:s,children:(0,i.jsx)(U.Nh,{$totalHeight:m,children:x.map(function(e){var n=e.index,s=e.key,a=e.size,l=e.start,d=f[n];if("header"===d.type)return(0,i.jsx)(eS.vG,{repoAddress:d.repoAddress,height:a,start:l,onToggle:u,onToggleAll:h,expanded:c.includes((0,ev.Uz)(d.repoAddress)),showLocation:p.has(d.repoAddress.name),rightElement:(0,i.jsx)(ej.u,{content:1===d.sensorCount?"1 sensor":"".concat(d.sensorCount," sensors"),placement:"top",children:(0,i.jsx)(b.V,{children:d.sensorCount})})},s);var v=(0,eV.x)(d.repoAddress,d.sensor.name);return(0,i.jsx)(eJ.Rx,{name:d.sensor.name,sensorState:d.sensor.sensorState,showCheckboxColumn:!!t,checked:r.has(v),onToggleChecked:o(v),repoAddress:d.repoAddress,height:a,start:l},s)})})})})]})},eq=t(67802),eW=t(56692),eH=t(16292);function OverviewSensorsRoot_templateObject(){var e=(0,p._)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                  sensorType\n                  sensorState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return OverviewSensorsRoot_templateObject=function(){return e},e}function toSetFilterValue(e){var n=eJ.W_[e].name;return{label:n,value:{type:e,label:n},match:[n]}}var eQ=(r={},(0,ea._)(r,ef.dEY.ASSET,toSetFilterValue(ef.dEY.ASSET)),(0,ea._)(r,ef.dEY.AUTO_MATERIALIZE,toSetFilterValue(ef.dEY.AUTO_MATERIALIZE)),(0,ea._)(r,ef.dEY.FRESHNESS_POLICY,toSetFilterValue(ef.dEY.FRESHNESS_POLICY)),(0,ea._)(r,ef.dEY.MULTI_ASSET,toSetFilterValue(ef.dEY.MULTI_ASSET)),(0,ea._)(r,ef.dEY.RUN_STATUS,toSetFilterValue(ef.dEY.RUN_STATUS)),(0,ea._)(r,ef.dEY.STANDARD,toSetFilterValue(ef.dEY.STANDARD)),r),eG=Object.values(eQ),OverviewSensorsRoot=function(){(0,A.Px)(),(0,B.j)("Overview | Sensors");var e=(0,d.useContext)(er.C5),n=e.allRepos,t=e.visibleRepos,r=e.loading,o=n.length,c=(0,s._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),p=c[0],j=c[1],y=(0,e$.A)(),b=(0,eD.g)(),w=(0,s._)((0,d.useState)(function(){return new Set}),2),k=w[0],S=w[1],O=(0,eH.im)({name:"Sensor type",allValues:eG,icon:"sensors",getStringValue:function(e){return e.label},state:(0,d.useMemo)(function(){return new Set(Array.from(k).map(function(e){return eQ[e].value}))},[k]),renderLabel:function(e){var n=e.value;return(0,i.jsx)("span",{children:n.label})},onStateChanged:function(e){S(new Set(Array.from(e).map(function(e){return e.type})))}}),_=(0,d.useMemo)(function(){return[y,b,O]},[y,b,O]),T=(0,eU.m)({filters:_}),E=T.button,R=T.activeFiltersJsx,I=(0,v.a)(eY,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),N=I.data,P=I.loading,F=(0,C.C4)(I,C.dT),L=(0,d.useMemo)(function(){var e=visibleRepoKeys(t);return OverviewSensorsRoot_buildBuckets(N).filter(function(n){var t=n.repoAddress;return e.has((0,ev.Uz)(t))})},[N,t]),M=b.state,U=(0,d.useMemo)(function(){return L.map(function(e){var n=e.sensors,t=(0,eE._)(e,["sensors"]);return(0,f._)((0,h._)({},t),{sensors:n.filter(function(e){var n=e.sensorState,t=e.sensorType;return(!M.size||!!M.has(n.status))&&(!k.size||!!k.has(t))})})})},[L,M,k]),$=p.trim().toLocaleLowerCase(),D=$.length>0,K=(0,d.useMemo)(function(){var e=$.toLocaleLowerCase();return U.map(function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.sensors.length>0})},[U,$]),V=(0,d.useMemo)(function(){return K.some(function(e){return e.sensors.length>0})},[K]),J=(0,d.useMemo)(function(){return L.map(function(e){var n=e.repoAddress;return e.sensors.filter(function(e){var n=e.sensorState;return(0,eL.i)(n)}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})}).flat()},[L]),q=(0,d.useMemo)(function(){return J.map(function(e){var n=e.repoAddress,t=e.sensorName;return(0,eV.x)(n,t)})},[J]),W=(0,s._)((0,eP.a)(q),2),H=W[0].checkedIds,Q=W[1],G=Q.onToggleFactory,Y=Q.onToggleAll,X=(0,d.useMemo)(function(){var e=new Set(K.map(function(e){var n=e.repoAddress;return e.sensors.map(function(e){var t=e.name;return(0,eV.x)(n,t)})}).flat());return q.filter(function(n){return e.has(n)})},[q,K]),Z=(0,d.useMemo)(function(){var e=new Set(X.filter(function(e){return H.has(e)}));return J.filter(function(n){var t=n.repoAddress,r=n.sensorName;return e.has((0,eV.x)(t,r))})},[X,J,H]),ee=q.length>0,en=Z.length,et=r&&!o||P&&!N;return(0,i.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(l.X6,{children:"Overview"}),tabs:(0,i.jsx)(OverviewTabs,{tab:"sensors",refreshState:F})}),(0,i.jsxs)(u.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,i.jsxs)(u.x,{flex:{direction:"row",gap:12},children:[E,(0,i.jsx)(x.oi,{icon:"search",value:p,rightElement:et?(0,i.jsx)(SearchInputSpinner,{tooltipContent:"Loading sensors…"}):void 0,onChange:function(e){return j(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,i.jsx)(ej.u,{content:"You do not have permission to start or stop these schedules",canShow:V&&!ee,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,i.jsx)(eq.b,{sensors:Z,onDone:function(){return F.refetch()}})})]}),R.length?(0,i.jsx)(u.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:R}):null,P&&!o?(0,i.jsx)(u.x,{padding:64,children:(0,i.jsx)(m.$,{purpose:"page"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eW.F,{daemonHealth:null==N?void 0:N.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(P&&!N)return(0,i.jsx)(u.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(m.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:g.$()},children:"Loading sensors…"})]})});var e=n.length>t.length;return K.length?(0,i.jsx)(OverviewSensorTable,{headerCheckbox:ee?(0,i.jsx)(eM.W,{checkedCount:en,totalCount:X.length,onToggleAll:Y}):void 0,repos:K,checkedKeys:H,onToggleCheckFactory:G}):D?(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No matching sensors",description:e?(0,i.jsxs)("div",{children:["No sensors matching ",(0,i.jsx)("strong",{children:p})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No sensors matching ",(0,i.jsx)("strong",{children:p})," were found in your definitions"]})})}):(0,i.jsx)(u.x,{padding:{top:20},children:(0,i.jsx)(eg.t,{icon:"search",title:"No sensors",description:e?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})}()]})]})},OverviewSensorsRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.sensors,x=(0,$.kQ)(v,l.name);m.length>0&&t.push({repoAddress:x,sensors:m})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},eY=(0,ec.Ps)(OverviewSensorsRoot_templateObject(),eR.i,eO.B,eF.O),eX=t(81862),eZ=t(22970),e0=t(83601),e1=t(28888),e2=t(9676),e6=t(54266),e4=t(82585),e3=t(89102),e8=t(3490),e5=t(80428),e9=t(22370),e7=t(65767),InstanceAutomaterializationEvaluationHistoryTable=function(e){var n,t,r=e.setSelectedTick,o=e.setTableView,a=e.setTimerange,l=e.setParentStatuses,c=(0,s._)((0,z.q)({queryKey:"statuses",decode:(0,d.useCallback)(function(e){var n=e.statuses;return new Set(n?JSON.parse(n):[ef.izS.STARTED,ef.izS.SUCCESS,ef.izS.FAILURE,ef.izS.SKIPPED])},[]),encode:(0,d.useCallback)(function(e){return{statuses:JSON.stringify(Array.from(e))}},[])}),2),u=c[0],h=c[1],f=(0,e7.l)({query:e3.X,variables:{statuses:(0,d.useMemo)(function(){return Array.from(u)},[u])},nextCursorForResult:function(e){var n,t=e.autoMaterializeTicks;if(t.length)return null===(n=t[14])||void 0===n?void 0:n.id},getResultArray:function(e){return(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[]},pageSize:15}),p=f.queryResult,v=f.paginationProps;return(0,C.C4)(p,1e4,!v.hasPrevCursor),(0,d.useEffect)(function(){if(v.hasPrevCursor){var e=null===(n=p.data)||void 0===n?void 0:n.autoMaterializeTicks;if(e&&e.length){var n,t,r,i=null===(t=e[e.length-1])||void 0===t?void 0:t.timestamp,o=null===(r=e[0])||void 0===r?void 0:r.endTimestamp;i&&o&&a([i,o])}}else a(void 0)},[v.hasPrevCursor,null===(n=p.data)||void 0===n?void 0:n.autoMaterializeTicks,a]),(0,d.useEffect)(function(){v.hasPrevCursor?l(Array.from(u)):l(void 0)},[v.hasPrevCursor,l,u]),(0,i.jsx)(e9.V,{loading:p.loading,ticks:(null===(t=p.data)||void 0===t?void 0:t.autoMaterializeTicks)||[],paginationProps:v,setSelectedTick:r,setStatuses:h,setTableView:o,statuses:u})},ne=t(75168),nn=t(54949),nt=t(46032),nr=t(90437),ni=t(85888),AutomaterializationRoot=function(){var e=(0,G.I)();switch(e){case"unknown":return(0,i.jsx)("div",{});case"has-global-amp":return(0,i.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,i.jsx)(o.l_,{to:"/overview/sensors"});default:(0,nt.UT)(e)}},GlobalAutomaterializationRoot=function(){var e,n,fetchData=function(){p({variables:T})};(0,A.Px)();var t=(0,Y.dx)(),r=(0,ne.p)(),o=(0,nn.WB)().permissions,c=(void 0===o?{}:o).canToggleAutoMaterialize,f=(0,s._)((0,e0.t)(e3.X),2),p=f[0],v=f[1],x=(0,s._)((0,d.useState)(!1),2),j=x[0],y=x[1],b=(0,s._)((0,d.useState)(void 0),2),w=b[0],k=b[1],S=(0,s._)((0,d.useState)(void 0),2),O=S[0],_=S[1],T=(0,d.useMemo)(function(){return O||w?{afterTimestamp:null==O?void 0:O[0],beforeTimestamp:null==O?void 0:O[1],statuses:w}:{afterTimestamp:(Date.now()-12e5)/1e3}},[w,O]);(0,d.useLayoutEffect)(fetchData,[T]),(0,C.C4)(v,2e3,!j&&!O&&!w,fetchData);for(var E=(0,s._)((0,d.useState)(null),2),R=E[0],I=E[1],N=(0,s._)((0,z.q)((0,d.useMemo)(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),P=N[0],F=N[1],L=null!==(n=v.data)&&void 0!==n?n:v.previousData,B=L?L.autoMaterializeTicks.map(function(e){return"".concat(e.id,":").concat(e.status)}):[];B.length<100;)B.push("");var M=(0,d.useMemo)(function(){var e,n=null==L?void 0:L.autoMaterializeTicks;return null!==(e=null==n?void 0:n.map(function(e,t){var r=n[t-1];if(r&&(0,ni.g6)(e,t)){var i=(0,h._)({},e);return i.endTimestamp=r.timestamp,i.status=ef.izS.FAILURE,i}return e}))&&void 0!==e?e:[]},(0,el._)(B.slice(0,100))),U=(0,d.useCallback)(function(e){y(!!e)},[y]);return(0,i.jsxs)(e1.T,{children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(l.X6,{children:"Overview"}),tabs:(0,i.jsx)(OverviewTabs,{tab:"amp"})}),(0,i.jsx)(u.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,i.jsx)(e2.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,i.jsxs)(i.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling – instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,i.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,i.jsx)(e6.i,{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Running"}),(0,i.jsx)("td",{children:t.loading?(0,i.jsx)(m.$,{purpose:"body-text"}):(0,i.jsx)(e4.X,{format:"switch",checked:!t.paused,disabled:!c,onChange:(e=(0,eX._)(function(e){var n;return(0,eZ.Jh)(this,function(i){switch(i.label){case 0:if(n=e.target.checked)return[3,2];return[4,r({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."})];case 1:i.sent(),i.label=2;case 2:return t.setPaused(!n),[2]}})}),function(n){return e.apply(this,arguments)})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Evaluation frequency"}),(0,i.jsx)("td",{children:"~30s"})]})]})}),(0,i.jsx)(u.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,i.jsx)(l.Tj,{children:"Evaluation timeline"})}),L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nr.p,{ticks:M,onHoverTick:U,onSelectTick:I,exactRange:O,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,i.jsx)(e8.d,{tick:R,isOpen:!!R,close:function(){I(null)}}),"evaluations"===P?(0,i.jsx)(InstanceAutomaterializationEvaluationHistoryTable,{setSelectedTick:I,setTableView:F,setParentStatuses:k,setTimerange:_}):(0,i.jsx)(e5.o,{setTableView:F})]}):(0,i.jsxs)(u.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,i.jsx)(m.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:g.$()},children:"Loading evaluations…"})]})]})},no=t(83302),ns=t(94611),na=t(62311);function InstanceBackfills_templateObject(){var e=(0,p._)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"]);return InstanceBackfills_templateObject=function(){return e},e}function InstanceBackfills_templateObject1(){var e=(0,p._)(["\n  query InstanceBackfillsQuery($status: BulkActionStatus, $cursor: String, $limit: Int) {\n    partitionBackfillsOrError(status: $status, cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return InstanceBackfills_templateObject1=function(){return e},e}var labelForBackfillStatus=function(e){switch(e){case ef.Jv3.CANCELED:return"Canceled";case ef.Jv3.CANCELING:return"Canceling";case ef.Jv3.COMPLETED:return"Completed";case ef.Jv3.FAILED:return"Failed";case ef.Jv3.REQUESTED:return"In progress"}},nl=Object.keys(ef.Jv3).map(function(e){var n=labelForBackfillStatus(e);return{label:n,value:e,match:[e,n]}}),InstanceBackfills=function(){(0,A.Px)(),(0,B.j)("Overview | Backfills");var e=(0,v.a)(nc),n=(0,eH.im)({name:"Status",icon:"status",allValues:nl,allowMultipleSelections:!1,closeOnSelect:!0,renderLabel:function(e){var n=e.value;return(0,i.jsx)("div",{children:labelForBackfillStatus(n)})},getStringValue:function(e){return labelForBackfillStatus(e)}}),t=n.state,r=(0,eU.m)({filters:[n]}),o=r.button,s=r.activeFiltersJsx,c=(0,e7.l)({query:nu,variables:{status:t.size>0?Array.from(t)[0]:void 0},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.id:void 0},getResultArray:function(e){return(null==e?void 0:e.partitionBackfillsOrError.__typename)==="PartitionBackfills"?e.partitionBackfillsOrError.results:[]}}),d=c.queryResult,f=c.paginationProps,p=(0,C.C4)(d,C.dT),x=d.loading,j=d.data;return(0,i.jsxs)(e1.T,{children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(l.X6,{children:"Overview"}),tabs:(0,i.jsx)(OverviewTabs,{tab:"backfills",refreshState:p})}),(0,i.jsx)(u.x,{padding:{vertical:12,horizontal:20},children:(0,i.jsxs)(u.x,{flex:{direction:"column",gap:8},children:[(0,i.jsx)("div",{children:o}),s]})}),function(){if(x&&!j)return(0,i.jsx)(u.x,{padding:{vertical:64},flex:{direction:"column",alignItems:"center"},children:(0,i.jsxs)(u.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(m.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:g.$()},children:"Loading backfills…"})]})});var n,r=null==j?void 0:j.partitionBackfillsOrError;if((null==r?void 0:r.__typename)==="PythonError")return(0,i.jsx)(T.T9,{error:r});if(!r||!(null==r?void 0:r.results.length))return t.size>0?(0,i.jsx)(u.x,{padding:{vertical:64},children:(0,i.jsx)(eg.t,{icon:"no-results",title:"No matching backfills",description:"No backfills were found for this filter."})}):(0,i.jsx)(u.x,{padding:{vertical:64},children:(0,i.jsx)(eg.t,{icon:"no-results",title:"No backfills found",description:"This instance does not have any backfill jobs."})});var o=((null===(n=e.data)||void 0===n?void 0:n.instance.daemonHealth.allDaemonStatuses)||[]).filter(function(e){return"BACKFILL"===e.daemonType}).map(function(e){return e.required&&e.healthy}),s=o.length&&o.every(function(e){return e});return(0,i.jsxs)("div",{children:[s?null:(0,i.jsx)(u.x,{padding:{horizontal:24,vertical:16},children:(0,i.jsx)(na.B1,{})}),(0,i.jsx)(ns.G,{backfills:r.results.slice(0,10),refetch:d.refetch}),r.results.length>0?(0,i.jsx)(u.x,{margin:{top:16},children:(0,i.jsx)(no.b$,(0,h._)({},f))}):null]})}()]})},nc=(0,ec.Ps)(InstanceBackfills_templateObject(),eF.O),nu=(0,ec.Ps)(InstanceBackfills_templateObject1(),eO.B,ns.b),nd=t(56675),nh=t(12084),nf=t(28879),np=t.n(nf),nv=t(64989),nm=t.n(nv),nx=t(77491),ng=t.n(nx),nj=t(1813),ny=t(68651),nb=t(67690),nw=t(58701),nk=t(60130),nS=t(49313),nO=t(68052);function BackfillPage_templateObject(){var e=(0,p._)(["\n  color: ",";\n  font-size: 12px;\n  line-height: 16px;\n"]);return BackfillPage_templateObject=function(){return e},e}function BackfillPage_templateObject1(){var e=(0,p._)(["\n  query BackfillStatusesByAsset($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ...PartitionBackfillFragment\n      ...PythonErrorFragment\n      ... on BackfillNotFoundError {\n        message\n      }\n    }\n  }\n\n  fragment PartitionBackfillFragment on PartitionBackfill {\n    id\n    status\n    timestamp\n    endTimestamp\n    numPartitions\n    ...BackfillActionsBackfillFragment\n\n    error {\n      ...PythonErrorFragment\n    }\n    assetBackfillData {\n      rootTargetedPartitions {\n        partitionKeys\n        ranges {\n          start\n          end\n        }\n      }\n      assetBackfillStatuses {\n        ... on AssetPartitionsStatusCounts {\n          assetKey {\n            path\n          }\n          numPartitionsTargeted\n          numPartitionsInProgress\n          numPartitionsMaterialized\n          numPartitionsFailed\n        }\n        ... on UnpartitionedAssetStatus {\n          assetKey {\n            path\n          }\n          inProgress\n          materialized\n          failed\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return BackfillPage_templateObject1=function(){return e},e}function BackfillPage_templateObject2(){var e=(0,p._)(["\n  query BackfillPartitionsForAssetKey($backfillId: String!, $assetKey: AssetKeyInput!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionsTargetedForAssetKey(assetKey: $assetKey) {\n          partitionKeys\n          ranges {\n            start\n            end\n          }\n        }\n      }\n    }\n  }\n"]);return BackfillPage_templateObject2=function(){return e},e}np().extend(nm()),np().extend(ng());var BackfillPage=function(){var e=(0,nd.x)(),n=(0,o.k6)(),t=(0,o.UO)().backfillId;(0,A.Px)(),(0,B.j)("Backfill | ".concat(t));var r=(0,v.a)(nT,{variables:{backfillId:t}}),s=r.data,c=(null==s?void 0:s.partitionBackfillOrError.__typename)==="PartitionBackfill"?s.partitionBackfillOrError:null,d=!c||[ef.Jv3.REQUESTED,ef.Jv3.CANCELING].includes(c.status),h=(0,C.C4)(r,1e4,d);return(0,i.jsxs)(e1.T,{children:[(0,i.jsx)(a.m,{title:(0,i.jsxs)(l.X6,{children:[(0,i.jsx)(O.rU,{to:"/overview/backfills",style:{color:g.$()},children:"Backfills"})," / ",t]}),right:(0,i.jsxs)(u.x,{flex:{gap:12,alignItems:"center"},children:[d?(0,i.jsx)(C.xi,{refreshState:h}):null,c?(0,i.jsx)(nj.WH,{backfill:c,refetch:r.refetch,canCancelRuns:c.status===ef.Jv3.REQUESTED}):null]})}),function(){if(!s||!s.partitionBackfillOrError)return(0,i.jsx)(u.x,{padding:64,"data-testid":(0,nO.N)("page-loading-indicator"),children:(0,i.jsx)(m.$,{purpose:"page"})});if("PythonError"===s.partitionBackfillOrError.__typename)return(0,i.jsx)(T.T9,{error:s.partitionBackfillOrError});if("BackfillNotFoundError"===s.partitionBackfillOrError.__typename)return(0,i.jsx)(eg.t,{icon:"no-results",title:s.partitionBackfillOrError.message});var r,o,a,l=s.partitionBackfillOrError;function getRunsUrl(e){var n=[{token:"tag",value:"dagster/backfill=".concat(t)}];switch(e){case"inProgress":n.push({token:"status",value:ef.VOA.STARTED},{token:"status",value:ef.VOA.QUEUED},{token:"status",value:ef.VOA.STARTING},{token:"status",value:ef.VOA.CANCELING},{token:"status",value:ef.VOA.NOT_STARTED});break;case"complete":n.push({token:"status",value:ef.VOA.SUCCESS});break;case"failed":n.push({token:"status",value:ef.VOA.FAILURE}),n.push({token:"status",value:ef.VOA.CANCELED})}return(0,nS.it)(n)}var c=(r=(0,eX._)(function(r,i){var o,s,a,l;return(0,eZ.Jh)(this,function(c){switch(c.label){case 0:if(o={},!i)return[3,2];return[4,e.query({query:nC,variables:{backfillId:t,assetKey:(0,nk.W1)(r)}})];case 1:(l="PartitionBackfill"===(a=c.sent()).data.partitionBackfillOrError.__typename?a.data.partitionBackfillOrError.partitionsTargetedForAssetKey:null)&&(null===(s=l.ranges)||void 0===s?void 0:s.length)&&(o={default_range:l.ranges.map(function(e){return"[".concat(e.start,"...").concat(e.end,"]")}).join(",")}),c.label=2;case 2:return[2,n.push((0,L.p)(r,o))]}})}),function(e,n){return r.apply(this,arguments)});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.x,{padding:24,flex:{direction:"row",justifyContent:"space-between",wrap:"nowrap",alignItems:"center"},"data-testid":(0,nO.N)("backfill-page-details"),children:[(0,i.jsx)(Detail,{label:"Created",detail:(0,i.jsx)(nw.E,{timestamp:{ms:Number(1e3*l.timestamp)},timeFormat:{showSeconds:!0,showTimezone:!1}})}),(0,i.jsx)(Detail,{label:"Duration",detail:(0,i.jsx)(Duration,{start:1e3*l.timestamp,end:l.endTimestamp?1e3*l.endTimestamp:null})}),(0,i.jsx)(Detail,{label:"Partition selection",detail:(0,i.jsx)(nb.b,{targetPartitionCount:l.numPartitions||0,targetPartitions:null===(o=l.assetBackfillData)||void 0===o?void 0:o.rootTargetedPartitions})}),(0,i.jsx)(Detail,{label:"Status",detail:(0,i.jsx)(ny.w,{backfill:l})})]}),(0,i.jsxs)(e6.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:"50%"},children:"Asset name"}),(0,i.jsx)("th",{children:(0,i.jsx)(O.rU,{to:getRunsUrl("targeted"),children:"Partitions targeted"})}),(0,i.jsx)("th",{children:(0,i.jsx)(O.rU,{to:getRunsUrl("inProgress"),children:"In progress"})}),(0,i.jsx)("th",{children:(0,i.jsx)(O.rU,{to:getRunsUrl("complete"),children:"Completed"})}),(0,i.jsx)("th",{children:(0,i.jsx)(O.rU,{to:getRunsUrl("failed"),children:"Failed"})})]})}),(0,i.jsx)("tbody",{children:null===(a=l.assetBackfillData)||void 0===a?void 0:a.assetBackfillStatuses.map(function(e){var n,t,r,o;return"AssetPartitionsStatusCounts"===e.__typename?(n=e.numPartitionsTargeted,t=e.numPartitionsInProgress,r=e.numPartitionsMaterialized,o=e.numPartitionsFailed):(n=1,o=e.failed?1:0,t=e.inProgress?1:0,r=e.materialized?1:0),(0,i.jsxs)("tr",{"data-testid":(0,nO.N)("backfill-asset-row-".concat((0,I.Je)(e.assetKey))),children:[(0,i.jsx)("td",{children:(0,i.jsxs)(u.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(nh.Z,{onClick:function(){return c(e.assetKey,"AssetPartitionsStatusCounts"===e.__typename)},children:e.assetKey.path.join("/")})}),(0,i.jsx)("div",{children:(0,i.jsx)(StatusBar,{targeted:n,inProgress:t,completed:r,failed:o})})]})}),"AssetPartitionsStatusCounts"===e.__typename?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{children:n}),(0,i.jsx)("td",{children:t}),(0,i.jsx)("td",{children:r}),(0,i.jsx)("td",{children:o})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:t?(0,i.jsx)(b.V,{icon:"spinner",intent:"primary",children:"In progress"}):"-"}),(0,i.jsx)("td",{children:r?(0,i.jsx)(b.V,{intent:"success",children:"Completed"}):"-"}),(0,i.jsx)("td",{children:o?(0,i.jsx)(b.V,{intent:"danger",children:"Failed"}):"-"})]})]},(0,I.Je)(e.assetKey))})})]})]})}()]})},Detail=function(e){var n=e.label,t=e.detail;return(0,i.jsxs)(u.x,{flex:{direction:"column",gap:4},style:{minWidth:"280px"},children:[(0,i.jsx)(n_,{children:n}),(0,i.jsx)("div",{children:t})]})};function StatusBar(e){var n=e.targeted,t=e.inProgress,r=e.completed,o=e.failed;return(0,i.jsxs)("div",{style:{borderRadius:"8px",backgroundColor:g.gJ(),display:"grid",gridTemplateColumns:"".concat(100*r/n,"% ").concat(100*o/n,"% ").concat(100*t/n,"%"),gridTemplateRows:"100%",height:"12px",width:"200px",overflow:"hidden"},children:[(0,i.jsx)("div",{style:{background:g.fA()}}),(0,i.jsx)("div",{style:{background:g.FY()}}),(0,i.jsx)("div",{style:{background:g.L$()}})]})}var n_=_.ZP.div.withConfig({componentId:"sc-f232c43-0"})(BackfillPage_templateObject(),g.$()),Duration=function(e){var n=e.start,t=e.end,r=(0,s._)((0,d.useReducer)(function(e,n){return e+1},0),2),o=(r[0],r[1]);(0,d.useEffect)(function(){if(!t){var e=setInterval(o,6e4);return function(){return clearInterval(e)}}},[n,t]);var a=t?t-n:Date.now()-n;return(0,i.jsx)("span",{children:formatDuration(a)})},nT=(0,ec.Ps)(BackfillPage_templateObject1(),eO.B,nj.V2),nC=(0,ec.Ps)(BackfillPage_templateObject2()),formatDuration=function(e){var n=Math.floor(e/6e4%60),t=Math.floor(e/36e5%24),r=Math.floor(e/864e5),i="";return r>0?i+="".concat(r,"d ")+"".concat(t,"h"):t>0?i+="".concat(t,"h ")+"".concat(n,"m"):n>0&&(i+="".concat(n,"m ")+"".concat(Math.floor(e/1e3%60),"s")),i.trim()},OverviewRoot=function(){return(0,i.jsxs)(o.rs,{children:[(0,i.jsx)(o.AW,{path:"/overview/activity",children:(0,i.jsx)(OverviewActivityRoot,{})}),(0,i.jsx)(o.AW,{path:"/overview/jobs",children:(0,i.jsx)(OverviewJobsRoot,{})}),(0,i.jsx)(o.AW,{path:"/overview/schedules",children:(0,i.jsx)(OverviewSchedulesRoot,{})}),(0,i.jsx)(o.AW,{path:"/overview/sensors",children:(0,i.jsx)(OverviewSensorsRoot,{})}),(0,i.jsx)(o.AW,{path:"/overview/automation",children:(0,i.jsx)(AutomaterializationRoot,{})}),(0,i.jsx)(o.AW,{path:"/overview/backfills/:backfillId",children:(0,i.jsx)(BackfillPage,{})}),(0,i.jsx)(o.AW,{path:"/overview/backfills",exact:!0,children:(0,i.jsx)(InstanceBackfills,{})}),(0,i.jsx)(o.AW,{path:"/overview/resources",children:(0,i.jsx)(OverviewResourcesRoot,{})}),(0,i.jsx)(o.AW,{path:"*",render:function(){return(0,i.jsx)(o.l_,{to:"/overview/activity"})}})]})},nA=OverviewRoot}}]);
//# sourceMappingURL=411.a65a8d19827546e9.js.map