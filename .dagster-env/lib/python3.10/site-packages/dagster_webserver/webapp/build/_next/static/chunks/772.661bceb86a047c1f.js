"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{17131:function(e,n,t){t.d(n,{m:function(){return PageHeader}});var o=t(73235),i=t(52322);t(2784);var r=t(35505),a=t(22139),s=t(24878);function _templateObject(){var e=(0,o._)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"]);return _templateObject=function(){return e},e}var PageHeader=function(e){var n=e.title,t=e.tags,o=e.right,r=e.tabs;return(0,i.jsxs)(c,{background:s.x(),padding:{top:16,left:24,right:12},border:"bottom",children:[(0,i.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,i.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12,wrap:"wrap"},children:[n,t]}),o]}),r]})},c=(0,r.ZP)(a.x).withConfig({componentId:"sc-accd2fe7-0"})(_templateObject())},74772:function(e,n,t){t.r(n),t.d(n,{CodeLocationsPage:function(){return CodeLocationsPage},default:function(){return ei}});var o=t(58467),i=t(52322),r=t(22139),a=t(17131),s=t(81308),c=t(34822),l=t(2784),d=t(74897),u=t(4120),flatten=function(e){var n=[],t=!0,o=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)!function(){var e=r.value,t=e.locationOrLoadError;t&&(null==t?void 0:t.__typename)!=="PythonError"?t.repositories.forEach(function(t){n.push({type:"repository",codeLocation:e,repository:t})}):n.push({type:"error",node:e})}()}catch(e){o=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return n},filterBySearch=function(e,n){var t=n.toLocaleLowerCase();return e.filter(function(e){return"error"===e.type?e.node.name.toLocaleLowerCase().includes(t):e.codeLocation.name.toLocaleLowerCase().includes(t)||e.repository.name.toLocaleLowerCase().includes(t)})},flattenCodeLocationRows=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=flatten(e),o=filterBySearch(t,n);return{flattened:t,filtered:o}},x=t(68028),h=t(28252),f=t(39852),p=t(63832),j=t(92364),m=t(88510),g=t(73235),v=t(82550),y=t(16861),b=t(9001),C=t(25195),L=t(47933),w=t(35505),_=t(87612),O=t(85333),R=t(6692),k=t(44678),E=t(37783),I=t(91532),S=t(10952),N=t(54266),V=t(94092),z=t(45984),CodeLocationMenu_CodeLocationMenu=function(e){var n,t=e.locationNode,r=(0,o._)((0,l.useState)(!1),2),a=r[0],s=r[1],c=(0,o._)((0,l.useState)(!1),2),d=c[0],u=c[1],x=null,h=null;return(null===(n=t.locationOrLoadError)||void 0===n?void 0:n.__typename)==="RepositoryLocation"&&null!==t.locationOrLoadError.dagsterLibraryVersions&&(x=(0,i.jsx)(k.sN,{icon:"info",text:"View Dagster libraries",onClick:function(){return u(!0)}}),h=(0,i.jsx)(DagsterLibrariesDialog,{libraries:t.locationOrLoadError.dagsterLibraryVersions,isOpen:d,setIsOpen:u})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.J,{position:"bottom-left",content:(0,i.jsxs)(k.v2,{children:[(0,i.jsx)(k.sN,{icon:"info",text:"View configuration",onClick:function(){return s(!0)}}),x]}),children:(0,i.jsx)(b.zx,{icon:(0,i.jsx)(I.JO,{name:"expand_more"})})}),(0,i.jsx)(CodeLocationConfigDialog,{metadata:t.displayMetadata,isOpen:a,setIsOpen:s}),h]})},CodeLocationConfigDialog=function(e){var n=e.isOpen,t=e.setIsOpen,o=e.metadata;return(0,i.jsxs)(S.Vq,{title:"Code location configuration",icon:"info",isOpen:n,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,i.jsx)(CodeLocationConfig,{displayMetadata:o}),(0,i.jsx)(S.cN,{topBorder:!0,children:(0,i.jsx)(b.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},DagsterLibrariesDialog=function(e){var n=e.isOpen,t=e.setIsOpen,o=e.libraries;return(0,i.jsxs)(S.Vq,{title:"Dagster library versions",icon:"info",isOpen:n,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,i.jsxs)(N.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Libray"}),(0,i.jsx)("th",{children:"Version"})]})}),(0,i.jsx)("tbody",{children:o.map(function(e){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.name}),(0,i.jsx)("td",{children:e.version})]},e.name)})})]}),(0,i.jsx)(S.cN,{topBorder:!0,children:(0,i.jsx)(b.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},CodeLocationConfig=function(e){var n=e.displayMetadata,t=(0,l.useMemo)(function(){var e=n.reduce(function(e,n){return(0,R._)((0,O._)({},e),(0,_._)({},n.key,n.value))},{});return z.Pz(e)},[n]);return(0,i.jsx)(V.u,{value:t,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})},T=t(81862),D=t(22970),P=t(43180),M=t(57830),B=t(12084),$=t(38153),q=t(35157);function _templateObject(){var e=(0,g._)(["\n  :hover,\n  :active {\n    outline: none;\n    text-decoration: none;\n  }\n"]);return _templateObject=function(){return e},e}var RepositoryCountTags_RepositoryCountTags=function(e){var n=e.repo,t=e.repoAddress,o=n.assetGroups.length,a=n.pipelines.filter(function(e){var n=e.name;return!(0,q.pv)(n)}).length,s=n.schedules.length,c=n.sensors.length;return(0,i.jsxs)(r.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)(P.u,{content:1===o?"1 asset group":"".concat(o," asset groups"),placement:"top",children:(0,i.jsx)(F,{to:(0,$.$U)(t,"/assets"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"asset_group",children:o})})}),(0,i.jsx)(P.u,{content:1===a?"1 job":"".concat(a," jobs"),placement:"top",children:(0,i.jsx)(F,{to:(0,$.$U)(t,"/jobs"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"job",children:a})})}),(0,i.jsx)(P.u,{content:1===s?"1 schedule":"".concat(s," schedules"),placement:"top",children:(0,i.jsx)(F,{to:(0,$.$U)(t,"/schedules"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"schedule",children:s})})}),(0,i.jsx)(P.u,{content:1===c?"1 sensor":"".concat(c," sensors"),placement:"top",children:(0,i.jsx)(F,{to:(0,$.$U)(t,"/sensors"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"sensors",children:c})})})]})},F=(0,w.ZP)(L.rU).withConfig({componentId:"sc-b34b9578-0"})(_templateObject()),H=t(70958),U=t(37160),Z=t(44254),J=t(19211),W=t(47544),A=t(33308),G=t(40092),Q=t(33869);function CodeLocationRowSet_templateObject(){var e=(0,g._)(["\n  width: 100%;\n  color: ",";\n  font-size: 12px;\n\n  .bp4-popover2-target {\n    overflow: hidden;\n  }\n\n  button {\n    background: ",";\n    border: none;\n    color: ",";\n    cursor: pointer;\n    font-size: 12px;\n    overflow: hidden;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n\n    :focus {\n      outline: none;\n    }\n  }\n"]);return CodeLocationRowSet_templateObject=function(){return e},e}var ImageName=function(e){var n=e.metadata,t=(0,W.m)(),o=n.find(function(e){return"image"===e.key}),r=(null==o?void 0:o.value)||"",a=(0,l.useCallback)((0,T._)(function(){return(0,D.Jh)(this,function(e){switch(e.label){case 0:return t(r),[4,(0,J.B7)({intent:"success",icon:"done",message:"Image string copied!"})];case 1:return e.sent(),[2]}})}),[t,r]);return o?(0,i.jsxs)(K,{flex:{direction:"row",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,i.jsx)(P.u,{content:"Click to copy",placement:"top",display:"block",children:(0,i.jsx)("button",{onClick:a,children:(0,i.jsx)(y.g,{text:o.value})})})]}):null},K=(0,w.ZP)(r.x).withConfig({componentId:"sc-bc7561aa-0"})(CodeLocationRowSet_templateObject(),C.$(),C.v8(),C.$()),ModuleOrPackageOrFile=function(e){var n=e.metadata.find(function(e){var n=e.key;return"module_name"===n||"package_name"===n||"python_file"===n});return n?(0,i.jsxs)(r.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:C.$(),fontSize:12},children:[(0,i.jsxs)("span",{style:{fontWeight:500},children:[n.key,":"]}),(0,i.jsx)(y.g,{text:n.value})]}):null},LocationStatus=function(e){var n,t=e.location,a=e.locationOrError,s=(0,o._)((0,l.useState)(!1),2),c=s[0],d=s[1],u=(0,l.useMemo)(function(){return(0,G.je)(t)},[t]),x=(0,G.Dc)({scope:"location",reloadFn:u}),h=x.reloading,f=x.tryReload;return"LOADING"===a.loadStatus?a.locationOrLoadError?(0,i.jsx)(M.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,i.jsx)(M.V,{minimal:!0,intent:"primary",children:"Loading..."}):(null===(n=a.locationOrLoadError)||void 0===n?void 0:n.__typename)==="PythonError"?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.x,{flex:{alignItems:"center",gap:12},children:[(0,i.jsx)(M.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,i.jsx)(B.Z,{onClick:function(){return d(!0)},children:(0,i.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,i.jsx)(H.p,{location:t,isOpen:c,error:a.locationOrLoadError,reloading:h,onDismiss:function(){return d(!1)},onTryReload:function(){return f()}})]}):(0,i.jsx)(M.V,{minimal:!0,intent:"success",children:"Loaded"})},ReloadButton=function(e){var n=e.location;return(0,i.jsx)(A.s,{location:n,ChildComponent:function(e){var n=e.reloading,t=e.tryReload,o=e.hasReloadPermission;return(0,i.jsx)(r.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,i.jsx)(P.u,{content:o?"":A.H,canShow:!o,useDisabledButtonTooltipFix:!0,children:(0,i.jsx)(b.zx,{icon:(0,i.jsx)(I.JO,{name:"refresh"}),disabled:!o,loading:n,onClick:function(){return t()},children:"Reload"})})})}})},X=t(55658);function VirtualizedCodeLocationRow_templateObject(){var e=(0,g._)(["\n  display: grid;\n  grid-template-columns: ",";\n"]);return VirtualizedCodeLocationRow_templateObject=function(){return e},e}var Y="3fr 1fr 1fr 240px 160px",ee=l.forwardRef(function(e,n){var t=e.locationNode,o=e.index,r=t.name;return(0,i.jsx)("div",{ref:n,"data-index":o,children:(0,i.jsxs)(et,{border:"bottom",children:[(0,i.jsx)(X.E5,{children:(0,i.jsx)(y.g,{text:r})}),(0,i.jsx)(X.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(LocationStatus,{location:r,locationOrError:t})})}),(0,i.jsx)(X.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(Q.C,{unixTimestamp:t.updatedTimestamp})})}),(0,i.jsx)(X.E5,{children:"–"}),(0,i.jsx)(X.E5,{children:(0,i.jsxs)(b.zH,{children:[(0,i.jsx)(ReloadButton,{location:r}),(0,i.jsx)(CodeLocationMenu_CodeLocationMenu,{locationNode:t})]})})]})})}),en=l.forwardRef(function(e,n){var t=e.codeLocation,o=e.repository,a=e.index,s=(0,U.kQ)(o.name,o.location.name),c=(0,v._)(t.displayMetadata).concat((0,v._)(o.displayMetadata));return(0,i.jsx)("div",{ref:n,"data-index":a,children:(0,i.jsxs)(et,{border:"bottom",children:[(0,i.jsx)(X.E5,{children:(0,i.jsxs)(r.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("div",{style:{fontWeight:500},children:(0,i.jsx)(L.rU,{to:(0,$.$U)(s),children:(0,i.jsx)(y.g,{text:(0,Z.Uz)(s)})})}),(0,i.jsx)(ImageName,{metadata:c}),(0,i.jsx)(ModuleOrPackageOrFile,{metadata:c})]})}),(0,i.jsx)(X.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(LocationStatus,{location:o.name,locationOrError:t})})}),(0,i.jsx)(X.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(Q.C,{unixTimestamp:t.updatedTimestamp})})}),(0,i.jsx)(X.E5,{children:(0,i.jsx)(RepositoryCountTags_RepositoryCountTags,{repo:o,repoAddress:s})}),(0,i.jsx)(X.E5,{style:{alignItems:"flex-end"},children:(0,i.jsxs)(b.zH,{children:[(0,i.jsx)(ReloadButton,{location:t.name}),(0,i.jsx)(CodeLocationMenu_CodeLocationMenu,{locationNode:t})]})})]})})}),VirtualizedCodeLocationHeader=function(){return(0,i.jsxs)(r.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:Y,height:"32px",fontSize:"12px",color:C.$()},children:[(0,i.jsx)(X.qN,{children:"Name"}),(0,i.jsx)(X.qN,{children:"Status"}),(0,i.jsx)(X.qN,{children:"Updated"}),(0,i.jsx)(X.qN,{children:"Definitions"}),(0,i.jsx)(X.qN,{style:{textAlign:"right"},children:"Actions"})]})},et=(0,w.ZP)(r.x).withConfig({componentId:"sc-96b751d6-0"})(VirtualizedCodeLocationRow_templateObject(),Y),RepositoryLocationsList=function(e){var n,t,o=e.loading,a=e.codeLocations,s=e.searchValue,c=(0,l.useRef)(null),d=(0,m.MG)({count:a.length,getScrollElement:function(){return c.current},estimateSize:function(){return 64},overscan:10}),u=d.getTotalSize(),x=d.getVirtualItems();return o&&!a.length?(0,i.jsxs)(r.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,i.jsx)(p.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Loading…"})]}):a.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(VirtualizedCodeLocationHeader,{}),(0,i.jsx)(X.W2,{ref:c,children:(0,i.jsx)(X.Nh,{$totalHeight:u,children:(0,i.jsx)(X.HR,{$start:null!==(t=null===(n=x[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0,children:x.map(function(e){var n=e.index,t=e.key,o=a[n];return"error"===o.type?(0,i.jsx)(ee,{index:n,locationNode:o.node,ref:d.measureElement},t):(0,i.jsx)(en,{index:n,codeLocation:o.codeLocation,repository:o.repository,ref:d.measureElement},t)})})})})]}):s?(0,i.jsx)(r.x,{padding:{vertical:32},children:(0,i.jsx)(j.t,{icon:"folder",title:"No matching code locations",description:(0,i.jsxs)("div",{children:["No code locations were found for search query ",(0,i.jsx)("strong",{children:s}),"."]})})}):(0,i.jsx)(r.x,{padding:{vertical:32},children:(0,i.jsx)(j.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},eo=t(46988),CodeLocationsPage=function(){(0,x.Px)(),(0,h.j)("Code locations");var e=l.useContext(d.N).pageTitle,n=l.useContext(eo.C5),t=n.locationEntries,p=n.loading,j=(0,o._)(l.useState(""),2),m=j[0],g=j[1],v=l.useCallback(function(e){g(e.target.value)},[]),y=m.toLocaleLowerCase(),b=l.useMemo(function(){return flattenCodeLocationRows(t,y)},[t,y]),C=b.flattened,L=b.filtered,w=C.length,_=w>10;return(0,i.jsxs)(r.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(s.X6,{children:e}),tabs:(0,i.jsx)(u.Z,{tab:"locations"})}),(0,i.jsxs)(r.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[_?(0,i.jsx)(c.oi,{icon:"search",value:m,onChange:v,placeholder:"Filter code locations by name…",style:{width:"400px"}}):(0,i.jsx)(s.pm,{id:"repository-locations",children:p||!w?"Code locations":1===w?"1 code location":"".concat(w," code locations")}),(0,i.jsxs)(r.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[_?(0,i.jsx)("div",{children:"".concat(w," code locations")}):null,(0,i.jsx)(f.i,{})]})]}),(0,i.jsx)(RepositoryLocationsList,{loading:p,codeLocations:L,searchValue:m})]})},ei=CodeLocationsPage},4120:function(e,n,t){t.d(n,{Z:function(){return InstanceTabs}});var o=t(52322),i=t(22139),r=t(56024),a=t(2784),s=t(74897),c=t(78945),l=t(55237),d=t(91532),u=t(25195),x=t(77334),h=t(29255),f=(0,a.memo)(function(){var e=(0,a.useContext)(h.Z).daemons;return e?(0,o.jsx)(x.a,{content:e.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,o.jsx)(d.JO,{name:"warning",color:u.qr()})}):null}),p=t(43180),j=t(63832),m=(0,a.memo)(function(e){var n=e.placeholder,t=(0,a.useContext)(h.Z).codeLocations;return t?"spinner"===t.type?(0,o.jsx)(p.u,{content:t.content,placement:"bottom",children:(0,o.jsx)(j.$,{purpose:"body-text",fillColor:u.md()})}):(0,o.jsx)(x.a,{content:t.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,o.jsx)(d.JO,{name:"warning",color:u.qr()})}):n?(0,o.jsx)("div",{style:{width:"16px"}}):null}),g=t(40049),InstanceTabs=function(e){var n=e.refreshState,t=e.tab,d=(0,a.useContext)(s.N).healthTitle,u=(0,c._)();return(0,o.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,o.jsxs)(r.mQ,{selectedTabId:t,children:[(0,o.jsx)(g.f,{id:"locations",title:"Code locations",to:"/locations",icon:(0,o.jsx)(m,{placeholder:!1})}),(0,o.jsx)(g.f,{id:"health",title:d,to:"/health",icon:(0,o.jsx)(f,{})}),u?(0,o.jsx)(g.f,{id:"concurrency",title:"Concurrency limits",to:"/concurrency"}):null,u?(0,o.jsx)(g.f,{id:"config",title:"Configuration",to:"/config"}):null]}),n?(0,o.jsx)(i.x,{padding:{bottom:8},children:(0,o.jsx)(l.xi,{refreshState:n})}):null]})}},78945:function(e,n,t){t.d(n,{_:function(){return useCanSeeConfig}});var o=t(73235),i=t(40794),r=t(60138);function _templateObject(){var e=(0,o._)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"]);return _templateObject=function(){return e},e}var useCanSeeConfig=function(){var e=(0,i.a)(a).data;return!!(null==e?void 0:e.instance.hasInfo)},a=(0,r.Ps)(_templateObject())},39852:function(e,n,t){t.d(n,{i:function(){return ReloadAllButton}});var o=t(58467),i=t(52322),r=t(43180),a=t(9001),s=t(91532),c=t(10952),l=t(2784),d=t(70958),u=t(54949),x=t(56266),h=t(40092),ReloadAllButton=function(e){var n=e.label,t=void 0===n?"Reload all":n,f=(0,u.WB)(),p=f.permissions.canReloadWorkspace,j=f.disabledReasons,m=(0,h.Dc)({scope:"workspace",reloadFn:h.rL}),g=m.reloading,v=m.tryReload,y=m.error,b=m.errorLocationId,C=(0,o._)((0,l.useState)(!!y),2),L=C[0],w=C[1];return((0,l.useEffect)(function(){return w(!!y)},[y]),p)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.zx,{outlined:!0,onClick:v,icon:(0,i.jsx)(s.JO,{name:"refresh"}),loading:g,children:t}),b?(0,i.jsx)(d.V,{error:y,location:b,reloading:g,onTryReload:v,onDismiss:function(){return w(!1)},isOpen:L}):(0,i.jsxs)(c.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:L,children:[(0,i.jsx)(c.a7,{children:y&&(0,i.jsx)(x.T9,{error:y})}),(0,i.jsx)(c.cN,{children:(0,i.jsx)(a.zx,{onClick:function(){return w(!1)},children:"Dismiss"})})]})]}):(0,i.jsx)(r.u,{content:j.canReloadWorkspace,children:(0,i.jsx)(a.zx,{outlined:!0,icon:(0,i.jsx)(s.JO,{name:"refresh"}),disabled:!0,children:t})})}}}]);
//# sourceMappingURL=772.661bceb86a047c1f.js.map